* Need compiler "loadfdll.dll" dated 5-28-2015 or later to use this library file. To find the modified date
* for the "loadfdll.dll" right mouse click on that file and select "Properties" and then select the "Details" tab
* Now look for Date Modified.
* You can download latest "loadfdll.dll" from Geometric website in the post source area under compilers.
* Just copy the new compiler over the current "loadfdll.dll" in your installed UPG directory.
*
* In section = CALC_POST_INITIALIZE and new section = CALC_PRE_POST_INITIALIZE we are setting the below post variables for library version number.
* When you post you will get to CALC_PRE_POST_INITIALIZE before any other CALC section.
* POST_LIBRARY_VERSION=2023 - 8-01-2022
* POST_LIBRARY_SUBVERSION=1 - 8-01-2022
* POST_LIBRARY_VERSION=2022 - 1-31-2022
* POST_LIBRARY_SUBVERSION=2 - 2-21-2022 Deleted duplicate defined attributes
* POST_LIBRARY_SUBVERSION=1 - 1-31-2022
* POST_LIBRARY_VERSION=2021 - 8-17-2020
* POST_LIBRARY_SUBVERSION=1 - 8-17-2020
* POST_LIBRARY_VERSION=2020 - 7-12-2019
* POST_LIBRARY_SUBVERSION=1 - 7-12-2019
* POST_LIBRARY_VERSION=2019 - 7-12-2018
* POST_LIBRARY_SUBVERSION=1 - 7-12-2018   ^^^
* POST_LIBRARY_SUBVERSION=2 - 1-04-2019
* POST_LIBRARY_SUBVERSION=3 - 2-28-2019
* POST_LIBRARY_VERSION=2018 - 6-13-2017
* POST_LIBRARY_SUBVERSION=1 - 6-13-2017
* POST_LIBRARY_SUBVERSION=2 - 12-12-2017
* POST_LIBRARY_SUBVERSION=3 - 5-25-2018
* POST_LIBRARY_VERSION=2017 - 12-19-2016
* POST_LIBRARY_SUBVERSION=1 - 12-19-2016
* POST_LIBRARY_VERSION=2016 - 6-16-2015
* POST_LIBRARY_SUBVERSION=7 - 9-15-2016
* POST_LIBRARY_SUBVERSION=6 - 6-08-2016
* POST_LIBRARY_SUBVERSION=5 - 5-20-2016
* POST_LIBRARY_SUBVERSION=4 - 4-22-2016
* POST_LIBRARY_SUBVERSION=3 - 11-18-2015
* POST_LIBRARY_SUBVERSION=2 - 9-8-2015 Handle new B axis output for turning
* POST_LIBRARY_SUBVERSION=1 - 6-16-2015
* POST_LIBRARY_VERSION=2015 - 11-20-2014
* POST_LIBRARY_SUBVERSION=2 - 3-02-2015
* POST_LIBRARY_SUBVERSION=1 - 11-20-2014
* POST_LIBRARY_VERSION=2014
* POST_LIBRARY_SUBVERSION=4 - 8-20-2014
* POST_LIBRARY_SUBVERSION=3 - 4-21-2014
* POST_LIBRARY_SUBVERSION=2 - before 4-21-2014
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define Special Lathe Definitions
*----------------------------------------------------------
:DEFINE TOOL_CHANGE=-1
:DEFINE NONE=0
:DEFINE BOTH=4
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define G CODE Definitions
*----------------------------------------------------------
:DEFINE G_RAPID=0
:DEFINE G_LINE=1
:DEFINE G_CW_ARC=2
:DEFINE G_CCW_ARC=3
:DEFINE G_THREADING=4
:DEFINE G_STAN_THREAD=5
:DEFINE G_ABS=6
:DEFINE G_INC=7
:DEFINE G_COMP_OFF=8
:DEFINE G_COMP_LEFT=9
:DEFINE G_COMP_RIGHT=10
:DEFINE G_ENGLISH=11
:DEFINE G_METRIC=12
:DEFINE G_DWELL=13
:DEFINE G_FINISH_CYCLE=14
:DEFINE G_TURN_CYCLE=15
:DEFINE G_FACE_CYCLE=16
:DEFINE G_DRILL_CYCLE=17
:DEFINE G_GROOVE_CYCLE=18
:DEFINE G_THREAD_CYCLE=19
:DEFINE G_HOME=20
:DEFINE G_SFPM=21
:DEFINE G_RPM=22
:DEFINE G_FPR=23
:DEFINE G_FPM=24
:DEFINE G_PRESET=25
:DEFINE G_DRILL_PECK=26
:DEFINE G_DRILL_F_PECK=27
:DEFINE G_WORK_1=28
:DEFINE G_WORK_2=29
:DEFINE G_WORK_3=30
:DEFINE G_WORK_4=31
:DEFINE G_WORK_5=32
:DEFINE G_WORK_6=33
:DEFINE G_VMAX=34
:DEFINE G_ANUL=35
:DEFINE G_CAN_PRESET=36
:DEFINE G_TURRET_R=37
:DEFINE G_TURRET_F=38
*
:DEFINE G_WORK_7=97
:DEFINE G_WORK_8=98
:DEFINE G_WORK_9=99
:DEFINE G_WORK_10=100
:DEFINE G_WORK_11=101
:DEFINE G_WORK_12=102
:DEFINE G_WORK_13=103
:DEFINE G_WORK_14=104
:DEFINE G_WORK_15=105
:DEFINE G_WORK_16=106
:DEFINE G_WORK_17=107
:DEFINE G_WORK_18=108
:DEFINE G_WORK_19=109
:DEFINE G_WORK_20=110
:DEFINE G_WORK_21=111
:DEFINE G_WORK_22=112
:DEFINE G_WORK_23=113
:DEFINE G_WORK_24=114
:DEFINE G_WORK_25=115
:DEFINE G_WORK_26=116
:DEFINE G_WORK_27=117
:DEFINE G_WORK_28=118
:DEFINE G_WORK_29=119
:DEFINE G_WORK_30=120
:DEFINE G_WORK_31=121
:DEFINE G_WORK_32=122
:DEFINE G_WORK_33=123
:DEFINE G_WORK_34=124
:DEFINE G_WORK_35=125
:DEFINE G_WORK_36=126
:DEFINE G_WORK_37=127
:DEFINE G_WORK_38=128
:DEFINE G_WORK_39=129
:DEFINE G_WORK_40=130
:DEFINE G_WORK_41=131
:DEFINE G_WORK_42=132
:DEFINE G_WORK_43=133
:DEFINE G_WORK_44=134
:DEFINE G_WORK_45=135
:DEFINE G_WORK_46=136
:DEFINE G_WORK_47=137
:DEFINE G_WORK_48=138
:DEFINE G_WORK_49=139
:DEFINE G_WORK_50=140
:DEFINE G_WORK_51=141
:DEFINE G_WORK_52=142
:DEFINE G_WORK_53=143
:DEFINE G_WORK_54=144
:DEFINE G_WORK_55=145
:DEFINE G_WORK_56=146
:DEFINE G_WORK_57=147
:DEFINE G_WORK_58=148
:DEFINE G_WORK_59=149
:DEFINE G_WORK_60=150
:DEFINE G_WORK_61=151
:DEFINE G_WORK_62=152
:DEFINE G_WORK_63=153
:DEFINE G_WORK_64=154
:DEFINE G_WORK_65=155
:DEFINE G_WORK_66=156
:DEFINE G_WORK_67=157
:DEFINE G_WORK_68=158
:DEFINE G_WORK_69=159
:DEFINE G_WORK_70=160
:DEFINE G_WORK_71=161
:DEFINE G_WORK_72=162
:DEFINE G_WORK_73=163
:DEFINE G_WORK_74=164
:DEFINE G_WORK_75=165
:DEFINE G_WORK_76=166
:DEFINE G_WORK_77=167
:DEFINE G_WORK_78=168
:DEFINE G_WORK_79=169
:DEFINE G_WORK_80=170
:DEFINE G_WORK_81=171
:DEFINE G_WORK_82=172
:DEFINE G_WORK_83=173
:DEFINE G_WORK_84=174
:DEFINE G_WORK_85=175
:DEFINE G_WORK_86=176
:DEFINE G_WORK_87=177
:DEFINE G_WORK_88=178
:DEFINE G_WORK_89=179
:DEFINE G_WORK_90=180
:DEFINE G_WORK_91=181
:DEFINE G_WORK_92=182
:DEFINE G_WORK_93=183
:DEFINE G_WORK_94=184
:DEFINE G_WORK_95=185
:DEFINE G_WORK_96=186
:DEFINE G_WORK_97=187
:DEFINE G_WORK_98=188
:DEFINE G_WORK_99=189
:DEFINE G_WORK_100=190
:DEFINE G_WORK_101=191
:DEFINE G_WORK_102=192
:DEFINE G_WORK_103=193
:DEFINE G_WORK_104=194
:DEFINE G_WORK_105=195
:DEFINE G_WORK_106=196
:DEFINE G_WORK_107=197
:DEFINE G_WORK_108=198
:DEFINE G_WORK_109=199
:DEFINE G_WORK_110=200
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define M CODE Definitions
*----------------------------------------------------------
:DEFINE M_STOP=0
:DEFINE M_OPT_STOP=1
:DEFINE M_PROG_END=2
:DEFINE M_SPIN_CW=3
:DEFINE M_SPIN_CCW=4
:DEFINE M_SPIN_STOP=5
:DEFINE M_TOOL_CHANGE=6
:DEFINE M_COOL_ON=7
:DEFINE M_COOL_OFF=8
:DEFINE M_ORIENT=9
:DEFINE M_END_PROG=10
:DEFINE M_SUB_CALL=11
:DEFINE M_SUB_END=12
:DEFINE M_PARTIAL_ARC=13
:DEFINE M_CW_FLOOD=14
:DEFINE M_CCW_FLOOD=15
:DEFINE M_SKIP=16
:DEFINE M_SETUP=17
:DEFINE M_REPEAT_END=18
:DEFINE M_CSFM_ON=19
:DEFINE M_CSFM_OFF=20
:DEFINE M_COOL_FLOOD=21
:DEFINE M_TURRET_CW=22
:DEFINE M_TURRET_CCW=23
:DEFINE M_TURRET_SIDE=24
:DEFINE M_TURRET_END=25
:DEFINE M_SIMUL_ON=26
:DEFINE M_SIMUL_OFF=27
:DEFINE M_H_PRESSURE_ON=28
:DEFINE M_H_PRESSURE_OFF=29
:DEFINE M_SLIDE_ADVANCE=30
:DEFINE M_SLIDE_RETRACT=31
:DEFINE M_SLIDE_ADV_CON=32
:DEFINE M_SLIDE_RET_CON=33
:DEFINE M_SPINDLE_RETRACT=34
:DEFINE M_SPINDLE_RET_CON=35
:DEFINE M_PRECISION=36
:DEFINE M_S_PRECISION=37
:DEFINE M_PARTS_IN=38
:DEFINE M_PARTS_OUT=39
:DEFINE M_SUB_CW=40
:DEFINE M_SUB_CCW=41
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define REGISTER Definitions
*----------------------------------------------------------
:DEFINE REG_A=1
:DEFINE REG_B=2
:DEFINE REG_C=3
:DEFINE REG_D=4
:DEFINE REG_E=5
:DEFINE REG_F=6
:DEFINE REG_G=7
:DEFINE REG_H=8
:DEFINE REG_I=9
:DEFINE REG_J=10
:DEFINE REG_K=11
:DEFINE REG_L=12
:DEFINE REG_M=13
:DEFINE REG_N=14
:DEFINE REG_O=15
:DEFINE REG_P=16
:DEFINE REG_Q=17
:DEFINE REG_R=18
:DEFINE REG_S=19
:DEFINE REG_T=20
:DEFINE REG_U=21
:DEFINE REG_V=22
:DEFINE REG_W=23
:DEFINE REG_X=24
:DEFINE REG_Y=25
:DEFINE REG_Z=26
:DEFINE REG_T2=27
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define SETUP Attributes -- INTEGERs
*----------------------------------------------------------
:ATTRNAME=program number
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Program Number
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Program number
:ATTRLONG=ENTER Program number
:ATTRHIGH=9999
:ATTRLOW=1
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar tool
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Bar Puller Tool
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Bar Puller Tool
:ATTRLONG=ENTER Bar Puller Tool
:ATTRHIGH=64
:ATTRLOW=1
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=starting sync number
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Start Sync Number
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Start Sync Number
:ATTRLONG=ENTER Start Sync Number
:ATTRHIGH=999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=end sync number
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=End Sync Number
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=End Sync Number
:ATTRLONG=ENTER End Sync Number
:ATTRHIGH=999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=tool sync number
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Sync Number
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Tool Sync Number
:ATTRLONG=ENTER Tool Sync Number
:ATTRHIGH=999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=work coord
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Work Coordinate 54 - 59
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Work Coordinate 54 - 59
:ATTRLONG=ENTER Work Coordinate 54 - 59
:ATTRHIGH=59
:ATTRLOW=54
:ATTRDEFAULT=54
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=sub work coord
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Sub Work Coordinate 0 - 60
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Sub Work Coordinate 0 - 60
:ATTRLONG=ENTER Sub Work Coordinate 0 - 60
:ATTRHIGH=60
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=fixture offset
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Fixture Offset
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Fixture Offset
:ATTRLONG=ENTER Fixture Offset
:ATTRHIGH=16
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=turret rotation
:ATTRVTYPE=INTEGER
:ATTRTYPE=SELECT
:ATTREMARK=Turret Rotation
:ATTRSEL=N
:ATTRTITLE=Turret Rotation
:ATTRSELSTR=CW
:ATTRSELSTR=CCW
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=direct rpm
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Direct RPM
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Direct RPM
:ATTRLONG=ENTER Direct RPM
:ATTRHIGH=9999
:ATTRLOW=0
:ATTRDEFAULT=1000
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=maximum rpm
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Maximum RPM
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Maximum RPM
:ATTRLONG=ENTER Maximum RPM
:ATTRHIGH=9999
:ATTRLOW=0
:ATTRDEFAULT=3000
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=tool offset
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Offset
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Tool Offset
:ATTRLONG=ENTER Tool Offset
:ATTRHIGH=64
:ATTRLOW=1
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=spindle range
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle Range
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Spindle Range
:ATTRLONG=ENTER Spindle Range
:ATTRHIGH=99
:ATTRLOW=0
:ATTRDEFAULT=42
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=gear range
:ATTRTYPE=VALUE
:ATTRVTYPE=INTEGER
:ATTREMARK=Gear Range
:ATTRSEL=N
:ATTRINLEN=3
:ATTRSHORT=Gear Range
:ATTRLONG=ENTER Gear Range
:ATTRHIGH=99
:ATTRLOW=0
:ATTRDEFAULT=54
:ATTRUSED=1
:ATTREND
*
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define SETUP Attributes -- DECIMALs
*----------------------------------------------------------
:ATTRNAME=chord length
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Chord Length
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Arc Chord Length
:ATTRLONG=ENTER Arc Chord Length
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=.01
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=x tool change
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Tool Change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Tool Change
:ATTRLONG=ENTER X Tool Change
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=x gauge length
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Gauge Length
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Gauge Length
:ATTRLONG=ENTER X Gauge Length
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=x preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Rear Main
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Rear Main
:ATTRLONG=ENTER X Preset Rear Main
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=z preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Rear Main
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Rear Main
:ATTRLONG=ENTER Z Preset Rear Main
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=u preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Front Main
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Front Main
:ATTRLONG=ENTER X Preset Front Main
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=w preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Front Main
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Front Main
:ATTRLONG=ENTER Z Preset Front Main
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=sub x preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Rear Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Rear Sub
:ATTRLONG=ENTER X Preset Rear Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=sub z preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Rear Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Rear Sub
:ATTRLONG=ENTER Z Preset Rear Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=sub u preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Front Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Front Sub
:ATTRLONG=ENTER X Preset Front Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=sub w preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Front Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Front Sub
:ATTRLONG=ENTER Z Preset Front Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=rear2 x preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Rear2
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Rear2
:ATTRLONG=ENTER X Preset Rear2
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=rear2 z preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Rear2
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Rear2
:ATTRLONG=ENTER Z Preset Rear2
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=front2 u preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Front2
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Front2
:ATTRLONG=ENTER X Preset Front2
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=front2 w preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Front2
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Front2
:ATTRLONG=ENTER Z Preset Front2
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=rear2 sub x preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Rear2 Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Rear2 Sub
:ATTRLONG=ENTER X Preset Rear2 Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=rear2 sub z preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Rear2 Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Rear2 Sub
:ATTRLONG=ENTER Z Preset Rear2 Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=front2 sub u preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Preset Front2 Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=X Preset Front2 Sub
:ATTRLONG=ENTER X Preset Front2 Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=front2 sub w preset
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Preset Front2 Sub
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Preset Front2 Sub
:ATTRLONG=ENTER Z Preset Front2 Sub
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=-5
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=z tool change
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Tool Change
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Tool Change
:ATTRLONG=ENTER Z Tool Change
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=z gauge length
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Gauge Length
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Z Gauge Length
:ATTRLONG=ENTER Z Gauge Length
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=return relief
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Return Relief
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Return Relief
:ATTRLONG=ENTER Return Relief
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=.05
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar z depth
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller Z Depth
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Bar Puller Z Depth
:ATTRLONG=ENTER Bar Puller Z Depth
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar x depth
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller X Feed
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Bar Puller X Feed
:ATTRLONG=ENTER Bar Puller X Feed
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar z pullout
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller Z Pullout
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Bar Puller Z Pullout
:ATTRLONG=ENTER Bar Puller Z Pullout
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar z rapid
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller Z Rapid
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Bar Puller Z Rapid
:ATTRLONG=ENTER Bar Puller Z Rapid
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar x rapid
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller X Rapid
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Bar Puller X Rapid
:ATTRLONG=ENTER Bar Puller X Rapid
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar feed
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller Feedrate
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Bar Puller Feedrate
:ATTRLONG=ENTER Bar Puller Feedrate
:ATTRHIGH=999.9999
:ATTRLOW=-999.9999
:ATTRDEFAULT=10
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar dwell
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Bar Puller Dwell
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Bar Puller Dwell
:ATTRLONG=ENTER Bar Puller Dwell
:ATTRHIGH=9999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=feedrate
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Feedrate IPM/MPM
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Feedrate
:ATTRLONG=ENTER Feedrate
:ATTRHIGH=.999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=dwell
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Dwell
:ATTRSEL=N
:ATTRINLEN=4
:ATTRSHORT=Dwell
:ATTRLONG=ENTER Dwell
:ATTRHIGH=9999
:ATTRLOW=0
:ATTRDEFAULT=0
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=dist between chucks
:ATTRTYPE=VALUE
:ATTRVTYPE=DECIMAL
:ATTREMARK=Distance Between Chucks
:ATTRSEL=N
:ATTRINLEN=10
:ATTRSHORT=Distance Between Chucks
:ATTRLONG=ENTER Distance Between Chucks
:ATTRHIGH=9999.9999
:ATTRLOW=-9999.9999
:ATTRDEFAULT=20
:ATTRUSED=1
:ATTREND




*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define SETUP Attributes -- SELECTs
*----------------------------------------------------------
:ATTRNAME=init abs inc
:ATTRTYPE=SELECT
:ATTREMARK=G90-G91
:ATTRSEL=N
:ATTRTITLE=Absolute Incremental
:ATTRSELSTR=Absolute
:ATTRSELSTR=Incremental
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=bar type
:ATTRTYPE=SELECT
:ATTREMARK=Bar Puller Type
:ATTRSEL=N
:ATTRTITLE=Bar Puller Type
:ATTRSELSTR=Bar Puller
:ATTRSELSTR=Bar Feeder
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=tail stock
:ATTRTYPE=SELECT
:ATTREMARK=In or Out
:ATTRSEL=N
:ATTRTITLE=Tail Stock In or Out
:ATTRSELSTR=In
:ATTRSELSTR=Out
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=parts catcher
:ATTRTYPE=SELECT
:ATTREMARK=Parts Catcher
:ATTRSEL=N
:ATTRTITLE=Using Parts Catcher
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=machine path type
:ATTRTYPE=SELECT
:ATTREMARK=Lathe Machine Path type
:ATTRSEL=N
:ATTRTITLE=Machine Path type
:ATTRSELSTR=Offset Path
:ATTRSELSTR=Part Boundary
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=i machine compensation
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=N
:ATTRTITLE=Compensation
:ATTRSELSTR=On
:ATTRSELSTR=Off
:ATTRSELSTR=Left
:ATTRSELSTR=Right
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=tape output
:ATTRTYPE=SELECT
:ATTREMARK=Program/Optional Stop
:ATTRSEL=N
:ATTRTITLE=Program/Optional Stop
:ATTRSELSTR=Program Stop
:ATTRSELSTR=Optional Stop
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=coolant
:ATTRTYPE=SELECT
:ATTREMARK=Coolant M08, M09
:ATTRSEL=N
:ATTRTITLE=Coolant
:ATTRSELSTR=On
:ATTRSELSTR=Off
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=tapping cycle
:ATTRTYPE=SELECT
:ATTREMARK=Using Tapping cycle
:ATTRSEL=N
:ATTRTITLE=Using Tapping cycle
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=chuck pressure
:ATTRTYPE=SELECT
:ATTREMARK=Chuck Pressure
:ATTRSEL=N
:ATTRTITLE=Chuck Pressure
:ATTRSELSTR=No
:ATTRSELSTR=Yes
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=b delete
:ATTRTYPE=SELECT
:ATTREMARK=Block Delete
:ATTRSEL=Y
:ATTRTITLE=Block Delete
:ATTRSELSTR=On
:ATTRSELSTR=Off
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=top or bottom turret
:ATTRTYPE=SELECT
:ATTREMARK=Top or Bottom Turret
:ATTRSEL=N
:ATTRTITLE=Top or Bottom Turret
:ATTRSELSTR=Top
:ATTRSELSTR=Bottom
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=spindle code
:ATTRTYPE=SELECT
:ATTREMARK=Spindle Direction
:ATTRSEL=N
:ATTRTITLE=Spindle Direction
:ATTRSELSTR=CW
:ATTRSELSTR=CCW
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=machine compensation
:ATTRTYPE=SELECT
:ATTREMARK=On or Off
:ATTRSEL=Y
:ATTRTITLE=Compensation
:ATTRSELSTR=On
:ATTRSELSTR=Off
:ATTRSELSTR=Left
:ATTRSELSTR=Right
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=abs inc
:ATTRTYPE=SELECT
:ATTREMARK=G90-G91
:ATTRSEL=N
:ATTRTITLE=Absolute Incremental
:ATTRSELSTR=Absolute
:ATTRSELSTR=Incremental
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=tool tip center
:ATTRTYPE=SELECT
:ATTREMARK=
:ATTRSEL=N
:ATTRTITLE=Program Point
:ATTRSELSTR=Tool Nose Center
:ATTRSELSTR=Tool Nose Tip
:ATTRDEFAULT=2
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define SETUP Attributes -- CHARACTERs
*----------------------------------------------------------
:ATTRNAME=material
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Material
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Material
:ATTRLONG=ENTER Material Type
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=program id
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Program Number
:ATTRSEL=N
:ATTRINLEN=8
:ATTRSHORT=Program Name
:ATTRLONG=ENTER Program Name
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=part number
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Part Number
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Part Number
:ATTRLONG=ENTER Part Number
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=job name
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Part Name
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Part Name
:ATTRLONG=ENTER Part Name
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=company name
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Customer Name
:ATTRSEL=N
:ATTRINLEN=60
:ATTRSHORT=Customer Name
:ATTRLONG=ENTER Customer Name
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=programmer
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Programmer
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Programmer
:ATTRLONG=ENTER Programmer
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=operation description
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Operation Number
:ATTRSEL=N
:ATTRINLEN=60
:ATTRSHORT=Operation Number
:ATTRLONG=ENTER Operation Number
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=date
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Date
:ATTRSEL=N
:ATTRINLEN=25
:ATTRSHORT=Date
:ATTRLONG=ENTER Date
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=revision
:ATTRTYPE=VALUE
:ATTRVTYPE=CHARACTER
:ATTREMARK=Revision
:ATTRSEL=N
:ATTRINLEN=100
:ATTRSHORT=Revision
:ATTRLONG=ENTER Revision
:ATTRHIGH=~
:ATTRLOW=
:ATTRDEFAULT=1
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define ATTACHABLE Attributes
*----------------------------------------------------------
:ATTRNAME=program stop
:ATTRTYPE=DISPLAY
:ATTREMARK=Program stop M00
:ATTRSEL=Y
:ATTRTEXT=
:ATTRFUNC=program_stop
:CODETYPE=HARDCODE
:CODE=|M00
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=optional stop
:ATTRTYPE=DISPLAY
:ATTREMARK=Optional stop M01
:ATTRSEL=Y
:ATTRTEXT=
:ATTRFUNC=optional_stop
:CODETYPE=HARDCODE
:CODE=|M01
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define G + M code Tables
*----------------------------------------------------------
:ATTRNAME=GC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=300
:ATTREMARK=G Codes
:ATTREND
*
*-----------------------------------
:ATTRNAME=GG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=300
:ATTREMARK=G Registers
:ATTREND
*
*-----------------------------------
:ATTRNAME=GM
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=300
:ATTREMARK=G Modal
:ATTREND
*
*-----------------------------------
:ATTRNAME=G GROUP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=20
:ATTREMARK=G GROUP
:ATTREND
*
*-----------------------------------
:ATTRNAME=MC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=45
:ATTREMARK=M Codes
:ATTREND
*
*-----------------------------------
:ATTRNAME=MG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=45
:ATTREMARK=M Registers
:ATTREND
*
*-----------------------------------
:ATTRNAME=MM
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=45
:ATTREMARK=M Modal
:ATTREND
*
*-----------------------------------
:ATTRNAME=M GROUP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=20
:ATTREMARK=M GROUP
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define "MACH" (Machine) Registers -- DECIMALs
*----------------------------------------------------------
:ATTRNAME=MACH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=28
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=B POS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=B Position
:ATTREND
*
*-----------------------------------
:ATTRNAME=X POS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Position
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z POS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Position
:ATTREND
*
*------------------------------------
:ATTRNAME=BUCKET
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=ROUNDING POINT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE REGISTER
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE DVAL
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z SAVE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=TOTAL Z RAPID
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Rapid Distance
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|TOTAL|Z|RAPID=
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TOTAL Z FEED
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Feed Distance
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|TOTAL|Z|FEED=
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=X INC
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=X START
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=X END
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z INC
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z START
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z END
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=CURRENT POST CYCLE TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=ZGAUGE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z GAUGE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=XGAUGE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=X GAUGE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=DUMMY
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=R PLANE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREV
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTRVCNT=28
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=MAX SEQUENCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=ARC ROUNDING POINT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define "MACH" (Machine) Registers -- INTEGERs
*----------------------------------------------------------
:ATTRNAME=ABSINC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Absolute or Incremental
:ATTREND
*
*-----------------------------------
:ATTRNAME=COOLANT TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Coolant Type
:ATTREND
*
*-----------------------------------
:ATTRNAME=ARC DIR
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Arc Direction
:ATTREND
*
*-----------------------------------
:ATTRNAME=ENGMET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=English or Metric
:ATTREND
*
*-----------------------------------
:ATTRNAME=SPINDLE DIR
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle Direction
:ATTREND
*
*-----------------------------------
:ATTRNAME=SPINDLE COOLANT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Spindle and Coolant
:ATTREND
*
*-----------------------------------
:ATTRNAME=AIC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=RAD OR DIAM
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SX
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SI
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=TOOL ARRAY
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVCNT=100
:ATTREMARK=Tool Array
:ATTREND
*
*-----------------------------------
:ATTRNAME=TOOL COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Count
:ATTREND
*
*-----------------------------------
:ATTRNAME=ARRAY COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Array Count
:ATTREND
*
*-----------------------------------
:ATTRNAME=NEXT TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREVIOUS OPER TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=LOOP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=INDEX
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
*
*-----------------------------------
:ATTRNAME=SAVE SEQ
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE SEQ 2ND
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=START SEQ
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=FIRST XZ MOVE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=FIRST ARC MOVE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=FIRST XZ RAPID
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=FIRST XZ FEED
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=FIRST TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=LAST TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=CALC CHANGE TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=OPR COUNT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=LAST TURRET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE TIP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SETUP CONFIG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE SPEED
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE SPEED TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=DOING MACROS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=P TURRET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=NO SMALL ARC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=ID WORK
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SUBMCS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:ATTREND
*
*-----------------------------------
:ATTRNAME=NOT USING MULTIPLE FILES
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SEQ_NUMBERS_PER_TURRET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=WORK_COORDINATE_SUPPORT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=WORK_AND_SUB_SUPPORT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=COMP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Machine Compensation
:ATTREND
*
*-----------------------------------
:ATTRNAME=FEED TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Feed FPR or FPM
:ATTREND
*
*-----------------------------------
:ATTRNAME=CURRENT MODE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=1-Abs or 2-Inc
:ATTREND
*
*-----------------------------------
:ATTRNAME=SPEED TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Feed SFPM or RPM
:ATTREND
*
*-----------------------------------
:ATTRNAME=CALC S CODE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=S Code
:ATTREND
*
*-----------------------------------
:ATTRNAME=T ORIENT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=COMP FLAG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=COORD TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=COMP OFFSET
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=S RPM CAP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=FORCE RPM MAX EACH TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=S RPM CAP MODAL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SAVE RPM CAP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=OUTPUT RPM CAP
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=TOTAL NUMBER OF TURRETS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=CREATE SMALLER LATHE ARCS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=NEVER ZERO OFFSET RADIUS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTRVTYPE=
:ATTREND
*
*-----------------------------------
:ATTRNAME=SZ
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:ATTREND
*
*-----------------------------------
* this was asterisked out because same name in MASTER.ATR causes compiler error
*-----------------------------------
*:ATTRNAME=CHK PRESSURE
*:ATTRTYPE=POST
*:ATTRVTYPE=INTEGER
*:ATTREMARK=chuck pressure
*:CODETYPE=SELECT
*:SELECT=2
*:CODE=|M29
*:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define OUTPUT CODE Attributes  (Misc...)
*----------------------------------------------------------
:ATTRNAME=N
:ATTRTYPE=POST
:ATTREMARK=Sequence number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_REG_N(SEQ,MAX_SEQUENCE)
:WORD_ADDRESS_BEF=N
:VAR=SEQ
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=P SEQ
:ATTRTYPE=POST
:ATTREMARK=Sequence number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_REG_P_SEQ(P_SEQ)
:WORD_ADDRESS_BEF=|P
:VAR=P SEQ
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=Q SEQ
:ATTRTYPE=POST
:ATTREMARK=Sequence number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_REG_Q_SEQ(Q_SEQ)
:WORD_ADDRESS_BEF=|Q
:VAR=Q SEQ
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=S
:ATTRTYPE=POST
:ATTRVTYPE=FEET
:ATTREMARK=Spindle RPM
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(S,MACH,OPR_SPEED,REG_S)
:WORD_ADDRESS_BEF=|S
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=T
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_INT_REGISTER(T,MACH,TOOL,REG_T2)
:WORD_ADDRESS_BEF=|T
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=COMP NUMBER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Comp Number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_COMP_NUMBER(COMP_NUMBER,TOOL,COMP_OFFSET)
:WORD_ADDRESS_BEF=|D
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=FC NUMBER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Fixture Offset Number
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_INT_REGISTER(FC_NUMBER,MACH,fixture_offset,REG_FC)
:WORD_ADDRESS_BEF=|FC
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=TOOL SYNC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Sync
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_TOOL_SYNC(TOOL_SYNC,tool_sync_number)
:WORD_ADDRESS_BEF=|M
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=START SYNC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Start Sync
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_START_SYNC(START_SYNC,starting_sync_number)
:WORD_ADDRESS_BEF=|M
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=END SYNC
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=End Sync
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_END_SYNC(END_SYNC,end_sync_number)
:WORD_ADDRESS_BEF=|M
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=PD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Dwell on drilling
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DWELL(PD,MACH,dwell)
:WORD_ADDRESS_BEF=|P
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=B
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=B End
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_ENDPOINT(B,B_POS,GC,GG,G_GROUP,MACH,PREV,REG_B,1,1)
:WORD_ADDRESS_BEF=|B
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define OUTPUT CODE Attributes (G Codes...)
*----------------------------------------------------------
:ATTRNAME=G
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_G_GROUP(G,GC,GG,GM,MACH,G_GROUP,ATTRIVALUE,INDEX)
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|G
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define OUTPUT CODE Attributes (M Codes...)
*----------------------------------------------------------
:ATTRNAME=M
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=M Codes
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_M_GROUP(M,MC,MG,MM,MACH,M_GROUP,ATTRIVALUE,INDEX)
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|M
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define OUTPUT CODE Attributes (Movement...)
*----------------------------------------------------------
:ATTRNAME=X
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_ENDPOINT(X,X_POS,GC,GG,G_GROUP,MACH,PREV,REG_X,RAD_OR_DIAM,SX)
:VAR=CURRENT_MODE
:SELECT=1
:WORD_ADDRESS_BEF=|X
:VARB=X
:MODAL=YES
:SELECT=2
:WORD_ADDRESS_BEF=|U
:VARB=X
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=XAXIS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X End
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_ENDPOINT(XAXIS,X_POS,GC,GG,G_GROUP,MACH,PREV,REG_X,RAD_OR_DIAM,SX)
:VAR=CURRENT_MODE
:SELECT=1
:WORD_ADDRESS_BEF=
:VARB=XAXIS
:MODAL=YES
:SELECT=2
:WORD_ADDRESS_BEF=
:VARB=XAXIS
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z End
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_ENDPOINT(Z,Z_POS,GC,GG,G_GROUP,MACH,PREV,REG_Z,1,1)
:VAR=CURRENT_MODE
:SELECT=1
:WORD_ADDRESS_BEF=|Z
:VARB=Z
:MODAL=YES
:SELECT=2
:WORD_ADDRESS_BEF=|W
:VARB=Z
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=ZAXIS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z End
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_ENDPOINT(ZAXIS,Z_POS,GC,GG,G_GROUP,MACH,PREV,REG_Z,1,1)
:VAR=CURRENT_MODE
:SELECT=1
:WORD_ADDRESS_BEF=
:VARB=ZAXIS
:MODAL=YES
:SELECT=2
:WORD_ADDRESS_BEF=
:VARB=ZAXIS
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=X FINISH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Finish Allowance
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(X_FINISH,MACH,X_FINISH,REG_U)
:WORD_ADDRESS_BEF=|U
:MODAL=FALSE
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z FINISH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Finish Allowance
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(Z_FINISH,MACH,OPR_Z_PART_CLEARANCE,REG_W)
:WORD_ADDRESS_BEF=|W
:MODAL=FALSE
:ATTREND
*
*-----------------------------------
:ATTRNAME=I
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(I,ABS_J_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_X,SX,AIC)
:WORD_ADDRESS_BEF=|I
:ATTREND
*
*-----------------------------------
:ATTRNAME=K
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=J Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(K,ABS_I_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_Z,SZ,AIC)
:WORD_ADDRESS_BEF=|K
:ATTREND
*
*-----------------------------------
:ATTRNAME=FI
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=X Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(FI,ABS_L_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_X,SX,AIC)
:WORD_ADDRESS_BEF=|I
:ATTREND
*
*-----------------------------------
:ATTRNAME=FK
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=J Center
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_CENTER(FK,ABS_K_CENTER,GC,GG,G_GROUP,MACH,PREV,REG_Z,1,AIC)
:WORD_ADDRESS_BEF=|K
:ATTREND
*
*-----------------------------------
:ATTRNAME=R
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=R Radius
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_RADIUS(R,MACH,REG_R)
:WORD_ADDRESS_BEF=|R
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=F
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Feedrate IPM/MPM
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_REG_F(MACH,REG_F,F)
:VAR=OPR_FEED_TYPE
:SELECT=1
:WORD_ADDRESS_BEF=|F
:VARB=F
:LEFT_PLACES=2
:RIGHT_PLACES=4
:CANNOT_BE_SIGNED
:MODAL=YES
:SELECT=2
:WORD_ADDRESS_BEF=|F
:VARB=F
:LEFT_PLACES=3
:RIGHT_PLACES=2
:CANNOT_BE_SIGNED
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=R28
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Feedrate IPM/MPM
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_REG_F(MACH,REG_F,F)
:VAR=OPR_FEED_TYPE
:SELECT=1
:WORD_ADDRESS_BEF=|R28=
:VARB=F
:LEFT_PLACES=2
:RIGHT_PLACES=4
:CANNOT_BE_SIGNED
:SELECT=2
:WORD_ADDRESS_BEF=|R28=
:VARB=F
:LEFT_PLACES=3
:RIGHT_PLACES=2
:CANNOT_BE_SIGNED
:ATTREND
*
*-----------------------------------
:ATTRNAME=CUT AMOUNT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=G71, Cut Depth
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(CUT_AMOUNT,MACH,OPR_CUT_AMOUNT,REG_D)
:WORD_ADDRESS_BEF=|D
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MUST_BE_TRAILING
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:MODAL=FALSE
:ATTREND
*
*-----------------------------------
:ATTRNAME=TAPER
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=G92, thread Taper
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_TAPER(TAPER)
:WORD_ADDRESS_BEF=|I
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=THREAD HEIGHT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=G76, K Thread Height
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_THREAD_HEIGHT(THREAD_HEIGHT)
:WORD_ADDRESS_BEF=|K
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=THREAD FIRST CUT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=G76, Thread Cut Depth
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(THREAD_FIRST_CUT,MACH,OPR_THREAD_FIRST_CUT,REG_D)
:WORD_ADDRESS_BEF=|D
:LEFT_PLACES=3
:RIGHT_PLACES=4
:MUST_BE_TRAILING
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:MODAL=FALSE
:ATTREND
*
*-----------------------------------
:ATTRNAME=INFEED ANGLE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=G76, Thread Angle
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_INFEED_ANGLE(INFEED_ANGLE)
:WORD_ADDRESS_BEF=|A
:LEFT_PLACES=3
:RIGHT_PLACES=3
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=SUB PECK
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=G74, Peck Depth
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(SUB_PECK,MACH,OPR_Z_SUB_PECK,REG_K)
:WORD_ADDRESS_BEF=|K
:LEFT_PLACES=3
:RIGHT_PLACES=4
:CANNOT_BE_SIGNED
:MODAL=FALSE
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR Z DEPTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(S_BAR_Z_DEPTH,MACH,bar_z_depth,REG_Z)
:WORD_ADDRESS_BEF=|Z
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR X DEPTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(S_BAR_X_DEPTH,MACH,bar_x_depth,REG_X)
:WORD_ADDRESS_BEF=|X
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR Z PULLOUT
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(S_BAR_Z_PULLOUT,MACH,bar_z_pullout,REG_Z)
:WORD_ADDRESS_BEF=|Z
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR Z RAPID
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(S_BAR_Z_RAPID,MACH,bar_z_rapid,REG_Z)
:WORD_ADDRESS_BEF=|Z
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR X RAPID
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_DEC_REGISTER(S_BAR_X_RAPID,MACH,bar_x_rapid,REG_X)
:WORD_ADDRESS_BEF=|X
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR FEED
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|F
:VAR=bar feed
:LEFT_PLACES=3
:RIGHT_PLACES=2
:CANNOT_BE_SIGNED
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S BAR DWELL
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|P
:VAR=bar dwell
:LEFT_PLACES=1
:RIGHT_PLACES=3
:CANNOT_BE_DECIMAL
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PARTS IN
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_PARTS_CATCHER_IN(PARTS_IN,parts_catcher)
:WORD_ADDRESS_BEF=|M
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=PARTS OUT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=
:CODETYPE=FORMAT
:ATTRCFUNC=CALC_PARTS_CATCHER_OUT(PARTS_OUT,parts_catcher)
:WORD_ADDRESS_BEF=|M
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=W COORD
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_COORD(W_COORD,SUBMCS)
:VAR=W_COORD
:SELECT=54
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G54.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT>54
:WORD_ADDRESS_BEF=|G
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=1
:WORD_ADDRESS_BEF=|G
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=W COORD ALL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=G Codes
:CODETYPE=SELECT_FORMAT
:ATTRCFUNC=CALC_COORD_ALL(W_COORD_ALL,SUBMCS)
:VAR=W_COORD_ALL
:SELECT=54
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G54.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=55
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G55.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=56
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G56.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=57
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G57.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=58
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G58.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:SELECT=59
:VARB=SUBMCS
:WORD_ADDRESS_BEF=|G59.1|P
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define SETUP Sheet and Estimated Time Attributes
*----------------------------------------------------------
:ATTRNAME=CALC TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total Time
:ATTREND
*
*-----------------------------------
:ATTRNAME=CW TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total Time
:ATTREND
*
*-----------------------------------
:ATTRNAME=CALC DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:ATTREND
*
*-----------------------------------
:ATTRNAME=XY TIME
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Total X Y Time
:ATTREND
*
*-----------------------------------
:ATTRNAME=Z D DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Z Down Distance
:ATTREND
*
*-----------------------------------
:ATTRNAME=CALC FEEDRATE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Calculated Feedrate
:ATTREND
*
*-----------------------------------
:ATTRNAME=CALC RPM
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Calculated RPM
:ATTREND
*
*-----------------------------------
:ATTRNAME=AVERAGE DISTANCE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Average Distance
:ATTREND
*
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define POST Attributes -- Notes for NC code
*----------------------------------------------------------
:ATTRNAME=TOOL COMMENT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=TOOL COMMENT
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=OPR COMMENT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=OPR COMMENT
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=SPINDLE COMMENT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|
:VAR=SPINDLE_COMMENT
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=SPINDLE COMMAND
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=
:VAR=SPINDLE_COMMAND
:WORD_ADDRESS_AFT=
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Tool IDs added for CW2013 -- Begin
*----------------------------------------------------------
:ATTRNAME=SUB STATION ID
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=SUB STATION ID
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=N SUB STATION ID
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=N SUB STATION ID
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=NC SUB STATION ID
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=NC SUB STATION ID
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*----------------------------------------------------------
* Tool IDs added for CW2013 -- End
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
*
*
*
*-----------------------------------
:ATTRNAME=CAMWORKS MATERIAL
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|CAMWORKS|MATERIAL=(
:VAR=CAMWORKS MATERIAL
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=LATHE TOOL NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=LATHE TOOL NAME
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=LATHE HOLDER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(
:VAR=LATHE HOLDER NAME
:WORD_ADDRESS_AFT=)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:MODAL=NO
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TIME HOURS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Hours
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|ESTIMATED|MACHINE|TIME=
:WORD_ADDRESS_AFT=|HRS.||
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=TIME MINUTES
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Minutes
:CODETYPE=FORMAT
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=TIME SECONDS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Time in Seconds
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|MIN.||
:WORD_ADDRESS_AFT=|SEC.|)
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=CW TIME HOURS
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Hours
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|ESTIMATED|MACHINE|TIME=
:WORD_ADDRESS_AFT=|HRS.||
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=CW TIME MINUTES
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Time in Minutes
:CODETYPE=FORMAT
:LEFT_PLACES=3
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=CW TIME SECONDS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=Time in Seconds
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|MIN.||
:WORD_ADDRESS_AFT=|SEC.|)
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTREND
*
*-----------------------------------
:ATTRNAME=PART NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|PART|NAME=
:VAR=PART NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S PROGRAM NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|PROGRAM|NUMBER=
:VAR=program number
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=4
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:MUST_BE_LEADING
:MUST_BE_TRAILING
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S MACHINE NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|MACHINE=
:VAR=MACHINE NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S CONTROLLER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|CONTROLLER=
:VAR=CONTROLLER TYPE
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:ATTRSPACES=YES
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S MATERIAL
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|MATERIAL=
:VAR=material
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S THICKNESS
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|THICKNESS=
:VAR=thickness
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=4
:RIGHT_PLACES=3
:MUST_BE_DECIMAL
:CANNOT_BE_LEADING
:CANNOT_BE_TRAILING
:CANNOT_BE_SIGNED
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PROGRAM NAME
:ATTRTYPE=POST
:ATTRVTYPE=CHARACTER
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=
:VAR=program id
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S PART NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|PART|NUMBER=
:VAR=part number
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S PART NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|PART|NAME=
:VAR=job name
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S CUSTOMER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|CUSTOMER|NAME=
:VAR=company name
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S PROGRAMMER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|PROGRAMMER=
:VAR=programmer
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S OPERATION NUMBER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|OPERATION|NUMBER=
:VAR=operation description
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=S DATE
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|DATE=
:VAR=date
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
*
*-----------------------------------
:ATTRNAME=S REVISION
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=(|REVISION=
:VAR=revision
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define "Predator Header" POST Attributes
*----------------------------------------------------------
:ATTRNAME=PREDATOR HEADER
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Output Predator Header
:ATTREND
*
*-----------------------------------
:ATTRNAME=START PREDATOR HEADER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=BEGIN|PREDATOR|NC|HEADER
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=END PREDATOR HEADER
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=END|PREDATOR|NC|HEADER
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=LTOOL
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=(LTOOL
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=RIGHT PARAN
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=)
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR LATHE TOOL
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|T
:VAR=TOOL
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR TOOL HOME
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|M
:VAR=TOOL
:LEFT_PLACES=2
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR TOOL TYPE
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|S
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR TURRET ORIENT
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Tool Number
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|N
:LEFT_PLACES=1
:RIGHT_PLACES=0
:CANNOT_BE_DECIMAL
:CANNOT_BE_SIGNED
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR TOOL DIAMETER
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|D
:VAR=TOOL_DIAMETER
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR SHANK DIAMETER
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|SD
:VAR=TOOL_DIAMETER
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR FLUTE LENGTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|H
:VAR=TOOL_LENGTH
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR SHANK LENGTH
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|SH
*:VAR=TOOL_LENGTH
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR CORNER RADIUS
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|C
:VAR=TOOL_CORNER_RADIUS
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:MODAL=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=PREDATOR TOOL ANGLE
:ATTRTYPE=POST
:ATTRVTYPE=DECIMAL
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|A
:VAR=TOOL_ANGLE
:MUST_BE_DECIMAL
:CANNOT_BE_SIGNED
:ATTRSPACES=YES
:MODAL=YES
:UNITFLAG=NON_CONVERT
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define POST Attributes -- Notes for NC code
*----------------------------------------------------------
:ATTRNAME=TLP PART NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_PART_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP PART DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_PART_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP SETUP NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_SETUP_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP SETUP DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_SETUP_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP FEAT NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP FEAT DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP OPER NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_OPER_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP OPER DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_OPER_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP FEAT SETUP NAME
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_SETUP_NAME
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=TLP FEAT SETUP DESC
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=|(|
:VAR=TLP_FEAT_SETUP_DESC
:WORD_ADDRESS_AFT=|)
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*-----------------------------------
:ATTRNAME=CTL PATH
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=FORMAT
:WORD_ADDRESS_BEF=
:VAR=CTL_PATH
:LEFT_PLACES=0
:RIGHT_PLACES=0
:UNITFLAG=NON_CONVERT
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define HARDCODE Attributes
*----------------------------------------------------------
:ATTRNAME=LEFT PAR
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=(
:ATTREND
*
*-----------------------------------
:ATTRNAME=RIGHT PAR
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=)
:ATTREND
*
*-----------------------------------
:ATTRNAME=COLON
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=:
:ATTREND
*
*-----------------------------------
:ATTRNAME=POUND
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=##
:ATTREND
*
*-----------------------------------
:ATTRNAME=DECIMAL POINT
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.
:ATTREND
*
*-----------------------------------
:ATTRNAME=POINT ONE
:ATTRTYPE=POST
:ATTREMARK=
:CODETYPE=HARDCODE
:CODE=.1
:ATTREND
*
*
*----------------------------------------------------------
*----------------------------------------------------------
*----------------------------------------------------------
* Define DEBUG Attributes
*----------------------------------------------------------
:ATTRNAME=DEBUG
:ATTRTYPE=POST
:ATTRVTYPE=INTEGER
:ATTREMARK=Debug
:CODETYPE=SELECT
:SELECT=1
:CODE=|||Line|Move
:SELECT=2
:CODE=|||Arc|Move
:SELECT=3
:CODE=|||Rapid|Move
:SELECT=4
:CODE=|||Init|Tool|Change
:SELECT=5
:CODE=|||Sub|Tool|Change
:SELECT=6
:CODE=|||Every|Move
:SELECT=7
:CODE=|||Beg|Macro
:SELECT=8
:CODE=|||End|Macro
:SELECT=9
:CODE=|||Macro|Call
:SELECT=10
:CODE=|||Multi|Call
:SELECT=11
:CODE=|||Program|End
:SELECT=12
:CODE=|||System|Drill
:SELECT=13
:CODE=|||System|Thread
:SELECT=14
:CODE=|||Machine|Turn|Cycle
:SELECT=15
:CODE=|||Machine|Drill
:SELECT=16
:CODE=|||Machine|Thread
:SELECT=17
:CODE=|||Start|of|Operation
:SELECT=18
:CODE=|||End|of|Operation
:SELECT=19
:CODE=|||Multiple|Thread
:SELECT=20
:CODE=|||Bar|Puller
:SELECT=21
:CODE=|||Tail|Stock
:SELECT=22
:CODE=|||End|Boundary
:SELECT=23
:CODE=|||OD|End|Boundary
:SELECT=24
:CODE=|||ID|End|Boundary
:SELECT=25
:CODE=|||Rapid|End|Boundary
:SELECT=26
:CODE=|||Rapid|Pullout|X
:SELECT=27
:CODE=|||Rapid|Pullout|Z
:SELECT=28
:CODE=|||Position|To|Start
:SELECT=29
:CODE=|||Canned|Position|Start
:SELECT=30
:CODE=|||Canned|Tapping|Cycle
:SELECT=31
:CODE=|||System|Tapping|Cycle
:SELECT=32
:CODE=|||CW|End|Boundary|Retract
:SELECT=33
:CODE=|||Calc|Set|Turret|Channel
:SELECT=34
:CODE=|||Calc|Add|Rear|Sync|Code
:SELECT=35
:CODE=|||Calc|Add|Front|Sync|Code
:ATTRSPACES=YES
:ATTRUSED=1
:ATTREND
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
*******                       Begin Calc Sections                        *******
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Word Coordinate G54-G59
*   Word Coordinate G54.1 P1-P??
*--------------------------------------------------------------
:SECTION=CALC_COORD(GVAL,PVAL)
*
*** This supports no work coordinates or G54 - G59 only ***
:C: IF MCS_TYPE=0 THEN GVAL=0 PVAL=0 RETURN ENDIF
:C: IF WORK_COORDINATE_SUPPORT=NO AND WORK_AND_SUB_SUPPORT=NO THEN GVAL=0 PVAL=0 RETURN ENDIF
:C: IF WORK_COORDINATE_SUPPORT=YES THEN GVAL=1 PVAL=work_coord RETURN ENDIF
*
*
*** This supports G54.1 P1-?? and G55 - G59 ***
*:C: IF DEFINING_MACRO=YES THEN GVAL=0 RETURN ENDIF
:C: GVAL=work_coord
:C: IF ATTROVERRIDE=YES THEN
:C:   GVAL=ATTRIVALUE
:C:   IF GVAL<>54 THEN
:C:     PVAL=GVAL
:C:   ELSE
:C:     PVAL=sub_work_coord
:C:   ENDIF
:C:   RETURN
:C: ENDIF
:C: IF work_coord<>54 THEN
:C:   PVAL=work_coord
:C: ELSE
:C:   PVAL=sub_work_coord
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Word Coordinate G54-G59
*   Word Coordinate G54.1 P1-P48
*   Word Coordinate G55.1 P1-P48
*   Word Coordinate G56.1 P1-P48
*   Word Coordinate G57.1 P1-P48
*   Word Coordinate G58.1 P1-P48
*   Word Coordinate G59.1 P1-P48
*--------------------------------------------------------------
:SECTION=CALC_COORD_ALL(GVAL,PVAL)
:C: GVAL=work_coord
:C: IF ATTROVERRIDE=YES THEN
:C:   GVAL=ATTRIVALUE
:C: ENDIF
:C: PVAL=sub_work_coord
:C: IF PVAL=0 THEN PVAL=1 ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_PARTS_CATCHER_IN(PVAL,CVAL)
:C: SETON()
:C: PVAL=MC(M_PARTS_IN)
:C: IF CVAL=1 THEN SETOFF() ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_PARTS_CATCHER_OUT(PVAL,CVAL)
:C: SETON()
:C: PVAL=MC(M_PARTS_OUT)
:C: IF CVAL=1 THEN SETOFF() ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*  Define Machine "G" Register Calculations
*----------------------------------------------------------
:SECTION=CALC_G_GROUP(GVAL,GC,GG,GM,MACH,G_GROUP,OVERVAL,INDEX)
*
*   This routine processes all G codes being output to the tape.
*   This routine will supply a default G code value if a value is not
*   passed. The MACH(REG_G) as well as the G_GROUP resgister are updated.
*   The value being output is returned in the 1st field GVAL
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : GVAL       - Varaible to accept Return value
*            : GC         - Array of G Codes
*            : GG         - Array of G Groups
*            : GM         - Array of G Modal flags
*            : MACH       - Array of Machine Registers A-Z
*            : G_GROUP    - Array of Machine G Groups  0-20
*            : OVERVAL    - Override value
*            : INDEX      - Integer Variable used as to Index G code tables
*
*   Returns  : GVAL       - Stores the G code being output into GVAL
*            : G_GROUP    - Stores the G code being output into G_GROUP
*            : MACH       - Stores the G code being output into MACH(REG_G)
*            : METRIC_OUT - May Modify the system flag METRIC_OUT
*                           METRIC_OUT=1 is ENGLISH
*                           METRIC_OUT=2 is METRIC
*            : INDEX      - Stores the Table location of G Code into INDEX
*            : SETON()    - May Set ON the Parameter making the call
*            : SETOFF(    - May Set OFF the Parameter making the call
*
*   External : none
*
*** Determine the value to be output ***
:C: IF ATTROVERRIDE=YES THEN
:C:   GVAL=OVERVAL
:C: ELSE
:C:   CALL(CALC_G_DEFAULT(GVAL,GC))
:C: ENDIF
*
*** Lookup G code in the G code table - (a -1 in INDEX means NOT found!) ***
:C: LOOKUP(GC,GVAL,INDEX)
:C: IF INDEX=-1 THEN
:C:   SETON()
:C:   RETURN
:C: ENDIF
*
*** Seton the Parameter then determine if parameter does NOT need to be output ***
:C: SETON()
:C: IF GM(INDEX)=YES AND G_GROUP(GG(INDEX))=GVAL THEN
:C:   SETOFF()
:C: ENDIF
*
*** Update the G_GROUP registers if the G code is MODAL ***
:C: IF GM(INDEX)=YES THEN
:C:   G_GROUP(GG(INDEX))=GVAL
:C: ENDIF
*
*** Update the Machine register REG_G ***
:C: MACH(REG_G)=GVAL
*
*** Set the system English/Metric flag if G code affects English/Metric ***
:C: IF INDEX=G_ENGLISH THEN METRIC_OUT=1 ENDIF
:C: IF INDEX=G_METRIC THEN METRIC_OUT=2 ENDIF
:C: IF INDEX=G_ABS THEN CURRENT_MODE=1 ENDIF
:C: IF INDEX=G_INC THEN CURRENT_MODE=2 ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_G_DEFAULT(GVAL,GC)
*
*   This routine calculates a G code value based on
*   the system variable MOVE_TYPE
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : GVAL       - Variable to accept Return value
*            : GC         - Array of G Codes
*
*   Returns  : GVAL       - Stores the calculated value into GVAL
*
*   External : none
*
*
*** Calculate Default ***
:C: IF TURRET=FRONT THEN
:C:   IF S_MOVE_TYPE=RAPID THEN GVAL=GC(G_RAPID) RETURN ENDIF
:C:   IF S_MOVE_TYPE=LINE THEN GVAL=GC(G_LINE) RETURN ENDIF
:C:   IF S_MOVE_TYPE=CW_ARC THEN GVAL=GC(G_CCW_ARC) RETURN ENDIF
:C:   IF S_MOVE_TYPE=CCW_ARC THEN GVAL=GC(G_CW_ARC) RETURN ENDIF
:C: ELSE
:C:   IF MOVE_TYPE=RAPID THEN GVAL=GC(G_RAPID) RETURN ENDIF
:C:   IF MOVE_TYPE=LINE THEN GVAL=GC(G_LINE) RETURN ENDIF
:C:   IF MOVE_TYPE=CW_ARC THEN GVAL=GC(G_CW_ARC) RETURN ENDIF
:C:   IF MOVE_TYPE=CCW_ARC THEN GVAL=GC(G_CCW_ARC) RETURN ENDIF
:C: ENDIF
:C: GVAL=GC(G_RAPID)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_M_GROUP(MVAL,MC,MG,MM,MACH,M_GROUP,OVERVAL,INDEX)
*
*   This routine processes all M codes being output to the tape.
*   The MACH(REG_M) as well as the M_GROUP resgister are updated.
*   The value being output is returned in the 1st field MVAL
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : MVAL       - Variable to accept Return value
*            : MC         - Array of M Codes
*            : MG         - Array of M Groups
*            : MM         - Array of M Modal flags
*            : MACH       - Array of Machine Registers A-Z
*            : M_GROUP    - Array of Machine M Groups  0-20
*            : OVERVAL    - Override value
*            : INDEX      - Integer Variable used as to Index M code tables
*
*   Returns  : MVAL       - Stores the M code being output into MVAL
*            : M_GROUP    - Stores the M code being output into M_GROUP
*            : MACH       - Stores the M code being output into MACH(REG_M)
*            : MACH       - Stores the TOOL into MACH(REG_T) if tool change
*            : INDEX      - Stores the Table location of M Code into INDEX
*            : SETON()    - May Set ON the Parameter making the call
*            : SETOFF(    - May Set OFF the Parameter making the call
*
*   External : none
*
:C: IF ATTROVERRIDE=YES THEN
:C:   MVAL=OVERVAL
:C: ELSE
:C:   MVAL=0
:C: ENDIF
*
*** Lookup M code in the M code table - (a -1 in INDEX means NOT found!) ***
:C: LOOKUP(MC,MVAL,INDEX)
:C: IF INDEX=-1 THEN
:C:   SETON()
:C:   RETURN
:C: ENDIF
*
*** Seton the Parameter then determine if parameter does NOT need to be output ***
:C: SETON()
:C: IF MM(INDEX)=YES AND M_GROUP(MG(INDEX))=MVAL THEN
:C:   SETOFF()
:C: ENDIF
:C: IF MM(INDEX)=YES THEN
:C:   M_GROUP(MG(INDEX))=MVAL
:C: ENDIF
*
*** Update the Machine register REG_M ***
:C: MACH(REG_M)=MVAL
*
*** Update the Machine register REG_T ***
:C: IF MVAL=MC(M_TOOL_CHANGE) THEN
:C:   MACH(REG_T)=TOOL
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_INT_REGISTER(IVAL,MACH,DEFAULTVAL,REGISTER)
*
*   This is a general routine which processes an Integer Register.
*
*   Author   : Scott Fulton
*   Company  : TekSoft
*   Created  : Ver 6.00
*
*   Input    : IVAL       - Varaible to accept Return value
*            : MACH       - Array of Machine Registers A-Z
*            : DEFAULTVAL - Default value if not passed by user
*
*   Returns  : IVAL       - Stores the M code being output into MVAL
*            : MACH       - Stores the M code being output into MACH(REG_M)
*
*   External : none
*
:C: IF ATTROVERRIDE=YES THEN
:C:   IVAL=ATTRIVALUE
:C: ELSE
:C:   IVAL=DEFAULTVAL
:C: ENDIF
:C: MACH(REGISTER)=IVAL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Calculate Decimal register
*--------------------------------------------------------------
:SECTION=CALC_DEC_REGISTER(DVAL,MACH,DEFAULTVAL,REGISTER)
*
*  NOTE: Changed this section because of a problem with RPM output. When
*        switching to metric it would divide direct RPM by 3.280839895.
*        11-12-94 MLS.
*
:C: IF ATTROVERRIDE=YES THEN
:C:   DVAL=ATTRDVALUE
:C:   IF REGISTER=19 THEN
:C:     IF METRIC_OUT=2 THEN
:C:       IF OPR_SPEED_TYPE=2 THEN
:C:         IF CAMWORKS_VER<CAM_REV2013_SP1 THEN
:C:           DVAL=(DVAL*3.280839895)
:C:         ENDIF
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   DVAL=DEFAULTVAL
:C:   IF REGISTER=19 THEN
:C:     IF METRIC_OUT=2 THEN
:C:       IF OPR_SPEED_TYPE=2 THEN
:C:         IF CAMWORKS_VER<CAM_REV2013_SP1 THEN
:C:           DVAL=(DVAL*3.280839895)
:C:         ELSE
:C:           DVAL=OPR_RPM
:C:         ENDIF
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
:C: MACH(REGISTER)=DVAL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*  General decimal format routine -- Assign value
*----------------------------------------------------------
:SECTION=CALC_DECIMAL_OUT(DVAL)
:C: IF ATTROVERRIDE=YES THEN
:C:   DVAL=ATTRDVALUE
:C: ELSE
:C:   DVAL=0
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*  General decimal format routine -- Assign value
*----------------------------------------------------------
:SECTION=CALC_INTEGER_OUT(IVAL)
:C: IF ATTROVERRIDE=YES THEN
:C:   IVAL=ATTRIVALUE
:C: ELSE
:C:   IVAL=0
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*  Machine Movement Register Calculations
*----------------------------------------------------------
:SECTION=CALC_ENDPOINT(DVAL,DEFVAL,GC,GG,G_GROUP,MACH,PREV,REG,RAD_OR_DIAM,SX)
:C: IF ATTROVERRIDE=YES THEN
:C:   DVAL=ATTRDVALUE
:C: ELSE
:C:   DVAL=DEFVAL
:C: ENDIF
:C: PREV(REG)=MACH(REG)
*
:C: IF G_GROUP(GG(G_INC))<>GC(G_INC) THEN
:C:   MACH(REG)=(DVAL)
*:C:  DVAL=((DVAL*RAD_OR_DIAM)*SX)
:C:   IF REG=24 THEN
:C:    DVAL=(((DVAL+X_GAUGE)*RAD_OR_DIAM)*SX)
:C:   ENDIF
:C:   IF REG=26 THEN
:C:    DVAL=(((DVAL+Z_GAUGE)*RAD_OR_DIAM)*SX)
:C:   ENDIF
:C:   IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:     IF CAMWORKS_VER>CAM_REV2015_SP2 THEN
:C:       IF REG=2 THEN
:C:         DVAL=(DVAL+OPR_B_AXIS_OFFSET)
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF REG=2 THEN
:C:       DVAL=(DVAL+OPR_B_AXIS_OFFSET+TLP_B_AXIS_OFFSET)
:C:     ENDIF
:C:   ENDIF
:C:   RETURN
:C: ENDIF
*
:C: BUCKET=0
:C: ROUNDOFF((DVAL-MACH(REG)),BUCKET,DVAL,G_RIGHT_PLACES,METRIC_OUT)
:C: SETON()
:C: IF ABS(DVAL*RAD_OR_DIAM)<ROUNDING_POINT AND LEADIN=NO AND LEADOUT=NO THEN
:C:   SETOFF()
:C: ENDIF
*
:C: MACH(REG)=(MACH(REG)+DVAL)
:C: DVAL=((DVAL*RAD_OR_DIAM)*SX)
:C: IF REG=24 THEN
:C:   DVAL=(((DVAL+XGAUGE)*RAD_OR_DIAM)*SX)
:C: ENDIF
:C: IF REG=26 THEN
:C:   DVAL=(((DVAL+ZGAUGE)*RAD_OR_DIAM)*SX)
:C: ENDIF
*:C: DVAL=(DVAL*SX)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*  Center Calculations
*  AIC = 0  - Absolute Center
*  AIC = 1  - Incremental distance from Start to Center
*  AIC = 2  - Absolute or Incremental distance from Start to Center
*  AIC = 3  - Incremental distance from Center to Start
*--------------------------------------------------------------
:SECTION=CALC_CENTER(DVAL,DEFAULTVAL,GC,GG,G_GROUP,MACH,PREV,P_REG,SIGN,AIC)
* Old way
*//////////////////////////////////////////////////////
*:C: IF SIGN<>1 AND SIGN<>(-1) THEN SIGN=1 ENDIF
*:C: IF ATTROVERRIDE=YES THEN DVAL=ATTRDVALUE ENDIF
*:C: IF ATTROVERRIDE=NO AND AIC=0 THEN DVAL=(DEFAULTVAL*SIGN) ENDIF
*:C: IF ATTROVERRIDE=NO AND AIC=1 THEN DVAL=((DEFAULTVAL-PREV(P_REG))*SIGN) ENDIF
*:C: IF ATTROVERRIDE=NO AND AIC=2 AND G_GROUP(GG(G_ABS))=GC(G_ABS)
*:C: THEN DVAL=(DEFAULTVAL*SIGN)
*:C: ENDIF
*:C: IF ATTROVERRIDE=NO AND AIC=2 AND G_GROUP(GG(G_INC))=GC(G_INC) THEN
*:C: DVAL=((DEFAULTVAL-PREV(P_REG))*SIGN)
*:C: ENDIF
*:C: IF ATTROVERRIDE=NO AND AIC=3 THEN
*:C: DVAL=((PREV(P_REG)-DEFAULTVAL)*SIGN)
*:C: ENDIF
*//////////////////////////////////////////////////////
*
* Current way
*:C: IF SIGN=0 THEN SIGN=1 ENDIF
:C: IF SIGN=0 OR SIGN>2 THEN SIGN=1 ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   IF AIC=0 THEN
:C:     IF P_REG=24 THEN
:C:       DVAL=(SIGN*ABS_L_CENTER)
:C:     ENDIF
:C:     IF P_REG=26 THEN
:C:       DVAL=(SIGN*ABS_K_CENTER)
:C:     ENDIF
:C:   ENDIF
:C:   IF AIC=1 THEN
:C:     IF P_REG=24 THEN
:C:       DVAL=(SIGN*INC_L_CENTER)
:C:     ENDIF
:C:     IF P_REG=26 THEN
:C:       DVAL=(SIGN*INC_K_CENTER)
:C:     ENDIF
:C:   ENDIF
:C:   IF AIC=2 THEN
:C:     IF G_GROUP(GG(G_ABS))=GC(G_INC) THEN
:C:       IF P_REG=24 THEN
:C:         DVAL=(SIGN*INC_L_CENTER)
:C:       ENDIF
:C:       IF P_REG=26 THEN
:C:         DVAL=(SIGN*INC_K_CENTER)
:C:       ENDIF
:C:     ELSE
:C:       IF P_REG=24 THEN
:C:         DVAL=(SIGN*ABS_L_CENTER)
:C:       ENDIF
:C:       IF P_REG=26 THEN
:C:         DVAL=(SIGN*ABS_K_CENTER)
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C:   IF AIC=3 THEN
:C:     IF P_REG=24 THEN
:C:       DVAL=(-1*(SIGN*INC_L_CENTER))
:C:     ENDIF
:C:     IF P_REG=26 THEN
:C:       DVAL=(-1*(SIGN*INC_K_CENTER))
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   IF AIC=0 THEN
:C:     IF P_REG=24 THEN
:C:       DVAL=(SIGN*ABS_J_CENTER)
:C:     ENDIF
:C:     IF P_REG=26 THEN
:C:       DVAL=(SIGN*ABS_I_CENTER)
:C:     ENDIF
:C:   ENDIF
:C:   IF AIC=1 THEN
:C:     IF P_REG=24 THEN
:C:       DVAL=(SIGN*INC_J_CENTER)
:C:     ENDIF
:C:     IF P_REG=26 THEN
:C:       DVAL=(SIGN*INC_I_CENTER)
:C:     ENDIF
:C:   ENDIF
:C:   IF AIC=2 THEN
:C:     IF G_GROUP(GG(G_ABS))=GC(G_INC) THEN
:C:       IF P_REG=24 THEN
:C:         DVAL=(SIGN*INC_J_CENTER)
:C:       ENDIF
:C:       IF P_REG=26 THEN
:C:         DVAL=(SIGN*INC_I_CENTER)
:C:       ENDIF
:C:     ELSE
:C:       IF P_REG=24 THEN
:C:         DVAL=(SIGN*ABS_J_CENTER)
:C:       ENDIF
:C:       IF P_REG=26 THEN
:C:         DVAL=(SIGN*ABS_I_CENTER)
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C:   IF AIC=3 THEN
:C:     IF P_REG=24 THEN
:C:       DVAL=(-1*(SIGN*INC_J_CENTER))
:C:     ENDIF
:C:     IF P_REG=26 THEN
:C:       DVAL=(-1*(SIGN*INC_I_CENTER))
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   N Sequence register
*--------------------------------------------------------------
:SECTION=CALC_REG_N(NVAL,MAXSEQ,SEQ_NUMBERS)
:C: IF NVAL>MAXSEQ THEN
:C:   SEQ=SEQ_INCREMENT
:C:   NVAL=SEQ
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   P Sequence register
*--------------------------------------------------------------
:SECTION=CALC_REG_P_SEQ(NVAL)
:C: SETON()
:C: NVAL=SEQ
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Q Sequence register
*--------------------------------------------------------------
:SECTION=CALC_REG_Q_SEQ(NVAL)
:C: SETON()
:C: NVAL=(SEQ+(SEQ_INCREMENT*(MOVE_COUNT+1)))
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   F Feed register
*--------------------------------------------------------------
:SECTION=CALC_REG_F(MACH,REGISTER,FVAL)
:C: SETON()
:C: IF OPR_FEED_TYPE=1 THEN
:C:   FVAL=OPR_FEED_FPR
:C: ENDIF
:C: IF OPR_FEED_TYPE=2 THEN
:C:   FVAL=OPR_FEED_FPM
:C: ENDIF
:C: IF OPR_TYPE=LATHE_THREADING THEN
:C:   OPR_FEED_TYPE=1
:C:   FVAL=OPR_THREAD_PITCH
:C: ENDIF
:C: IF FVAL=REG_F AND OPR_TYPE<>LATHE_THREADING THEN
:C:   SETOFF()
:C: ENDIF
:C: IF ATTROVERRIDE<>YES AND FVAL=0 THEN
:C:   SETOFF()
:C:   RETURN
:C: ENDIF
:C: IF ATTROVERRIDE=YES THEN
:C:   FVAL=ATTRDVALUE
:C: ENDIF
:C: IF FVAL=MACH(REGISTER) THEN
:C:   SETOFF()
:C: ENDIF
:C: MACH(REGISTER)=FVAL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Arc Radius
*--------------------------------------------------------------
:SECTION=CALC_RADIUS(RVAL,MACH,REGISTER)
:C: IF ATTROVERRIDE=YES THEN
:C:   RVAL=ATTRDVALUE
:C: ELSE
:C:   IF TURRET=REAR THEN
:C:     RVAL=ARC_RADIUS
:C:   ELSE
:C:     RVAL=S_ARC_RADIUS
:C:   ENDIF
:C: ENDIF
*
:C: SETON()
:C: MACH(REGISTER)=RVAL
*
:C: IF TURRET=REAR THEN
:C:   IF ARC_INC_ANGLE>HALF_CIRCLE OR ARC_INC_ANGLE=HALF_CIRCLE THEN
:C:     RVAL=(-MACH(REGISTER))
:C:   ENDIF
:C: ELSE
:C:   IF S_ARC_INC_ANGLE>HALF_CIRCLE OR S_ARC_INC_ANGLE=HALF_CIRCLE THEN
:C:     RVAL=(-MACH(REGISTER))
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   G92 I Taper
*--------------------------------------------------------------
:SECTION=CALC_TAPER(TNUM)
:C: SETON()
:C: TNUM=(OPR_THREAD_LENGTH*TAN(OPR_THREAD_ANGLE*(3.14159265/180)))
:C: TNUM=(-1*(TNUM*SX))
*
:C: IF ID=1 THEN
:C:   TNUM=(-TNUM)
:C: ENDIF
:C: IF ABS(TNUM)<.0001 THEN
:C:   SETOFF()
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   G76 Thread Height
*--------------------------------------------------------------
:SECTION=CALC_THREAD_HEIGHT(HNUM)
:C: SETON()
:C: IF CAMWORKS_VER=CAM_REV2011_SP1 OR CAMWORKS_VER>CAM_REV2011_SP1 THEN
:C:   HNUM=OPR_THREAD_DEPTH
:C: ELSE
:C:   HNUM=(ABS(ABS(ABS_X_START)-(OPR_THREAD_MINOR_DIAM/2)))
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   G76 Z Thread Angle
*--------------------------------------------------------------
:SECTION=CALC_INFEED_ANGLE(ANUM)
:C: SETON()
:C: IF OPR_INFEED_TYPE=STRAIGHT_INFEED THEN
:C:   SETOFF()
:C:   RETURN
:C: ELSE
:C:   ANUM=OPR_INFEED_ANGLE
:C: ENDIF
:C: IF ANUM=0 THEN
:C:   SETOFF()
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Bar Puller Z Depths
*--------------------------------------------------------------
:SECTION=CALC_REG_B_Z(CALC_NUM,ZVAL)
:C: SETON()
:C: CALC_NUM=ZVAL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Bar Puller X Depths
*--------------------------------------------------------------
:SECTION=CALC_REG_B_X(CALC_NUM,XVAL)
:C: SETON()
:C: CALC_NUM=XVAL
:C: REG_X=XVAL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Bar Puller Z Depths
*--------------------------------------------------------------
:SECTION=CALC_REG_B_T(CALC_NUM,TVAL)
:C: SETON()
:C: CALC_NUM=TVAL
:C: REG_T=TVAL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Tool Sync Number
*--------------------------------------------------------------
:SECTION=CALC_TOOL_SYNC(TVAL,SNUM)
:C: IF ATTROVERRIDE=YES THEN
:C:   TVAL=ATTRDVALUE
:C: ELSE
:C:   TVAL=SNUM
:C: ENDIF
:C: SETON()
:C: IF TVAL=0 THEN
:C:   SETOFF()
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Start Sync Number
*--------------------------------------------------------------
:SECTION=CALC_START_SYNC(TVAL,SNUM)
:C: IF ATTROVERRIDE=YES THEN
:C:   TVAL=ATTRDVALUE
:C: ELSE
:C:   TVAL=SNUM
:C: ENDIF
:C: SETON()
:C: IF TVAL=0 THEN
:C:   SETOFF()
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   End Sync Number
*--------------------------------------------------------------
:SECTION=CALC_END_SYNC(TVAL,SNUM)
:C: IF ATTROVERRIDE=YES THEN
:C:   TVAL=ATTRDVALUE
:C: ELSE
:C:   TVAL=SNUM
:C: ENDIF
:C: SETON()
:C: IF TVAL=0 THEN
:C:   SETOFF()
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*  Define Calculation Sections
*--------------------------------------------------------------
:SECTION=CALC_PRE_POST_INITIALIZE
* the meaning of conventional or non conventional are as follows
* Conventional = A rotates about X, B rotates about Y, C rotates about Z
* if your post has A or B axis not rotating about those standards then
* it is considered non conventional.
*
* most posts are none conventional so FALSE is default
*
* if your post or posts are conventional then create
* CONVENTIONAL_AXIS_LABELS section in your SRC file with nothing
* in it and then create CALC_CONVENTIONAL_AXIS_LABELS and set
* CONVENTIONAL_AXIS_LABELS=TRUE.
*
:C: CONVENTIONAL_AXIS_LABELS=FALSE
*
:C: IF SECTIONEXIST(CONVENTIONAL_AXIS_LABELS) THEN
:C:   CALL(CALC_CONVENTIONAL_AXIS_LABELS)
:C: ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2013 OR CAMWORKS_VER>CAM_REV2013 THEN
:C:   POST_LIBRARY_VERSION=2023
:C:   POST_LIBRARY_SUBVERSION=1
:C: ENDIF
:C: NEVER_ZERO_OFFSET_RADIUS=0
*
:C: IF DSPINDLE=0 THEN
:C:   DSPINDLE=1
:C: ENDIF
*
:C: PREVIOUS_OPER_TYPE=0
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_POST_INITIALIZE
:C: IF CAMWORKS_VER=CAM_REV2013 OR CAMWORKS_VER>CAM_REV2013 THEN
:C:   POST_LIBRARY_VERSION=2023
:C:   POST_LIBRARY_SUBVERSION=1
:C: ENDIF
:C: NEVER_ZERO_OFFSET_RADIUS=0
*
:C: IF DSPINDLE=0 THEN
:C:   DSPINDLE=1
:C: ENDIF
*
:C: PREVIOUS_OPER_TYPE=0
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
****                    NC FILE HEADER/FOOTER SECTIONS                      ****
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_START_OF_TAPE
:C: SEQ=1
:C: SEQ_INCREMENT=1
:C: MAX_SEQUENCE=99999
:C: AIC = 1
:C: RAD_OR_DIAM = 2
:C: SX = 1
:C: CURRENT_MODE=1
:C: XGAUGE=0
:C: ZGAUGE=0
:C: X_GAUGE=0
:C: Z_GAUGE=0
:C: CREATE_SMALLER_LATHE_ARCS=NO
:C: CALL(CALC_INITIALIZE)
:C: X_GAUGE=(XGAUGE*x_gauge_length)
:C: Z_GAUGE=(ZGAUGE*z_gauge_length)
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C: T_ORIENT=PROG_POINT_PRIMARY
:C: COMP_FLAG=0
:C: ELSE
:C: T_ORIENT=1
:C: COMP_FLAG=0
:C: ENDIF
*
*** PreLoad Tool Array ***
*:C: GETTOOLS(2,CALC_PRELOAD_TOOL)
:C: TOOL_ARRAY(ARRAY_COUNT)=TOOL_ARRAY(0)
:C: ARRAY_COUNT=1
*
*** PREDATOR_HEADER needs to be set in :SECTION=CALC_INIT_CODES of the SRC file ***
:C: IF PREDATOR_HEADER=1 THEN
:C:   IF SECTIONEXIST(START_PREDATOR_HEADER) THEN
:C:     CALL(START_PREDATOR_HEADER)
:C:   ENDIF
:C:   GETTOOLS(1,CALC_PREDATOR_TOOLLIST)
:C:   IF SECTIONEXIST(END_PREDATOR_HEADER) THEN
:C:     CALL(END_PREDATOR_HEADER)
:C:   ENDIF
:C: ENDIF
*
*** Output Start of Tape ***
:C: IF SECTIONEXIST(START_OF_TAPE) THEN
:C:   CALL(START_OF_TAPE)
:C: ENDIF
:C: IF DOING_MACROS=1 THEN
:C:   IF SECTIONEXIST(START_OF_TAPE_FRONT) THEN
:C:     IF TURRET=FRONT THEN
:C:       CALL(START_OF_TAPE_FRONT)
:C:     ELSE
:C:       IF SECTIONEXIST(START_OF_TAPE_REAR) THEN
:C:         CALL(START_OF_TAPE_REAR)
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     DUMMY=program_number
:C:     program_number=(program_number+1)
:C:     ADD_MACRO_START
:C:     IF SECTIONEXIST(START_OF_TAPE) THEN
:C:       CALL(START_OF_TAPE)
:C:     ENDIF
:C:     ADD_MACRO_END
:C:     program_number=DUMMY
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_PREDATOR_TOOLLIST
*
* CAMworks Tool Type
* 201 (Endmill)
* 202 (Ballnose)
* 203 (Hognose)
* 221 (Tapered Endmill)
* 222 (Tapered Ballnose)
* 223 (Tapered Hognose)
* 204 (Drill)
* 205 (Bore)
* 206 (Ream)
* 207 (Tap)
* 208 (Center Drill)
* 209 (Corner Round)
* 210 (Counter Sink)
* 211 (SP Thread Mill)
* 212 (MP Thread Mill)
* 213 (Dovetail)
* 214 (Keyway)
* 215 (Unknown)
* 216 (Lollipop)
* 217 (Facemill)
* 218 (Unknown)
*
* Lathe tool types
* 301 (Round)
* 302 (Square)
* 303 (Triangle)
* 304 (Diamond)
* 305 (Diamond)
* 306 (Diamond)
* 315 (Diamond)
* 316 (Thread)
* 308 (Groove)
* 309 (Drill)
* 310 (Center Drill)
* 311 (Tap)
* 317 (Trigon)
* 318 (Hexagon)
*
*  Predator Tool Type
* 1  = DIAMOND
* 2  = ?????
* 3  = TRIANGLE
* 4  = SQUARE
* 5  = PENTAGON
* 6  = HEXAGON
* 7  = ROUND
* 8  = RADIUS GROOVE
* 9  = GROOVE
* 10 = BUTTON
* 11 = THREAD
* 12 = DRILL
*
:C: PREDATOR_TOOL_TYPE=1
:C: IF TOOL_TYPE=301 THEN PREDATOR_TOOL_TYPE=7 ENDIF
:C: IF TOOL_TYPE=302 THEN PREDATOR_TOOL_TYPE=4 ENDIF
:C: IF TOOL_TYPE=303 THEN PREDATOR_TOOL_TYPE=3 ENDIF
:C: IF TOOL_TYPE=304 THEN PREDATOR_TOOL_TYPE=1 ENDIF
:C: IF TOOL_TYPE=305 THEN PREDATOR_TOOL_TYPE=1 ENDIF
:C: IF TOOL_TYPE=306 THEN PREDATOR_TOOL_TYPE=1 ENDIF
:C: IF TOOL_TYPE=308 THEN PREDATOR_TOOL_TYPE=9 ENDIF
:C: IF TOOL_TYPE=309 THEN PREDATOR_TOOL_TYPE=12 ENDIF
:C: IF TOOL_TYPE=310 THEN PREDATOR_TOOL_TYPE=12 ENDIF
:C: IF TOOL_TYPE=311 THEN PREDATOR_TOOL_TYPE=12 ENDIF
:C: IF TOOL_TYPE=315 THEN PREDATOR_TOOL_TYPE=1 ENDIF
:C: IF TOOL_TYPE=316 THEN PREDATOR_TOOL_TYPE=11 ENDIF
:C: IF TOOL_TYPE=317 THEN PREDATOR_TOOL_TYPE=5 ENDIF
:C: IF TOOL_TYPE=318 THEN PREDATOR_TOOL_TYPE=6 ENDIF
*
:C: SETOFF(<PREDATOR_CORNER_RADIUS>)
:C: IF TOOL_TYPE=308 THEN
:C:   IF TOOL_CORNER_RADIUS>.00005 THEN
:C:     SETON(<PREDATOR_CORNER_RADIUS>)
:C:   ENDIF
:C: ENDIF
*
:C: SETON(<PREDATOR_TOOL_ANGLE>)
*
:C: PREDATOR_TURRET_ORIENT=1
:C: IF TOOL_ORIENT=LEFT_UP THEN PREDATOR_TURRET_ORIENT=7 ENDIF
:C: IF TOOL_ORIENT=LEFT_DOWN THEN PREDATOR_TURRET_ORIENT=5 ENDIF
:C: IF TOOL_ORIENT=UP_RIGHT THEN PREDATOR_TURRET_ORIENT=4 ENDIF
:C: IF TOOL_ORIENT=UP_LEFT THEN PREDATOR_TURRET_ORIENT=3 ENDIF
:C: IF TOOL_ORIENT=DOWN_RIGHT THEN PREDATOR_TURRET_ORIENT=2 ENDIF
:C: IF TOOL_ORIENT=DOWN_LEFT THEN PREDATOR_TURRET_ORIENT=1 ENDIF
:C: IF TOOL_ORIENT=RIGHT_UP THEN PREDATOR_TURRET_ORIENT=8 ENDIF
:C: IF TOOL_ORIENT=RIGHT_DOWN THEN PREDATOR_TURRET_ORIENT=6 ENDIF
*
:C: IF SECTIONEXIST(PREDATOR_TOOLLIST) THEN
:C:   CALL(PREDATOR_TOOLLIST)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_END_OF_TAPE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=11 CALL(DEBUG)
:C: ENDIF
*
:C: CALL(CALC_TOTAL_TIME)
:C: IF DOING_MACROS=1 THEN
:C:   IF SECTIONEXIST(END_OF_TAPE_FRONT) THEN
:C:     IF TURRET=REAR THEN
:C:       SAVE_SEQ=SEQ
:C:       SEQ=SAVE_SEQ_2ND
:C:       ADD_MACRO_START
:C:     ENDIF
:C:     CALL(END_OF_TAPE_FRONT)
:C:     ADD_MACRO_END
:C:   ELSE
:C:     IF TURRET=REAR THEN
:C:       SAVE_SEQ=SEQ
:C:       SEQ=SAVE_SEQ_2ND
:C:       ADD_MACRO_START
:C:     ENDIF
:C:     CALL(END_OF_TAPE)
:C:     ADD_MACRO_END
:C:   ENDIF
:C:   SEQ=SAVE_SEQ
:C: ENDIF
:C: CALL(END_OF_TAPE)
:C: IF SETUP_CONFIG<>0 THEN
:C:   EOL={}
:C:   SPACES(YES)
:C:   CALL(SETUP_SHEET_LATHE)
:C:   IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:     CALL(OUTPUT_ESTIMATED_TIME)
:C:   ENDIF
:C:   GETTOOLS(2,SYSTEM)
:C: ENDIF
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
****                    PROCESS HEADER/FOOTER SECTIONS                      ****
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_START_OPERATION
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=17 CALL(DEBUG)
:C: ENDIF
*
:C: IF OPR_COUNT=0 THEN
:C:   CW_TIME=0
:C: ENDIF
:C: CALL(CALC_CW_ESTIMATED_MACHINE_TIME)
*
:C: ID_WORK=0
:C: CALL(CALC_POST_PROGRAM_STOP)
*
:C: IF DSPINDLE<>MAIN_SPINDLE AND DSPINDLE<>SUB_SPINDLE THEN
:C:   DSPINDLE=MAIN_SPINDLE
:C: ENDIF
*
:C: OUTPUT_RPM_CAP=0
:C: IF CAMWORKS_VER=CAM_REV2017 OR CAMWORKS_VER>CAM_REV2017 THEN
:C:   IF CAP_PART_MAX_RPM_MAIN=TRUE THEN
:C:     IF DSPINDLE=MAIN_SPINDLE THEN
:C:       OUTPUT_RPM_CAP=1
:C:     ENDIF
:C:   ENDIF
:C:   IF CAP_PART_MAX_RPM_SUB=TRUE THEN
:C:     IF DSPINDLE=SUB_SPINDLE THEN
:C:       OUTPUT_RPM_CAP=1
:C:     ENDIF
:C:   ENDIF
:C:   IF DSPINDLE=MAIN_SPINDLE THEN
:C:     S_RPM_CAP=PART_MAX_RPM_MAIN
:C:   ENDIF
:C:   IF DSPINDLE=SUB_SPINDLE THEN
:C:     S_RPM_CAP=PART_MAX_RPM_SUB
:C:   ENDIF
:C:   IF CAP_OPR_MAX_RPM=TRUE THEN
:C:     S_RPM_CAP=OPR_MAX_RPM
:C:   ENDIF
:C:   SAVE_RPM_CAP=S_RPM_CAP
:C: ELSE
:C:   S_RPM_CAP=maximum_rpm
:C:   OUTPUT_RPM_CAP=1
:C:   SAVE_RPM_CAP=S_RPM_CAP
:C: ENDIF
*
:C: COORD_TYPE=2
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:   COORD_TYPE=MCS_TYPE
:C: ENDIF
*
*** Below logic for B axis output in CW2016 ***
*** Currently "tool changer" not allowed on Front turret. ***
:C: IF CAMWORKS_VER>CAM_REV2015_SP2 THEN
:C:   IF TURRET=REAR THEN
:C:     IF DSPINDLE=MAIN_SPINDLE THEN
:C:       IF TOOL_ORIENT=UP_RIGHT THEN B_POS=270 ENDIF
:C:       IF TOOL_ORIENT=UP_LEFT THEN B_POS=270 ENDIF
:C:       IF TOOL_ORIENT=DOWN_RIGHT THEN B_POS=90 ENDIF
:C:       IF TOOL_ORIENT=DOWN_LEFT THEN B_POS=90 ENDIF
:C:       IF TOOL_ORIENT=LEFT_UP THEN B_POS=0 ENDIF
:C:       IF TOOL_ORIENT=LEFT_DOWN THEN B_POS=0 ENDIF
:C:       IF TOOL_ORIENT=RIGHT_UP THEN B_POS=180 ENDIF
:C:       IF TOOL_ORIENT=RIGHT_DOWN THEN B_POS=180 ENDIF
:C:       IF OPR_TYPE=LATHE_DRILLING THEN B_POS=0 ENDIF
:C:     ELSE
:C:       IF TOOL_ORIENT=UP_RIGHT THEN B_POS=270 ENDIF
:C:       IF TOOL_ORIENT=UP_LEFT THEN B_POS=270 ENDIF
:C:       IF TOOL_ORIENT=DOWN_RIGHT THEN B_POS=90 ENDIF
:C:       IF TOOL_ORIENT=DOWN_LEFT THEN B_POS=90 ENDIF
:C:       IF TOOL_ORIENT=LEFT_UP THEN B_POS=0 ENDIF
:C:       IF TOOL_ORIENT=LEFT_DOWN THEN B_POS=0 ENDIF
:C:       IF TOOL_ORIENT=RIGHT_UP THEN B_POS=180 ENDIF
:C:       IF TOOL_ORIENT=RIGHT_DOWN THEN B_POS=180 ENDIF
:C:       IF OPR_TYPE=LATHE_DRILLING THEN B_POS=180 ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
*:C: CHK_PRESSURE=chuck_pressure
:C: IF SECTIONEXIST(BAR_PULLER) THEN
:C:   IF OPR_TYPE=BAR_PULLER THEN
:C:     CALL(CALC_BAR_PULLER)
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(TAIL_STOCK_IN) THEN
:C:   IF OPR_TYPE=TAILSTOCK THEN
:C:     CALL(CALC_TAIL_STOCK)
:C:   ENDIF
:C: ENDIF
:C: MACH(REG_F)=0
:C: IF SECTIONEXIST(OPR_INFO) THEN
:C:   CALL(OPR_INFO)
:C: ENDIF
:C: IF OPR_COUNT>0 THEN
:C:   IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_FRONT) THEN
:C:     IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE) THEN
:C:       IF LAST_TURRET<>TURRET AND LAST_TOOL=TOOL THEN
:C:         IF LAST_TURRET=FRONT THEN
:C:           CALL(RAPID_TO_TOOL_CHANGE_FRONT)
:C:         ELSE
:C:           CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:         ENDIF
:C:       ENDIF
:C:     ENDIF
*:C:  ELSE
*:C:    CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CALC_4AXIS_FRONT_TURRET_SIGN) THEN
:C:   IF TURRET=FRONT THEN
:C:     CALL(CALC_4AXIS_FRONT_TURRET_SIGN)
:C:   ELSE
:C:     CALL(CALC_4AXIS_REAR_TURRET_SIGN)
:C:   ENDIF
:C: ENDIF
:C: OPR_COUNT=(OPR_COUNT+1)
:C: IF DOING_MACROS=1 THEN
:C:   IF OPR_COUNT=1 THEN
:C:     P_TURRET=TURRET
:C:     SAVE_SEQ_2ND=SEQ
:C:     IF TURRET=FRONT THEN
:C:       ADD_MACRO_START
:C:     ENDIF
:C:   ELSE
:C:     IF P_TURRET<>TURRET THEN
:C:       IF TURRET=FRONT THEN
:C:         SAVE_SEQ=SEQ
:C:         SEQ=SAVE_SEQ_2ND
:C:         ADD_MACRO_START
:C:       ENDIF
:C:       IF TURRET=REAR THEN
:C:         SAVE_SEQ_2ND=SEQ
:C:         SEQ=SAVE_SEQ
:C:         ADD_MACRO_END
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
:C: CURRENT_POST_CYCLE_TYPE=OPR_POST_CYCLE_TYPE
:C: CALL(CALC_ABS_INC)
:C: CALL(CALC_FEED_TYPE)
:C: CALL(CALC_SPEED_TYPE)
:C: CALL(CALC_SPINDLE_DIR)
*
:C: CALL(CALC_SPINDLE_COOLANT)
:C: IF coolant=1 THEN COOLANT_TYPE=MC(M_COOL_ON) ENDIF
:C: IF coolant=2 THEN COOLANT_TYPE=MC(M_COOL_OFF) ENDIF
*:C: IF coolant=3 THEN COOLANT_TYPE=MC(M_H_PRESSURE_ON) ENDIF
:C: CALL(CALC_MACHINE_COMP)
:C: X_GAUGE=(XGAUGE*x_gauge_length)
:C: Z_GAUGE=(ZGAUGE*z_gauge_length)
*
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:   IF HAVE_START_OPER_SYNC_CODES=TRUE THEN
:C:     OUTPUT_START_SYNC_CODES()
:C:   ENDIF
:C:   IF OPR_TYPE=LATHE_SPINDLE_OP THEN
:C:     IF SECTIONEXIST(TRANSFER_STARTUP) THEN
:C:       CALL(TRANSFER_STARTUP)
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
:C: IF ARRAY_COUNT=1 THEN
:C:   RETURN
:C: ENDIF
:C: IF TOOL=MACH(REG_T) THEN
:C:   CALL(CALC_CHECK_OPER_COMMENTS)
:C:   IF SECTIONEXIST(OPR_NAME) THEN
:C:     CALL(OPR_NAME)
:C:   ENDIF
:C:   IF SECTIONEXIST(RPM_CAP) THEN
:C:     IF OUTPUT_RPM_CAP=1 THEN
:C:       CALL(RPM_CAP)
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_END_OPERATION
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=18 CALL(DEBUG)
:C: ENDIF
*
:C: OPR_LATHE_TAPPING=FALSE
:C: SAVE_SPEED=OPR_SPEED
:C: SAVE_SPEED_TYPE=OPR_SPEED_TYPE
*
:C: IF OPR_TYPE=LATHE_PROFILING THEN
:C:   IF CURRENT_POST_CYCLE_TYPE=MACHINE THEN
:C:     IF ID_WORK=1 THEN
:C:       CALL(CALC_ID_END_BOUNDARY)
:C:       ID_WORK=0
:C:       GOTO1
:C:     ENDIF
:C:     IF ID=1 THEN
:C:       CALL(CALC_ID_END_BOUNDARY)
:C:       GOTO1
:C:     ELSE
:C:       CALL(CALC_OD_END_BOUNDARY)
:C:       GOTO1
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
:C: IF OPR_TYPE<>LATHE_ROUGHING AND OPR_TYPE<>LATHE_DRILLING AND OPR_TYPE<>LATHE_THREADING THEN
:C:   P_TURRET=TURRET
:C:   GOTO1
:C: ENDIF
:C: IF CURRENT_POST_CYCLE_TYPE=SYSTEM THEN
:C:   P_TURRET=TURRET
:C:   GOTO1
:C: ENDIF
:C: IF ID_WORK=1 THEN
:C:   CALL(CALC_ID_END_BOUNDARY)
:C:   ID_WORK=0
:C:   GOTO1
:C: ENDIF
:C: IF ID=1 THEN
:C:   CALL(CALC_ID_END_BOUNDARY)
:C:   P_TURRET=TURRET
:C:   GOTO1
:C: ENDIF
:C: CALL(CALC_OD_END_BOUNDARY)
:C: P_TURRET=TURRET
*
:C1: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:    IF HAVE_END_OPER_SYNC_CODES=TRUE THEN
:C:      OUTPUT_END_SYNC_CODES()
:C:    ENDIF
:C:    IF OPR_TYPE=LATHE_SPINDLE_OP THEN
:C:      IF SECTIONEXIST(TRANSFER_END) THEN
:C:        CALL(TRANSFER_END)
:C:      ENDIF
:C:    ENDIF
:C:  ENDIF
*
:C: PREVIOUS_OPER_TYPE=OPR_TYPE
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
****                          TOOL CHANGE SECTIONS                          ****
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_INIT_TOOL_CHANGE_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=4 CALL(DEBUG)
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:   T_ORIENT=PROG_POINT_PRIMARY
:C: ENDIF
*
:C: P_MOVE_TYPE=TOOL_CHANGE
:C: CALC_CHANGE_TOOL=1
:C: NEXT_TOOL=TOOL_ARRAY(ARRAY_COUNT)
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:   CALL(CALC_TOOL_CHANGE_TIME)
:C: ENDIF
:C: IF TOOL_COMMENT={} THEN
:C:   SETOFF(<TOOL_COMMENT>)
:C: ELSE
:C:   SETON(<TOOL_COMMENT>)
:C: ENDIF
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:   IF SUB_STATION_ID={} THEN
:C:     SETOFF(<SUB_STATION_ID>)
:C:   ELSE
:C:     SETON(<SUB_STATION_ID>)
:C:   ENDIF
:C: ENDIF
:C: LAST_TURRET=TURRET
:C: LAST_TOOL=TOOL
:C: FIRST_TOOL=TOOL
:C: ARRAY_COUNT=(ARRAY_COUNT+1)
:C: IF SECTIONEXIST(INIT_PRELOAD_TOOL_CHANGE_LATHE) THEN
:C:   CALL(CALC_INIT_PRELOAD_TOOL_CHANGE)
:C:   MACH(REG_T)=TOOL
:C:   SAVE_SPEED=OPR_SPEED
:C:   MACH(REG_F)=0
:C:   RETURN
:C: ENDIF
:C: IF SECTIONEXIST(INIT_TOOL_CHANGE_LATHE_FRONT) THEN
:C:   IF TURRET=FRONT THEN
:C:     CALL(INIT_TOOL_CHANGE_LATHE_FRONT)
:C:   ELSE
:C:     CALL(INIT_TOOL_CHANGE_LATHE)
:C:   ENDIF
:C: ELSE
:C:   CALL(INIT_TOOL_CHANGE_LATHE)
:C: ENDIF
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: SAVE_SPEED=OPR_SPEED
:C: MACH(REG_T)=TOOL
:C: MACH(REG_F)=0
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_INIT_PRELOAD_TOOL_CHANGE
:C: IF TOOL_COUNT>1 THEN
:C:   CALL(INIT_PRELOAD_TOOL_CHANGE_LATHE)
:C:   RETURN
:C: ENDIF
:C: IF SECTIONEXIST(INIT_TOOL_CHANGE_LATHE) THEN
:C:   CALL(INIT_TOOL_CHANGE_LATHE)
:C: ENDIF
:C: CALL(CALC_CHECK_OPER_COMMENTS)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SUB_TOOL_CHANGE_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=5 CALL(DEBUG)
:C: ENDIF
*
:C: P_MOVE_TYPE=TOOL_CHANGE
:C: CALC_CHANGE_TOOL=(CALC_CHANGE_TOOL+1)
:C: ARRAY_COUNT=(ARRAY_COUNT+1)
:C: NEXT_TOOL=TOOL_ARRAY(ARRAY_COUNT)
:C: CALL(CALC_TOOL_CHANGE_TIME)
:C: IF TOOL_COMMENT={} THEN
:C:   SETOFF(<TOOL_COMMENT>)
:C: ELSE
:C:   SETON(<TOOL_COMMENT>)
:C: ENDIF
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:   IF SUB_STATION_ID={} THEN
:C:     SETOFF(<SUB_STATION_ID>)
:C:   ELSE
:C:     SETON(<SUB_STATION_ID>)
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(SUB_PRELOAD_TOOL_CHANGE_LATHE) THEN
:C:   CALL(CALC_SUB_PRELOAD_TOOL_CHANGE)
:C:   MACH(REG_T)=TOOL
:C:   SAVE_SPEED=OPR_SPEED
:C:   MACH(REG_F)=0
:C:   RETURN
:C: ENDIF
:C: IF SECTIONEXIST(SUB_TOOL_CHANGE_LATHE_FRONT) THEN
:C:   IF TURRET=FRONT THEN
:C:     CALL(SUB_TOOL_CHANGE_LATHE_FRONT)
:C:   ELSE
:C:     CALL(SUB_TOOL_CHANGE_LATHE)
:C:   ENDIF
:C: ELSE
:C:   CALL(SUB_TOOL_CHANGE_LATHE)
:C: ENDIF
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: SAVE_SPEED=OPR_SPEED
:C: LAST_TURRET=TURRET
:C: LAST_TOOL=TOOL
:C: MACH(REG_T)=TOOL
:C: MACH(REG_F)=0
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SUB_PRELOAD_TOOL_CHANGE
:C: IF TOOL_COUNT>1 THEN
:C:   CALL(SUB_PRELOAD_TOOL_CHANGE_LATHE)
:C:   RETURN
:C: ENDIF
:C: IF SECTIONEXIST(SUB_TOOL_CHANGE_LATHE) THEN
:C:   CALL(SUB_TOOL_CHANGE_LATHE)
:C: ENDIF
:C: CALL(CALC_CHECK_OPER_COMMENTS)
:C: LAST_TOOL=TOOL
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_PRELOAD_TOOL
:C: TOOL_COUNT=(TOOL_COUNT+1)
:C: TOOL_ARRAY(ARRAY_COUNT)=TOOL
:C: ARRAY_COUNT=(ARRAY_COUNT+1)
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
****                          RAPID MOVE SECTIONS                           ****
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_MOVE_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=3 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:   CALL(CALC_ESTIMATE_RAPID_TIME)
:C: ENDIF
:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
:C: IF CAMWORKS_VER>CAM_REV2006EX AND FLAGGED(CAM_MOVE_FLAG,CAM_APPROACH)=TRUE THEN
*:C:  CALL(TEST_APPROACH)
:C:   IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:     CALL(CALC_RAPID_TO_START_APPROACH)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
:C: IF CAMWORKS_VER>CAM_REV2006EX AND FLAGGED(CAM_MOVE_FLAG,CAM_RETRACT)=TRUE THEN
*:C:  CALL(TEST_RETRACT)
:C:   IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:     CALL(CALC_RAPID_RETRACT)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
:C: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:   CALL(CALC_RAPID_FROM_TOOL_CHANGE_LATHE)
:C:   RETURN
:C: ENDIF
:C: IF N_TOOL<>TOOL THEN
:C:   CALL(CALC_RAPID_TO_TOOL_CHANGE_LATHE)
:C:   RETURN
:C: ENDIF
:C: IF OPR_TYPE=LATHE_PROFILING AND COMP<>GC(G_COMP_OFF) THEN
:C:   IF P_MOVE_TYPE=LINE OR P_MOVE_TYPE=CW_ARC OR P_MOVE_TYPE=CCW_ARC THEN
:C:     IF SECTIONEXIST(RAPID_LEADOUT_MOVE_LATHE) THEN
:C:       CALL(RAPID_LEADOUT_MOVE_LATHE)
:C:       RETURN
:C:     ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
:C: CALL(RAPID_MOVE_LATHE)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_FROM_TOOL_CHANGE_LATHE
:C: IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_LATHE) THEN
:C:   CALL(RAPID_FROM_TOOL_CHANGE_LATHE)
:C: ELSE
:C:   CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_TO_TOOL_CHANGE_LATHE
:C: IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE) THEN
:C:   IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_FRONT) THEN
:C:     IF TURRET=FRONT THEN
:C:       CALL(RAPID_TO_TOOL_CHANGE_FRONT)
:C:     ELSE
:C:       CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:     ENDIF
:C:   ELSE
:C:     CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:   ENDIF
:C: ELSE
:C:   CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_TO_START_APPROACH
:C: IF FLAGGED(CAM_MOVE_FLAG,CAM_APPROACH)=TRUE THEN
:C:   IF FLAGGED(CAM_MOVE_FLAG, CAM_MOVE_X)=TRUE AND FLAGGED(CAM_MOVE_FLAG, CAM_MOVE_Z)=TRUE THEN
:C:       IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:          IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_LATHE) THEN
:C:          CALL(RAPID_FROM_TOOL_CHANGE_LATHE)
:C:          P_MOVE_TYPE=RAPID
:C:          RETURN
:C:          ELSE
:C:          CALL(RAPID_MOVE_LATHE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       ENDIF
:C:   ELSE
:C:     IF FLAGGED(CAM_MOVE_FLAG,CAM_MOVE_X)=TRUE THEN
:C:       IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:         IF SECTIONEXIST(RAPID_MOVE_LATHE_X_FROM_TC) THEN
:C:           CALL(RAPID_MOVE_LATHE_X_FROM_TC)
:C:           P_MOVE_TYPE=RAPID
:C:           RETURN
:C:         ELSE
:C:           CALL(RAPID_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:       ELSE
:C:         IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:           CALL(RAPID_MOVE_LATHE_X)
:C:           RETURN
:C:         ELSE
:C:           CALL(RAPID_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:       ENDIF
:C:     ELSE
:C:       IF FLAGGED(CAM_MOVE_FLAG,CAM_MOVE_Z)=TRUE THEN
:C:         IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:           IF SECTIONEXIST(RAPID_MOVE_LATHE_Z_FROM_TC) THEN
:C:             CALL(RAPID_MOVE_LATHE_Z_FROM_TC)
:C:             P_MOVE_TYPE=RAPID
:C:             RETURN
:C:           ELSE
:C:             CALL(RAPID_MOVE_LATHE)
:C:             RETURN
:C:           ENDIF
:C:         ELSE
:C:           IF SECTIONEXIST(RAPID_MOVE_LATHE_Z) THEN
:C:             CALL(RAPID_MOVE_LATHE_Z)
:C:             RETURN
:C:           ELSE
:C:             CALL(RAPID_MOVE_LATHE)
:C:             RETURN
:C:           ENDIF
:C:         ENDIF
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_RETRACT
:C: IF FLAGGED(CAM_MOVE_FLAG,CAM_RETRACT)=TRUE THEN
:C:   IF FLAGGED(CAM_MOVE_FLAG, CAM_MOVE_X)=TRUE AND FLAGGED(CAM_MOVE_FLAG, CAM_MOVE_Z)=TRUE THEN
:C:     IF N_TOOL<>TOOL THEN
:C:       IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE) THEN
:C:         CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:         P_MOVE_TYPE=RAPID
:C:         RETURN
:C:       ELSE
:C:         CALL(RAPID_MOVE_LATHE)
:C:         RETURN
:C:       ENDIF
:C:     ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:     ENDIF
:C:   ELSE
:C:     IF FLAGGED(CAM_MOVE_FLAG,CAM_MOVE_X)=TRUE THEN
:C:       IF N_TOOL<>TOOL THEN
:C:         IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE_X) THEN
:C:           CALL(RAPID_TO_TOOL_CHANGE_LATHE_X)
:C:           RETURN
:C:        ELSE
:C:           CALL(RAPID_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:       ELSE
:C:         IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:           CALL(RAPID_MOVE_LATHE_X)
:C:           RETURN
:C:         ELSE
:C:           CALL(RAPID_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:       ENDIF
:C:     ELSE
:C:       IF FLAGGED(CAM_MOVE_FLAG,CAM_MOVE_Z)=TRUE THEN
:C:         IF N_TOOL<>TOOL THEN
:C:           IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE_Z) THEN
:C:             CALL(RAPID_TO_TOOL_CHANGE_LATHE_Z)
:C:             RETURN
:C:           ELSE
:C:             CALL(RAPID_MOVE_LATHE)
:C:             RETURN
:C:           ENDIF
:C:         ELSE
:C:           IF SECTIONEXIST(RAPID_MOVE_LATHE_Z) THEN
:C:             CALL(RAPID_MOVE_LATHE_Z)
:C:             RETURN
:C:           ELSE
:C:             CALL(RAPID_MOVE_LATHE)
:C:             RETURN
:C:           ENDIF
:C:         ENDIF
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
****                           FEED MOVE SECTIONS                           ****
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_LINE_MOVE_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=1 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:   CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
:C: CALL(CALC_MACHINE_COMP)
*
*** CAM_MOVE_FLAG=CAM_LEADIN ***
*** CAM_MOVE_FLAG=CAM_LEADOUT ***
:C: IF LEADIN=YES THEN
:C:   CALL(CALC_LINE_LEADIN_MOVE_LATHE)
:C:   RETURN
:C: ENDIF
:C: IF CAMWORKS_VER<CAM_REV2007 THEN
:C:   IF COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE AND P_MOVE_TYPE<>CW_ARC AND P_MOVE_TYPE<>CCW_ARC THEN
:C:     CALL(CALC_LINE_LEADIN_MOVE_LATHE)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
:C: IF LEADOUT=YES THEN
:C:   CALL(CALC_LINE_LEADOUT_MOVE_LATHE)
:C:   RETURN
:C: ENDIF
*
:C: IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:   CALL(LINE_MOVE_LATHE)
:C: ELSE
:C:   IF OPR_BAXIS_TURNING=TRUE THEN
:C:     IF SECTIONEXIST(LINE_MOVE_LATHE_BAXIS) THEN
:C:       CALL(LINE_MOVE_LATHE_BAXIS)
:C:       RETURN
:C:     ELSE
:C:       CALL(LINE_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:   ELSE
:C:     CALL(LINE_MOVE_LATHE)
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_LINE_LEADIN_MOVE_LATHE
:C: IF CAMWORKS_VER<CAM_REV2007 THEN
:C:   IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:     IF LEADIN=YES THEN
:C:       CALL(LINE_LEADIN_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:     IF COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE AND P_MOVE_TYPE<>CW_ARC AND P_MOVE_TYPE<>CCW_ARC THEN
:C:       CALL(LINE_LEADIN_MOVE_LATHE)
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:     IF LEADIN=TRUE THEN
:C:       IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:         CALL(LINE_LEADIN_MOVE_LATHE)
:C:       ELSE
:C:         CALL(LINE_MOVE_LATHE)
:C:       ENDIF
:C:       COMP_FLAG=0
:C:     ENDIF
:C:   ELSE
:C:     IF LEADIN=TRUE THEN
:C:       IF OPR_BAXIS_TURNING=TRUE THEN
:C:         IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE_BAXIS) THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE_BAXIS)
:C:         ELSE
:C:           IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:             CALL(LINE_LEADIN_MOVE_LATHE)
:C:           ELSE
:C:             CALL(LINE_MOVE_LATHE)
:C:           ENDIF
:C:         ENDIF
:C:       ELSE
:C:         IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE)
:C:         ELSE
:C:           CALL(LINE_MOVE_LATHE)
:C:         ENDIF
:C:       ENDIF
:C:       COMP_FLAG=0
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_LINE_LEADOUT_MOVE_LATHE
:C: IF CAMWORKS_VER<CAM_REV2007 THEN
:C:   IF SECTIONEXIST(LINE_LEADOUT_MOVE_LATHE) THEN
:C:     IF LEADOUT=YES THEN
:C:       CALL(LINE_LEADOUT_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   IF LEADOUT=TRUE THEN
:C:     IF OPR_BAXIS_TURNING=TRUE THEN
:C:       IF SECTIONEXIST(LINE_LEADOUT_MOVE_LATHE_BAXIS) THEN
:C:         CALL(LINE_LEADOUT_MOVE_LATHE_BAXIS)
:C:       ELSE
:C:         IF SECTIONEXIST(LINE_LEADOUT_MOVE_LATHE) THEN
:C:           CALL(LINE_LEADOUT_MOVE_LATHE)
:C:         ELSE
:C:           CALL(LINE_MOVE_LATHE)
:C:         ENDIF
:C:       ENDIF
:C:     ELSE
:C:       IF SECTIONEXIST(LINE_LEADOUT_MOVE_LATHE) THEN
:C:         CALL(LINE_LEADOUT_MOVE_LATHE)
:C:       ELSE
:C:         CALL(LINE_MOVE_LATHE)
:C:       ENDIF
:C:     ENDIF
:C:     COMP_FLAG=0
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ARC_MOVE_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:  DEBUG=2 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:   CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2019_SP1 OR CAMWORKS_VER>CAM_REV2019_SP1 THEN
:C:    IF OPR_BAXIS_TURNING=TRUE THEN
:C:       IF CREATE_SMALLER_LATHE_ARCS=YES THEN
:C:          IF ARCS=CENTER THEN
:C:          MAX_B_AXIS_INCREMENT=1
:C:          SYS_CANNED(7,CALC_BREAK_ARC_TO_ARC_LATHE)
:C:          ELSE
:C:          MAX_B_AXIS_INCREMENT=1
:C:          SYS_CANNED(7,CALC_BREAK_RADIAL_ARC_TO_ARC_LATHE)
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*********************************************************
:C: BUCKET=0
:C: IF TURRET=FRONT THEN
:C:   ROUNDOFF(ABS_X_END,BUCKET,X_POS,G_RIGHT_PLACES,METRIC_OUT)
:C:   BUCKET=0
:C:   ROUNDOFF(ABS_Z_END,BUCKET,Z_POS,G_RIGHT_PLACES,METRIC_OUT)
:C:   IF S_MOVE_TYPE=CW_ARC THEN BUCKET=(S_ARC_START_ANGLE-S_ARC_END_ANGLE) ENDIF
:C:   IF S_MOVE_TYPE=CCW_ARC THEN BUCKET=(S_ARC_END_ANGLE-S_ARC_START_ANGLE) ENDIF
:C: ELSE
:C:   ROUNDOFF(ABS_X_END,BUCKET,X_POS,G_RIGHT_PLACES,METRIC_OUT)
:C:   BUCKET=0
:C:   ROUNDOFF(ABS_Z_END,BUCKET,Z_POS,G_RIGHT_PLACES,METRIC_OUT)
:C:   IF MOVE_TYPE=CW_ARC THEN BUCKET=(ARC_START_ANGLE-ARC_END_ANGLE) ENDIF
:C:   IF MOVE_TYPE=CCW_ARC THEN BUCKET=(ARC_END_ANGLE-ARC_START_ANGLE) ENDIF
:C: ENDIF
:C: IF BUCKET<0 THEN BUCKET=(BUCKET+360) ENDIF
:C: IF NO_SMALL_ARC<>1 THEN
:C:   IF ABS(X_POS-MACH(REG_X))<(ROUNDING_POINT*2) AND ABS(Z_POS-MACH(REG_Z))<(ROUNDING_POINT*2) AND ABS(BUCKET)<180 AND ABS(BUCKET)>.00005 THEN
:C:     RETURN
:C:   ENDIF
:C: ELSE
:C:   IF ABS(X_POS-MACH(REG_X))<(ARC_ROUNDING_POINT*2) AND ABS(Z_POS-MACH(REG_Z))<(ARC_ROUNDING_POINT*2) AND ABS(BUCKET)<180 AND ABS(BUCKET)>.00005 THEN
:C:     IF SECTIONEXIST(LINE_MOVE_LATHE) THEN
:C:       CALL(LINE_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
********************************************************
* this logic is to handle arc centers that are smaller then .0001 in both J center and I center for rear turret.
* this logic is to handle arc centers that are smaller then .0001 in both L center and K center for front turret.
:C: IF TURRET=REAR THEN
:C:   IF ABS(INC_J_CENTER)<(ROUNDING_POINT*2) AND ABS(INC_I_CENTER)<(ROUNDING_POINT*2) THEN
:C:     CALL(CALC_LINE_MOVE_LATHE)
:C:     RETURN
:C:   ENDIF
:C: ELSE
:C:   IF ABS(INC_L_CENTER)<(ROUNDING_POINT*2) AND ABS(INC_K_CENTER)<(ROUNDING_POINT*2) THEN
:C:     CALL(CALC_LINE_MOVE_LATHE)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
********************************************************
*
:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
*
*** Set Arc Direction per Turret ***
:C: IF MOVE_TYPE=CW_ARC THEN
:C:   ARC_DIR=GC(G_CW_ARC)
:C: ENDIF
:C: IF MOVE_TYPE=CCW_ARC THEN
:C:   ARC_DIR=GC(G_CCW_ARC)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   IF S_MOVE_TYPE=CW_ARC THEN
:C:     ARC_DIR=GC(G_CW_ARC)
:C:   ENDIF
:C:   IF S_MOVE_TYPE=CCW_ARC THEN
:C:     ARC_DIR=GC(G_CCW_ARC)
:C:   ENDIF
:C: ENDIF
*
:C: IF ARCS=RADIAL THEN
:C:   CALL(CALC_RADIAL_ARCS)
:C:   RETURN
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   IF SECTIONEXIST(ARC_MOVE_LATHE_FRONT) THEN
:C:     IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:       CALL(ARC_MOVE_LATHE_FRONT)
:C:       RETURN
:C:     ELSE
:C:       IF OPR_BAXIS_TURNING=TRUE THEN
:C:         IF SECTIONEXIST(ARC_MOVE_LATHE_BAXIS_FRONT) THEN
:C:           CALL(ARC_MOVE_LATHE_BAXIS_FRONT)
:C:           RETURN
:C:         ELSE
:C:           CALL(ARC_MOVE_LATHE_FRONT)
:C:           RETURN
:C:         ENDIF
:C:       ELSE
:C:         CALL(ARC_MOVE_LATHE_FRONT)
:C:         RETURN
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:       CALL(ARC_MOVE_LATHE)
:C:       RETURN
:C:     ELSE
:C:       IF OPR_BAXIS_TURNING=TRUE THEN
:C:         IF SECTIONEXIST(ARC_MOVE_LATHE_BAXIS) THEN
:C:           CALL(ARC_MOVE_LATHE_BAXIS)
:C:           RETURN
:C:         ELSE
:C:           CALL(ARC_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:       ELSE
:C:         CALL(ARC_MOVE_LATHE)
:C:         RETURN
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
:C: IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:   CALL(ARC_MOVE_LATHE)
:C:   RETURN
:C: ELSE
:C:   IF OPR_BAXIS_TURNING=TRUE THEN
:C:     IF SECTIONEXIST(ARC_MOVE_LATHE_BAXIS) THEN
:C:       CALL(ARC_MOVE_LATHE_BAXIS)
:C:       RETURN
:C:     ELSE
:C:       CALL(ARC_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:   ELSE
:C:     CALL(ARC_MOVE_LATHE)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RADIAL_ARCS
:C: IF (ABS(ARC_INC_ANGLE))=FULL_CIRCLE THEN
:C:   GOTO1
:C: ENDIF
:C: IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:   IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:     CALL(RADIUS_MOVE_LATHE)
:C:   ELSE
:C:     CALL(ARC_MOVE_LATHE)
:C:   ENDIF
:C:   RETURN
:C: ELSE
:C:   IF OPR_BAXIS_TURNING=TRUE THEN
:C:     IF SECTIONEXIST(RADIUS_MOVE_LATHE_BAXIS) THEN
:C:       CALL(RADIUS_MOVE_LATHE_BAXIS)
:C:       RETURN
:C:     ELSE
:C:       IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:         CALL(RADIUS_MOVE_LATHE)
:C:         RETURN
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:       CALL(RADIUS_MOVE_LATHE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
:C: CALL(ARC_MOVE_LATHE)
:C: RETURN
*
*    360 Circle ?
*
:C1: X_POS=(ABS_J_CENTER+(ARC_RADIUS*(COS((((ARC_START_ANGLE+180)/180)*PI)))))
:C:  Z_POS=(ABS_I_CENTER+(ARC_RADIUS*(SIN((((ARC_START_ANGLE+180)/180)*PI)))))
:C:  IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:    IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:      CALL(RADIUS_MOVE_LATHE)
:C:    ELSE
:C:      CALL(ARC_MOVE_LATHE)
:C:    ENDIF
:C:    GOTO2
:C:  ELSE
:C:    IF OPR_BAXIS_TURNING=TRUE THEN
:C:      IF SECTIONEXIST(RADIUS_MOVE_LATHE_BAXIS) THEN
:C:        CALL(RADIUS_MOVE_LATHE_BAXIS)
:C:        GOTO2
:C:      ELSE
:C:        IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:          CALL(RADIUS_MOVE_LATHE)
:C:          GOTO2
:C:        ENDIF
:C:      ENDIF
:C:    ELSE
:C:      IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:        CALL(RADIUS_MOVE_LATHE)
:C:        GOTO2
:C:      ENDIF
:C:    ENDIF
:C: ENDIF
:C: CALL(ARC_MOVE_LATHE)
*
:C2: IF TURRET=FRONT THEN
:C:    X_POS=ABS_U_END
:C:    Z_POS=ABS_W_END
:C:  ELSE
:C:    X_POS=ABS_X_END
:C:    Z_POS=ABS_Z_END
:C:  ENDIF
:C:  IF CAMWORKS_VER<CAM_REV2019_SP1 THEN
:C:    IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:     CALL(RADIUS_MOVE_LATHE)
:C:    ELSE
:C:      CALL(ARC_MOVE_LATHE)
:C:    ENDIF
:C:    RETURN
:C:  ELSE
:C:    IF OPR_BAXIS_TURNING=TRUE THEN
:C:      IF SECTIONEXIST(RADIUS_MOVE_LATHE_BAXIS) THEN
:C:        CALL(RADIUS_MOVE_LATHE_BAXIS)
:C:        RETURN
:C:      ELSE
:C:        IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:          CALL(RADIUS_MOVE_LATHE)
:C:          RETURN
:C:        ENDIF
:C:      ENDIF
:C:    ELSE
:C:      IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:        CALL(RADIUS_MOVE_LATHE)
:C:        RETURN
:C:      ENDIF
:C:    ENDIF
:C:  ENDIF
:C:  CALL(ARC_MOVE_LATHE)
:C:  RETURN
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_BREAK_ARC_TO_ARC_LATHE
:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
*
:C: IF SECTIONEXIST(ARC_MOVE_LATHE) THEN
:C:   CALL(ARC_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_BREAK_RADIAL_ARC_TO_ARC_LATHE
:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
*
:C: IF SECTIONEXIST(RADIUS_MOVE_LATHE) THEN
:C:   CALL(RADIUS_MOVE_LATHE)
:C: ENDIF
*
*
*
********************************************************************************
********************************************************************************
********************************************************************************
****                           Everything else ...                          ****
********************************************************************************
********************************************************************************
********************************************************************************
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*   Machine Comp
*--------------------------------------------------------------
:SECTION=CALC_MACHINE_COMP
*
*:C: IF CAMWORKS_VER>CAM_REV2006EX AND OPR_TYPE=LATHE_GROOVING THEN
*:C:   IF SECTIONEXIST(CALC_MACHINE_COMP_GROOVE) THEN
*:C:     CALL(CALC_MACHINE_COMP_GROOVE)
*:C:     RETURN
*:C:   ENDIF
*:C: ENDIF
*
:C: IF OPR_TYPE=LATHE_THREADING OR OPR_TYPE=LATHE_DRILLING OR OPR_TYPE=LATHE_GROOVING OR OPR_TYPE=LATHE_MISC OR OPR_TYPE=LATHE_SPECIAL THEN
:C:   COMP=GC(G_COMP_OFF)
:C:   G_GROUP(GG(G_COMP_OFF))=COMP
:C:   RETURN
:C: ENDIF
:C: IF OPR_TYPE=LATHE_ROUGHING AND OPR_POST_CYCLE_TYPE=SYSTEM THEN
:C:   COMP=GC(G_COMP_OFF)
:C:   G_GROUP(GG(G_COMP_OFF))=COMP
:C:   RETURN
:C: ENDIF
:C: IF machine_compensation<>1 THEN
:C:   GOTO2
:C: ENDIF
:C: IF O_DIRECTION=OFFSET_LEFT OR O_DIRECTION=CENTER_LEFT THEN
:C:   COMP=GC(G_COMP_LEFT)
:C: ENDIF
:C: IF O_DIRECTION=OFFSET_RIGHT OR O_DIRECTION=CENTER_RIGHT THEN
:C:   COMP=GC(G_COMP_RIGHT)
:C: ENDIF
*
:C2: IF machine_compensation=2 THEN COMP=GC(G_COMP_OFF) ENDIF
:C:  IF machine_compensation=3 THEN COMP=GC(G_COMP_LEFT) ENDIF
:C:  IF machine_compensation=4 THEN COMP=GC(G_COMP_RIGHT) ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
* this section is used in CW2007 for finish grooving shift amount
*--------------------------------------------------------------
:SECTION=CALC_SHIFT_TOOL_LATHE
*:C: CALL(TEST_SHIFT)
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:   IF TOOL_SHIFT_TYPE=SHIFT_ORIENTATION OR TOOL_SHIFT_TYPE=SHIFT_CENTER THEN RETURN ENDIF
:C:   IF T_ORIENT<>TOUCHOFF_POINT_TYPE THEN
:C:     IF SECTIONEXIST(SHIFT_OFFSET_PRIMARY) THEN
:C:       IF TOUCHOFF_POINT_TYPE=PROG_POINT_PRIMARY THEN
:C:         CALL(SHIFT_OFFSET_PRIMARY)
:C:       ENDIF
:C:       IF TOUCHOFF_POINT_TYPE=PROG_POINT_SECONDARY THEN
:C:         CALL(SHIFT_OFFSET_SECONDARY)
:C:       ENDIF
:C:     ENDIF
:C:     T_ORIENT=TOUCHOFF_POINT_TYPE
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
* this section is used CW2007 for finish grooving comp
*--------------------------------------------------------------
:SECTION=CALC_CUTTER_COMP_LATHE
*:C: CALL(TEST_COMP)
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:   IF LEADIN=YES THEN
:C:     COMP_FLAG=1
:C:   ENDIF
:C:   IF LEADOUT=YES THEN
:C:     COMP_FLAG=2
:C:   ENDIF
:C:   IF O_DIRECTION=OFFSET_LEFT OR O_DIRECTION=CENTER_LEFT THEN
:C:     COMP=GC(G_COMP_LEFT)
:C:   ENDIF
:C:   IF O_DIRECTION=OFFSET_RIGHT OR O_DIRECTION=CENTER_RIGHT THEN
:C:     COMP=GC(G_COMP_RIGHT)
:C:   ENDIF
:C:   IF machine_compensation=2 THEN COMP=GC(G_COMP_OFF) RETURN ENDIF
:C:   IF machine_compensation=3 THEN COMP=GC(G_COMP_LEFT) RETURN ENDIF
:C:   IF machine_compensation=4 THEN COMP=GC(G_COMP_RIGHT) RETURN ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_EVERY_MOVE_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=6 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(EVERY_MOVE_LATHE) THEN
:C:   CALL(EVERY_MOVE_LATHE)
:C: ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2012_PLUS OR CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:   IF HAVE_FIRST_MOVE_SYNC_CODES=TRUE THEN
:C:     OUTPUT_FIRST_MOVE_SYNC_CODES()
:C:   ENDIF
:C: ENDIF
*
:C: CALL(CALC_SPEED_TYPE)
*
:C: IF OPR_SPEED=0 THEN
:C:   OPR_SPEED=SAVE_SPEED
:C:   RETURN
:C: ENDIF
:C: IF OPR_COUNT=1 THEN
:C:   SAVE_SPEED=OPR_SPEED
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_SPEED<>SAVE_SPEED THEN
*:C:  CALL(CHANGE_CSS)
:C:   IF OPR_SPEED_TYPE=1 THEN
:C:     IF SECTIONEXIST(CHANGE_CSS) THEN
:C:       CALL(CHANGE_CSS)
:C:     ENDIF
:C:   ENDIF
:C:   IF OPR_SPEED_TYPE=2 THEN
:C:     IF SECTIONEXIST(CHANGE_DIRECT_RPM) THEN
:C:       CALL(CHANGE_DIRECT_RPM)
:C:     ENDIF
:C:   ENDIF
:C:   SAVE_SPEED=OPR_SPEED
:C:   SAVE_SPEED_TYPE=OPR_SPEED_TYPE
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_POST_PROGRAM_STOP
:C: IF SECTIONEXIST(PROGRAM_STOP) THEN
:C:   IF OPR_TYPE=POST_PROGRAM_STOP THEN
:C:     IF tape_output=1 THEN
:C:       CALL(PROGRAM_STOP)
:C:     ELSE
:C:       IF SECTIONEXIST(OPTIONAL_STOP) THEN
:C:         CALL(OPTIONAL_STOP)
:C:       ENDIF
:C:     ENDIF
:C:     IF OPR_TYPE>2999 THEN
:C:       CALL(CALC_CHECK_OPER_COMMENTS)
:C:       RETURN
:C:     ENDIF
:C:     IF OPR_COUNT>1 THEN
:C:       IF TOOL=MACH(REG_T) THEN
:C:         CALL(CALC_CHECK_OPER_COMMENTS)
:C:       ENDIF
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_CHECK_OPER_COMMENTS
:C: IF SECTIONEXIST(OUTPUT_OPER_COMMENT) THEN
:C:   GET_OPER_COMMENTS(CALC_OUTPUT_OPER_COMMENT)
:C: ELSE
:C:   GET_OPER_COMMENTS(SYSTEM)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OUTPUT_OPER_COMMENT
:C: CALL(OUTPUT_OPER_COMMENT)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SPINDLE_COOLANT
:C: IF OPR_SPEED_DIR=2 THEN
:C:   GOTO5
:C: ENDIF
:C: IF coolant=2 THEN
:C:   SPINDLE_COOLANT=MC(M_SPIN_CW)
:C: ENDIF
:C: IF coolant=1 THEN
:C:   SPINDLE_COOLANT=MC(M_CW_FLOOD)
:C: ENDIF
:C: RETURN
*
:C5: IF coolant=2 THEN
:C:    SPINDLE_COOLANT=MC(M_SPIN_CCW)
:C:  ENDIF
:C:  IF coolant=1 THEN
:C:    SPINDLE_COOLANT=MC(M_CCW_FLOOD)
:C:  ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_BAR_PULLER
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=20 CALL(DEBUG)
:C: ENDIF
*
:C: IF bar_type=1 THEN
:C:   IF SECTIONEXIST(BAR_PULLER) THEN
:C:    CALL(BAR_PULLER)
:C:   ENDIF
:C: ELSE
:C:   IF SECTIONEXIST(BAR_FEEDER) THEN
:C:    CALL(BAR_FEEDER)
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_TAIL_STOCK
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=21 CALL(DEBUG)
:C: ENDIF
*
:C: IF tail_stock=1 THEN
:C:   IF SECTIONEXIST(TAIL_STOCK_IN) THEN
:C:    CALL(TAIL_STOCK_IN)
:C:   ENDIF
:C: ENDIF
:C: IF tail_stock=2 THEN
:C:   IF SECTIONEXIST(TAIL_STOCK_OUT) THEN
:C:    CALL(TAIL_STOCK_OUT)
:C:   ENDIF
:C: ENDIF

*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SYSTEM_DRILL_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=12 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C: CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
*
*** Check to see if you are using a system tapping cycle! ***
:C: IF SECTIONEXIST(SYS_TAPPING_CYCLE) THEN
:C:   IF OPR_LATHE_TAPPING=TRUE THEN
:C:     CALL(CALC_SYSTEM_TAPPING)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   Z_POS=ABS_Z_END
:C: ENDIF
:C: CALL(LINE_MOVE_LATHE)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SYSTEM_TAPPING
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=31 CALL(DEBUG)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   Z_POS=ABS_Z_END
:C: ENDIF
*
:C: IF SECTIONEXIST(SYS_TAPPING_CYCLE) THEN
:C:   IF OPR_SPEED_DIR=1 THEN
:C:    CALL(SYS_TAPPING_CYCLE)
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(SYS_TAPPING_CYCLE_CCW) THEN
:C:   IF OPR_SPEED_DIR=2 THEN
:C:    CALL(SYS_TAPPING_CYCLE_CCW)
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_MACHINE_DRILL_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=15 CALL(DEBUG)
:C: ENDIF
*
*** Check to see if you are using a canned tapping cycle! ***
:C: ID_WORK=1
:C: IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:   IF OPR_LATHE_TAPPING=TRUE THEN
:C:     CALL(CALC_CANNED_TAPPING)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*** Check to see if can use a canned drill cycle! ***
:C: IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:   IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:     X_POS=OPR_X_APPROACH_POS
:C:     Z_POS=OPR_Z_APPROACH_POS
:C:     CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:     IF TURRET=FRONT THEN
:C:       X_POS=0
:C:       Z_POS=ABS_W_START
:C:       R_PLANE=ABS_W_START
:C:     ELSE
:C:       X_POS=0
:C:       Z_POS=ABS_Z_START
:C:       R_PLANE=ABS_Z_START
:C:     ENDIF
:C:   ELSE
:C:     IF TURRET=FRONT THEN
:C:       X_POS=0
:C:       Z_POS=ABS_W_START
:C:       R_PLANE=ABS_W_START
:C:     ELSE
:C:       X_POS=0
:C:       Z_POS=ABS_Z_START
:C:       R_PLANE=ABS_Z_START
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   IF TURRET=FRONT THEN
:C:     X_POS=0
:C:     Z_POS=ABS_W_START
:C:     R_PLANE=ABS_W_START
:C:   ELSE
:C:     X_POS=0
:C:     Z_POS=ABS_Z_START
:C:     R_PLANE=ABS_Z_START
:C:   ENDIF
:C: ENDIF
*
:C: IF SECTIONEXIST(CANNED_PERCENTAGE_PECKING_SINGLE_PULLOUT) THEN
:C:   IF OPR_CYCLE_TYPE=PERCENTAGE AND OPR_RETRACT_TYPE=SINGLE_RETRACT THEN
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CANNED_PERCENTAGE_PECKING_SINGLE_PULLOUT)
:C:     GOTO1
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CANNED_PERCENTAGE_PECKING_MULTIPLE_PULLOUT) THEN
:C:   IF OPR_CYCLE_TYPE=PERCENTAGE AND OPR_RETRACT_TYPE<>SINGLE_RETRACT THEN
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CANNED_PERCENTAGE_PECKING_MULTIPLE_PULLOUT)
:C:     GOTO1
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CANNED_DRILLING_SINGLE) THEN
:C:   IF OPR_CYCLE_TYPE=SINGLE_DEPTH AND OPR_RETRACT_TYPE=SINGLE_RETRACT THEN
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CANNED_DRILLING_SINGLE)
:C:     GOTO1
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CANNED_DRILLING_MULTIPLE) THEN
:C:   IF OPR_CYCLE_TYPE=SINGLE_DEPTH AND OPR_RETRACT_TYPE<>SINGLE_RETRACT THEN
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CANNED_DRILLING_MULTIPLE)
:C:     GOTO1
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CANNED_PECKING_SINGLE_PULLOUT) THEN
:C:   IF OPR_CYCLE_TYPE=CONSTANT AND OPR_RETRACT_TYPE=SINGLE_RETRACT THEN
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CANNED_PECKING_SINGLE_PULLOUT)
:C:     GOTO1
:C:   ENDIF
:C: ENDIF
:C: IF SECTIONEXIST(CANNED_PECKING_MULTIPLE_PULLOUT) THEN
:C:   IF OPR_CYCLE_TYPE=CONSTANT AND OPR_RETRACT_TYPE<>SINGLE_RETRACT THEN
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CANNED_PECKING_MULTIPLE_PULLOUT)
:C:     GOTO1
:C:   ENDIF
:C: ENDIF
:C: CALL(CALC_POSITION_TO_START)
:C: CURRENT_POST_CYCLE_TYPE=SYSTEM SYS_CANNED(2,SYSTEM) RETURN
*
:C1: IF N_TOOL<>TOOL THEN
:C:    IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:      CALL(CANCEL_TOOL)
:C:    ENDIF
:C:  ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_CANNED_TAPPING
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=30 CALL(DEBUG)
:C: ENDIF
*
:C: IF OPR_CYCLE_TYPE=SINGLE_DEPTH THEN
:C:   IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:     IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:       X_POS=OPR_X_APPROACH_POS
:C:       Z_POS=OPR_Z_APPROACH_POS
:C:       CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:       X_POS=0
:C:       IF TURRET=FRONT THEN
:C:         Z_POS=ABS_W_END
:C:       ELSE
:C:         Z_POS=ABS_Z_END
:C:       ENDIF
:C:       CALL(CALC_POSITION_TO_START)
:C:       IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:         CALL(CANNED_TAPPING_CYCLE)
:C:       ENDIF
:C:       IF N_TOOL<>TOOL THEN
:C:         IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:           CALL(CANCEL_TOOL)
:C:         ENDIF
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:         X_POS=0
:C:         Z_POS=ABS_W_START
:C:       ELSE
:C:         X_POS=0
:C:         Z_POS=ABS_Z_START
:C:       ENDIF
:C:       CALL(CALC_POSITION_TO_START)
:C:       IF TURRET=FRONT THEN
:C:         Z_POS=ABS_W_END
:C:       ELSE
:C:         Z_POS=ABS_Z_END
:C:       ENDIF
:C:       IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:         CALL(CANNED_TAPPING_CYCLE)
:C:       ENDIF
:C:       IF N_TOOL<>TOOL THEN
:C:         IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:           CALL(CANCEL_TOOL)
:C:         ENDIF
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF TURRET=FRONT THEN
:C:       X_POS=0
:C:       Z_POS=ABS_W_START
:C:     ELSE
:C:       X_POS=0
:C:       Z_POS=ABS_Z_START
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:       CALL(CANNED_TAPPING_CYCLE)
:C:     ENDIF
:C:     IF N_TOOL<>TOOL THEN
:C:       IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:         CALL(CANCEL_TOOL)
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C:   CURRENT_POST_CYCLE_TYPE=MACHINE
:C:   RETURN
:C: ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:   IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:     X_POS=OPR_X_APPROACH_POS
:C:     Z_POS=OPR_Z_APPROACH_POS
:C:     CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:     X_POS=0
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:       CALL(CANNED_TAPPING_CYCLE)
:C:     ENDIF
:C:     IF N_TOOL<>TOOL THEN
:C:       IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:         CALL(CANCEL_TOOL)
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF TURRET=FRONT THEN
:C:       X_POS=0
:C:       Z_POS=ABS_W_START
:C:     ELSE
:C:       X_POS=0
:C:       Z_POS=ABS_Z_START
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=ABS_W_END
:C:     ELSE
:C:       Z_POS=ABS_Z_END
:C:     ENDIF
:C:     IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:       CALL(CANNED_TAPPING_CYCLE)
:C:     ENDIF
:C:     IF N_TOOL<>TOOL THEN
:C:       IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:         CALL(CANCEL_TOOL)
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ELSE
:C:   IF TURRET=FRONT THEN
:C:     X_POS=0
:C:     Z_POS=ABS_W_START
:C:   ELSE
:C:     X_POS=0
:C:     Z_POS=ABS_Z_START
:C:   ENDIF
:C:   CALL(CALC_POSITION_TO_START)
:C:   IF TURRET=FRONT THEN
:C:     Z_POS=ABS_W_END
:C:   ELSE
:C:     Z_POS=ABS_Z_END
:C:   ENDIF
:C:   IF SECTIONEXIST(CANNED_TAPPING_CYCLE) THEN
:C:     CALL(CANNED_TAPPING_CYCLE)
:C:   ENDIF
:C:   IF N_TOOL<>TOOL THEN
:C:     IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:      CALL(CANCEL_TOOL)
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
:C: CURRENT_POST_CYCLE_TYPE=MACHINE
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_END_DRILL_CYCLE
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OFFSET_PART
:C: OFFSET_INC(INC_X_END,INC_Y_END)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SYSTEM_THREAD_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=13 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:   CALL(CALC_ESTIMATE_MACHINE_TIME)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
*
:C: IF SECTIONEXIST(FIRST_SYS_THREADING) THEN
:C:   IF GC(G_THREADING)<>G_GROUP(GG(G_THREADING)) THEN
:C:     CALL(FIRST_SYS_THREADING) RETURN
:C:   ENDIF
:C: ENDIF
*
:C: CALL(SYS_THREADING)
*
:C1: IF N_TOOL<>TOOL THEN
:C:    IF SECTIONEXIST(CANCEL_TOOL) THEN
:C:      CALL(CANCEL_TOOL)
:C:    ENDIF
:C:  ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_MACHINE_THREAD_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=16 CALL(DEBUG)
:C: ENDIF
*
*** Check to see if you are using G92 thread cycle! ***
*    "SYS_CANNED(3,???) will do a G92 thread cycle!
:C: IF SECTIONEXIST(MULT_THREADING) THEN
:C:   IF OPR_INFEED_TYPE=STRAIGHT_INFEED AND OPR_CYCLE_TYPE=CONSTANT_DEPTH THEN
:C:     IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:       IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:         X_POS=OPR_X_APPROACH_POS
:C:         Z_POS=OPR_Z_APPROACH_POS
:C:         CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:       ENDIF
:C:       IF TURRET=FRONT THEN
:C:         IF OD=1 THEN
:C:           IF ABS_U_START>0 THEN
:C:             X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:           ELSE
:C:             X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:           ENDIF
:C:         ELSE
:C:           IF ABS_U_START>0 THEN
:C:             X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:           ELSE
:C:             X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:           ENDIF
:C:         ENDIF
:C:         Z_POS=ABS_W_START
:C:       ELSE
:C:         IF OD=1 THEN
:C:           IF ABS_X_START>0 THEN
:C:             X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:           ELSE
:C:             X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:           ENDIF
:C:         ELSE
:C:           IF ABS_X_START>0 THEN
:C:             X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:           ELSE
:C:             X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:           ENDIF
:C:         ENDIF
:C:         Z_POS=ABS_Z_START
:C:        ENDIF
:C:      ELSE
:C:        IF TURRET=FRONT THEN
:C:          IF OD=1 THEN
:C:            IF ABS_U_START>0 THEN
:C:              X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:            ELSE
:C:              X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:            ENDIF
:C:          ELSE
:C:            IF ABS_U_START>0 THEN
:C:              X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:            ELSE
:C:              X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:            ENDIF
:C:          ENDIF
:C:          Z_POS=ABS_W_START
:C:        ELSE
:C:          IF OD=1 THEN
:C:            IF ABS_X_START>0 THEN
:C:              X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:            ELSE
:C:              X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:            ENDIF
:C:          ELSE
:C:            IF ABS_X_START>0 THEN
:C:              X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:            ELSE
:C:              X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:            ENDIF
:C:          ENDIF
:C:          Z_POS=ABS_Z_START
:C:        ENDIF
:C:      ENDIF
:C:      CALL(CALC_POSITION_TO_START)
:C:      CURRENT_POST_CYCLE_TYPE=MACHINE
:C:      SYS_CANNED(3,CALC_MULTIPLE_THREAD_LATHE)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*** If NOT doing a G92 thread cycle, can we do a G76 thread cycle! ***
:C: IF OPR_CYCLE_TYPE=CONSTANT_DEPTH THEN
:C:   CURRENT_POST_CYCLE_TYPE=MACHINE SYS_CANNED(2,SYSTEM)
:C:   RETURN
:C: ENDIF
*
:C: IF SECTIONEXIST(CANNED_THREADING) THEN
:C:   IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:     IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:       X_POS=OPR_X_APPROACH_POS
:C:       Z_POS=OPR_Z_APPROACH_POS
:C:       CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:     ENDIF
:C:     IF TURRET=FRONT THEN
:C:       IF OD=1 THEN
:C:         IF ABS_U_START>0 THEN
:C:           X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ELSE
:C:         IF ABS_U_START>0 THEN
:C:           X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ENDIF
:C:       Z_POS=ABS_W_START
:C:     ELSE
:C:       IF OD=1 THEN
:C:         IF ABS_X_START>0 THEN
:C:           X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ELSE
:C:         IF ABS_X_START>0 THEN
:C:           X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ENDIF
:C:       Z_POS=ABS_Z_START
:C:     ENDIF
:C:   ELSE
:C:     IF TURRET=FRONT THEN
:C:       IF OD=1 THEN
:C:         IF ABS_U_START>0 THEN
:C:           X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ELSE
:C:         IF ABS_U_START>0 THEN
:C:           X_POS=(ABS_U_START-OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_U_START+OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ENDIF
:C:       Z_POS=ABS_W_START
:C:     ELSE
:C:       IF OD=1 THEN
:C:         IF ABS_X_START>0 THEN
:C:           X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ELSE
:C:         IF ABS_X_START>0 THEN
:C:           X_POS=(ABS_X_START-OPR_CYCLE_CLEARANCE)
:C:         ELSE
:C:           X_POS=(ABS_X_START+OPR_CYCLE_CLEARANCE)
:C:         ENDIF
:C:       ENDIF
:C:       Z_POS=ABS_Z_START
:C:     ENDIF
:C:   ENDIF
:C:   CALL(CALC_POSITION_TO_START)
:C:   IF TURRET=FRONT THEN
:C:     X_POS=(OPR_THREAD_MINOR_DIAM/2)
:C:     IF ABS_U_START<0 THEN
:C:       X_POS=(-1*(OPR_THREAD_MINOR_DIAM/2))
:C:     ENDIF
:C:     Z_POS=ABS_W_END
:C:   ELSE
:C:     X_POS=(OPR_THREAD_MINOR_DIAM/2)
:C:     IF ABS_X_START<0 THEN
:C:       X_POS=(-1*(OPR_THREAD_MINOR_DIAM/2))
:C:     ENDIF
:C:     Z_POS=ABS_Z_END
:C:   ENDIF
:C:   CALL(CANNED_THREADING)
:C:   RETURN
:C: ENDIF
*
:C: CURRENT_POST_CYCLE_TYPE=MACHINE SYS_CANNED(2,SYSTEM)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_MULTIPLE_THREAD_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=19 CALL(DEBUG)
:C: ENDIF

:C: IF TURRET=FRONT THEN
:C:   X_POS=ABS_U_END
:C:   Z_POS=ABS_W_END
:C: ELSE
:C:   X_POS=ABS_X_END
:C:   Z_POS=ABS_Z_END
:C: ENDIF
*
:C: IF SECTIONEXIST(FIRST_MULT_THREADING) THEN
:C:   IF GC(G_STAN_THREAD)<>G_GROUP(GG(G_STAN_THREAD)) THEN
:C:     CALL(FIRST_MULT_THREADING) RETURN
:C:   ENDIF
:C: ENDIF
*
:C: CALL(MULT_THREADING)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_START_BOUNDARY_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=14 CALL(DEBUG)
:C: ENDIF
*
:C: IF OPR_TYPE=LATHE_PROFILING THEN
:C:   IF TURRET=FRONT THEN
:C:     X_POS=ABS_U_START
:C:     Z_POS=ABS_W_START
:C:   ELSE
:C:     X_POS=ABS_X_START
:C:     Z_POS=ABS_Z_START
:C:   ENDIF
:C:   CALL(CALC_POSITION_TO_START)
:C:   CURRENT_POST_CYCLE_TYPE=MACHINE
:C:   RETURN
:C: ENDIF
*
:C: IF SECTIONEXIST(CANNED_ROUGH_ID_OD) THEN
:C:   X_FINISH=OPR_X_PART_CLEARANCE
:C:   IF ID=1 THEN
:C:     X_FINISH=(-X_FINISH)
:C:   ENDIF
*
*** This is for OD and ID canned roughing cycles ***
:C:   IF OPR_CYCLE_TYPE=TURNING THEN
:C:     IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:       IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:         X_POS=OPR_X_APPROACH_POS
:C:         Z_POS=OPR_Z_APPROACH_POS
:C:         CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:         IF TURRET=FRONT THEN
:C:           X_POS=ABS_U_END
:C:           Z_POS=ABS_W_START
:C:         ELSE
:C:           X_POS=ABS_X_END
:C:           Z_POS=ABS_Z_START
:C:         ENDIF
:C:       ELSE
:C:         IF TURRET=FRONT THEN
:C:           X_POS=ABS_U_END
:C:           Z_POS=ABS_W_START
:C:         ELSE
:C:           X_POS=ABS_X_END
:C:           Z_POS=ABS_Z_START
:C:         ENDIF
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:         X_POS=ABS_U_END
:C:         Z_POS=ABS_W_START
:C:       ELSE
:C:         X_POS=ABS_X_END
:C:         Z_POS=ABS_Z_START
:C:       ENDIF
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     CALL(CALC_OUTPUT_BEFORE_FEED_SYNC_BEFORE_CANNED_CYCLE)
:C:     IF TURRET=FRONT THEN
:C:       IF SECTIONEXIST(CANNED_ROUGH_ID_OD_FRONT) THEN
:C:         CALL(CANNED_ROUGH_ID_OD_FRONT)
:C:       ELSE
:C:         CALL(CANNED_ROUGH_ID_OD)
:C:       ENDIF
:C:     ELSE
:C:       CALL(CANNED_ROUGH_ID_OD)
:C:     ENDIF
:C:     IF TURRET=FRONT THEN
:C:       X_POS=N_ABS_U_START
:C:     ELSE
:C:       X_POS=N_ABS_X_START
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     MACH(REG_F)=0
:C:     IF TURRET=FRONT THEN
:C:       X_POS=N_ABS_U_START
:C:       Z_POS=N_ABS_W_START
:C:       IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:         IF LEADIN=YES THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:         IF COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE AND P_MOVE_TYPE<>CW_ARC AND P_MOVE_TYPE<>CCW_ARC THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE) RETURN
:C:         ENDIF
:C:       ENDIF
:C:       CALL(LINE_MOVE_LATHE)
:C:     ELSE
:C:       X_POS=N_ABS_X_START
:C:       Z_POS=N_ABS_Z_START
:C:       IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:         IF LEADIN=YES THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:         IF COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE AND P_MOVE_TYPE<>CW_ARC AND P_MOVE_TYPE<>CCW_ARC THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE) RETURN
:C:         ENDIF
:C:       ENDIF
:C:       CALL(LINE_MOVE_LATHE)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
*
*** This is for Face canned roughing cycles ***
:C:   IF OPR_CYCLE_TYPE=FACING THEN
:C:     IF CAMWORKS_VER=CAM_REV2019_SP2 OR CAMWORKS_VER>CAM_REV2019_SP2 THEN
:C:       IF OPR_START_APPROACH_TYPE=FROM_APPROACH_POS THEN
:C:         X_POS=OPR_X_APPROACH_POS
:C:         Z_POS=OPR_Z_APPROACH_POS
:C:         CALL(CALC_POSITION_TO_APPROACH_POINT)
:C:         IF TURRET=FRONT THEN
:C:           X_POS=ABS_U_START
:C:           Z_POS=ABS_W_END
:C:         ELSE
:C:           X_POS=ABS_X_START
:C:           Z_POS=ABS_Z_END
:C:         ENDIF
:C:       ELSE
:C:         IF TURRET=FRONT THEN
:C:           X_POS=ABS_U_START
:C:           Z_POS=ABS_W_END
:C:         ELSE
:C:           X_POS=ABS_X_START
:C:           Z_POS=ABS_Z_END
:C:         ENDIF
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:         X_POS=ABS_U_START
:C:         Z_POS=ABS_W_END
:C:       ELSE
:C:         X_POS=ABS_X_START
:C:         Z_POS=ABS_Z_END
:C:       ENDIF
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     CALL(CALC_OUTPUT_BEFORE_FEED_SYNC_BEFORE_CANNED_CYCLE)
:C:     IF TURRET=FRONT THEN
:C:       IF SECTIONEXIST(CANNED_ROUGH_FACE_FRONT) THEN
:C:         CALL(CANNED_ROUGH_FACE_FRONT)
:C:       ELSE
:C:         CALL(CANNED_ROUGH_FACE)
:C:       ENDIF
:C:     ELSE
:C:       CALL(CANNED_ROUGH_FACE)
:C:     ENDIF
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=N_ABS_W_START
:C:     ELSE
:C:       Z_POS=N_ABS_Z_START
:C:     ENDIF
:C:     CALL(CALC_POSITION_TO_START)
:C:     MACH(REG_F)=0
:C:     IF TURRET=FRONT THEN
:C:       X_POS=N_ABS_U_START
:C:       Z_POS=N_ABS_W_START
:C:       IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:         IF LEADIN=YES THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:         IF COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE AND P_MOVE_TYPE<>CW_ARC AND P_MOVE_TYPE<>CCW_ARC THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE) RETURN
:C:         ENDIF
:C:       ENDIF
:C:       CALL(LINE_MOVE_LATHE)
:C:     ELSE
:C:       X_POS=N_ABS_X_START
:C:       Z_POS=N_ABS_Z_START
:C:       IF SECTIONEXIST(LINE_LEADIN_MOVE_LATHE) THEN
:C:         IF LEADIN=YES THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE)
:C:           RETURN
:C:         ENDIF
:C:         IF COMP<>GC(G_COMP_OFF) AND P_MOVE_TYPE<>LINE AND P_MOVE_TYPE<>CW_ARC AND P_MOVE_TYPE<>CCW_ARC THEN
:C:           CALL(LINE_LEADIN_MOVE_LATHE) RETURN
:C:         ENDIF
:C:       ENDIF
:C:       CALL(LINE_MOVE_LATHE)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C: ELSE
:C:   CURRENT_POST_CYCLE_TYPE=SYSTEM
:C:   SYS_CANNED(2,SYSTEM)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_END_BOUNDARY_LATHE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=22 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(END_BOUNDARY) THEN
:C:   CALL(END_BOUNDARY)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OD_END_BOUNDARY
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=23 CALL(DEBUG)
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:   IF SECTIONEXIST(CALC_END_BOUNDARY_RETRACT) THEN
:C:     CALL(CALC_END_BOUNDARY_RETRACT)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*** OPR_END_RETRACT_TYPE=NONE  = 0 ***
*** OPR_END_RETRACT_TYPE=XZPOS = 1 ***
*** OPR_END_RETRACT_TYPE=HOME  = 2 ***
*** OPR_END_RETRACT_TYPE=BOTH  = 4 ***
*
:C: IF OPR_END_RETRACT_TYPE=NONE THEN
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:   IF TURRET=FRONT THEN
:C:     X_POS=u_preset  CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     Z_POS=w_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     X_POS=x_preset  CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     Z_POS=z_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:   IF TURRET=FRONT THEN
:C:     X_POS=(-OPR_X_POSITION) CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     Z_POS=OPR_Z_POSITION    CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     X_POS=OPR_X_POSITION    CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     Z_POS=OPR_Z_POSITION    CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:   IF TURRET=FRONT THEN
:C:     X_POS=(-OPR_X_POSITION) CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     Z_POS=OPR_Z_POSITION    CALL(CALC_RAPID_END_BOUNDARY)
:C:     X_POS=u_preset
:C:     Z_POS=w_preset          CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     X_POS=OPR_X_POSITION    CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     Z_POS=OPR_Z_POSITION    CALL(CALC_RAPID_END_BOUNDARY)
:C:     X_POS=x_preset
:C:     Z_POS=z_preset          CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   X_POS=(-OPR_X_POSITION) CALL(RAPID_MOVE_LATHE)
:C: ELSE
:C:   X_POS=OPR_X_POSITION    CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   Z_POS=OPR_Z_POSITION  CALL(RAPID_MOVE_LATHE)
:C: ELSE
:C:   Z_POS=OPR_Z_POSITION  CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   Z_POS=w_preset
:C:   X_POS=u_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C: ELSE
:C:   Z_POS=z_preset
:C:  X_POS=x_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ID_END_BOUNDARY
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=24 CALL(DEBUG)
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:   IF SECTIONEXIST(RAPID_PULLOUT_X_MOVE_LATHE) THEN
:C:     CALL(CALC_END_BOUNDARY_RETRACT)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*** OPR_END_RETRACT_TYPE=NONE  = 0 ***
*** OPR_END_RETRACT_TYPE=XZPOS = 1 ***
*** OPR_END_RETRACT_TYPE=HOME  = 2 ***
*** OPR_END_RETRACT_TYPE=BOTH  = 4 ***
*
:C: IF OPR_END_RETRACT_TYPE=NONE THEN
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:   IF TURRET=FRONT THEN
:C:     Z_POS=w_preset  CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     X_POS=u_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     Z_POS=z_preset  CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     X_POS=x_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:   IF TURRET=FRONT THEN
:C:     Z_POS=OPR_Z_POSITION     CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     X_POS=(-OPR_X_POSITION)  CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     Z_POS=OPR_Z_POSITION   CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     X_POS=OPR_X_POSITION   CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:   IF TURRET=FRONT THEN
:C:     Z_POS=OPR_Z_POSITION     CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     X_POS=(-OPR_X_POSITION)  CALL(CALC_RAPID_END_BOUNDARY)
:C:     X_POS=u_preset
:C:     Z_POS=w_preset  CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     Z_POS=OPR_Z_POSITION
:C:     X_POS=OPR_X_POSITION  CALL(CALC_RAPID_END_BOUNDARY)
:C:     X_POS=x_preset
:C:     Z_POS=z_preset        CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   Z_POS=OPR_Z_POSITION CALL(RAPID_MOVE_LATHE)
:C: ELSE
:C:   Z_POS=OPR_Z_POSITION CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   X_POS=(-OPR_X_POSITION) CALL(RAPID_MOVE_LATHE)
:C: ELSE
:C:   X_POS=OPR_X_POSITION CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
:C: IF TURRET=FRONT THEN
:C:   Z_POS=w_preset
:C:   X_POS=u_preset CALL(CALC_RAPID_END_BOUNDARY)
:C: ELSE
:C:   Z_POS=z_preset
:C:   X_POS=x_preset CALL(CALC_RAPID_END_BOUNDARY)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_END_BOUNDARY_RETRACT
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=32 CALL(DEBUG)
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2018_SP5 THEN
:C:   CALL(CALC_END_BONDARY_RETRACT_MULTI_TURRET)
:C:   RETURN
:C: ENDIF
*
*** OPR_END_RETRACT_TYPE = NONE  = 0
*** OPR_END_RETRACT_TYPE = XZPOS = 1
*** OPR_END_RETRACT_TYPE = HOME  = 2
*** OPR_END_RETRACT_TYPE = BOTH  = 4
*
*** OPR_LATHE_RETRACT_STRATEGY = Z_THEN_X == 1
*** OPR_LATHE_RETRACT_STRATEGY = X_THEN_Z == 2
*** OPR_LATHE_RETRACT_STRATEGY = DIRECT ==== 3
*** OPR_LATHE_RETRACT_STRATEGY = X_ONLY ==== 4
*** OPR_LATHE_RETRACT_STRATEGY = Z_ONLY ==== 5
*
:C: IF OPR_END_RETRACT_TYPE=NONE THEN
:C:   RETURN
:C: ENDIF
*
* 2-28-19 Added below logic to handle user selecting "Auto" for the Retract Statagey
:C: IF CAMWORKS_VER>CAM_REV2016_SP2 THEN
:C:   IF OPR_END_RETRACT_TYPE=RT_AUTO THEN
:C:     CALL(CALC_OPERATION_RETRACT_AUTO)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=DIRECT THEN
:C:   IF OPR_END_RETRACT_TYPE=HOME THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C:   IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C:   IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X THEN
:C:   CALL(CALC_RETRACT_Z_THEN_X)
:C:   RETURN
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z THEN
:C:   CALL(CALC_RETRACT_X_THEN_Z)
:C:   RETURN
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2016_SP2 THEN
:C:   IF OPR_LATHE_RETRACT_STRATEGY=X_ONLY THEN
:C:     CALL(CALC_RETRACT_X)
:C:     RETURN
:C:   ENDIF
:C:   IF OPR_LATHE_RETRACT_STRATEGY=Z_ONLY THEN
:C:     CALL(CALC_RETRACT_Z)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=AUTO THEN
:C:   IF OPR_END_RETRACT_TYPE=HOME THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C:   IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C:   IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OPERATION_RETRACT_AUTO
:C: IF N_TOOL<>TOOL THEN
:C:   IF OPR_LATHE_RETRACT_STRATEGY=DIRECT THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:   ENDIF
*
:C:   IF OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     ENDIF
:C:   ENDIF
*
:C:   IF OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z THEN
:C:     IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     ENDIF
:C:   ENDIF
*
:C:   IF OPR_LATHE_RETRACT_STRATEGY=X_ONLY THEN
:C:     IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:     ENDIF
:C:   ENDIF
*
:C:   IF OPR_LATHE_RETRACT_STRATEGY=Z_ONLY THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:     ENDIF
:C:   ENDIF
:C:   IF TURRET=FRONT THEN
:C:     Z_POS=w_preset
:C:     X_POS=u_preset
:C:     CALL(CALC_RAPID_END_BOUNDARY)
:C:   ELSE
:C:     Z_POS=z_preset
:C:     X_POS=x_preset
:C:     CALL(CALC_RAPID_END_BOUNDARY)
:C:   ENDIF
:C:   RETURN
:C: ELSE
:C:   IF OPR_LATHE_RETRACT_STRATEGY=DIRECT THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:     ENDIF
:C:   ENDIF
*  Z then X
:C:   IF OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
*  X then Z
:C:   IF OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z THEN
:C:     IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:     ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
* Just X
:C:   IF OPR_LATHE_RETRACT_STRATEGY=X_ONLY THEN
:C:     IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:     ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
* Just Z
:C:   IF OPR_LATHE_RETRACT_STRATEGY=Z_ONLY THEN
:C:     IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:     ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OPERATION_RETRACT_AUTO_MULTI_TURRET
:C: IF N_TOOL<>TOOL THEN
:C:    IF OPR_LATHE_RETRACT_STRATEGY=DIRECT THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
*
:C:    IF OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
*
:C:    IF OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
*
:C:    IF OPR_LATHE_RETRACT_STRATEGY=X_ONLY THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
*
:C:    IF OPR_LATHE_RETRACT_STRATEGY=Z_ONLY THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF DSPINDLE=MAIN_SPINDLE THEN
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_w_preset
:C:       X_POS=front2_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_z_preset
:C:       X_POS=rear2_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_w_preset
:C:       X_POS=sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_z_preset
:C:       X_POS=sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_sub_w_preset
:C:       X_POS=front2_sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_sub_z_preset
:C:       X_POS=rear2_sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
:C: RETURN
:C: ELSE
* Direct
:C:    IF OPR_LATHE_RETRACT_STRATEGY=DIRECT THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
*  Z then X
:C:    IF OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
*  X then Z
:C:    IF OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
* Just X
:C:    IF OPR_LATHE_RETRACT_STRATEGY=X_ONLY THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
* Just Z
:C:    IF OPR_LATHE_RETRACT_STRATEGY=Z_ONLY THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_END_BONDARY_RETRACT_MULTI_TURRET
*
******* OPR_END_RETRACT_TYPE=NONE  = 0
******* OPR_END_RETRACT_TYPE=XZPOS = 1
******* OPR_END_RETRACT_TYPE=HOME  = 2
******* OPR_END_RETRACT_TYPE=BOTH  = 4
*
******* OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X
******* OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z
******* OPR_LATHE_RETRACT_STRATEGY=DIRECT
******* OPR_LATHE_RETRACT_STRATEGY=X_ONLY
******* OPR_LATHE_RETRACT_STRATEGY=Z_ONLY
*
******* Z_THEN_X=1
******* X_THEN_Z=2
******* DIRECT=3
******* X_ONLY=4
******* Z_ONLY=5
*
* 8-8-18 added support for rear2_x_preset, rear2_z_preaset, rear_sub_x_preset, rear_sub_z_preset
* front2_x_preset, front2_z_preaset, front2_sub_u_preset and front2_sub_w_preset
*
:C: IF OPR_END_RETRACT_TYPE=NONE THEN RETURN ENDIF
*
* 2-28-19 Added below logic to handle user selecting "Auto" for the Retract Type
:C: IF OPR_END_RETRACT_TYPE=RT_AUTO THEN
:C: CALL(CALC_OPERATION_RETRACT_AUTO_MULTI_TURRET)
:C: RETURN
:C: ENDIF
*
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=DIRECT THEN
:C:    IF OPR_END_RETRACT_TYPE=HOME THEN
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
*
:C:    IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
*
:C:    IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=Z_THEN_X THEN
:C: CALL(CALC_RETRACT_Z_THEN_X_MULTI_TURRET)
:C: RETURN
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=X_THEN_Z THEN
:C: CALL(CALC_RETRACT_X_THEN_Z_MULTI_TURRET)
:C: RETURN
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2016_SP2 THEN
:C:    IF OPR_LATHE_RETRACT_STRATEGY=X_ONLY THEN
:C:    CALL(CALC_RETRACT_X_MULTI_TURRET)
:C:    RETURN
:C:    ENDIF
*
:C:    IF OPR_LATHE_RETRACT_STRATEGY=Z_ONLY THEN
:C:    CALL(CALC_RETRACT_Z_MULTI_TURRET)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_RETRACT_STRATEGY=AUTO THEN
:C:    IF OPR_END_RETRACT_TYPE=HOME THEN
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C:    IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C:    IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF

:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_END_BOUNDARY)
:C:          ENDIF
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_X
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
:C: RETURN
*
*  we are not supporting AUTO at this time
:C: IF OPR_END_RETRACT_TYPE=AUTO THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=AUTO THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_X_MULTI_TURRET
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF DSPINDLE=MAIN_SPINDLE THEN
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_w_preset
:C:       X_POS=front2_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_z_preset
:C:       X_POS=rear2_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_w_preset
:C:       X_POS=sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_z_preset
:C:       X_POS=sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_sub_w_preset
:C:       X_POS=front2_sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_sub_z_preset
:C:       X_POS=rear2_sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: RETURN
*
*  we are not supporting AUTO at this time
:C: IF OPR_END_RETRACT_TYPE=AUTO THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=AUTO THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_Z
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=z_preset
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=z_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
:C: RETURN
*
*  we are not supporting AUTO at this time
:C: IF OPR_END_RETRACT_TYPE=AUTO THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_Z_MULTI_TURRET
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
*
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF DSPINDLE=MAIN_SPINDLE THEN
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_w_preset
:C:       X_POS=front2_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_z_preset
:C:       X_POS=rear2_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_w_preset
:C:       X_POS=sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_z_preset
:C:       X_POS=sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_sub_w_preset
:C:       X_POS=front2_sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_sub_z_preset
:C:       X_POS=rear2_sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: RETURN
*
*  we are not supporting AUTO at this time
:C: IF OPR_END_RETRACT_TYPE=AUTO THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_Z_THEN_X
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=z_preset
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=w_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=z_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_Z_THEN_X_MULTI_TURRET
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:       RETURN
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          CALL(CALC_RAPID_TO_Z_MOVE)
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:       RETURN
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          Z_POS=sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          Z_POS=front2_sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          Z_POS=rear2_sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          ENDIF
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_TO_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ELSE
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF DSPINDLE=MAIN_SPINDLE THEN
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_w_preset
:C:       X_POS=front2_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_z_preset
:C:       X_POS=rear2_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_w_preset
:C:       X_POS=sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_z_preset
:C:       X_POS=sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_sub_w_preset
:C:       X_POS=front2_sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_sub_z_preset
:C:       X_POS=rear2_sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_X_THEN_Z
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=w_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=z_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=w_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=z_preset
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF TURRET=FRONT THEN
:C:    Z_POS=w_preset
:C:    X_POS=u_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ELSE
:C:    Z_POS=z_preset
:C:    X_POS=x_preset
:C:    CALL(CALC_RAPID_END_BOUNDARY)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RETRACT_X_THEN_Z_MULTI_TURRET
:C: IF OPR_END_RETRACT_TYPE=HOME THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=front2_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=rear2_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=front2_sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_TO_X_MOVE)
:C:          Z_POS=rear2_sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ENDIF
:C:    ELSE
:C:       IF DSPINDLE=MAIN_SPINDLE THEN
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=front2_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=rear2_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ELSE
:C:          IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:          X_POS=sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:          X_POS=sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:          X_POS=front2_sub_u_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=front2_sub_w_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:          IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:          X_POS=rear2_sub_x_preset
:C:          CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:          Z_POS=rear2_sub_z_preset
:C:          CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:          RETURN
:C:          ENDIF
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=XZPOS THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       RETURN
:C:       ENDIF
:C:     ENDIF
:C: ENDIF
:C: IF OPR_END_RETRACT_TYPE=BOTH THEN
:C:    IF N_TOOL<>TOOL THEN
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_TO_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT THEN
:C:       X_POS=(-OPR_X_POSITION)
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ELSE
:C:       X_POS=OPR_X_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_X_MOVE)
:C:       Z_POS=OPR_Z_POSITION
:C:       CALL(CALC_RAPID_PULLOUT_Z_MOVE)
:C:       ENDIF
:C:    ENDIF
:C:    IF DSPINDLE=MAIN_SPINDLE THEN
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=w_preset
:C:       X_POS=u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=z_preset
:C:       X_POS=x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_w_preset
:C:       X_POS=front2_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_z_preset
:C:       X_POS=rear2_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ELSE
:C:       IF TURRET=FRONT AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_w_preset
:C:       X_POS=sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=1 THEN
:C:       Z_POS=sub_z_preset
:C:       X_POS=sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=FRONT AND TURRET_NUM=2 THEN
:C:       Z_POS=front2_sub_w_preset
:C:       X_POS=front2_sub_u_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:       IF TURRET=REAR AND TURRET_NUM=2 THEN
:C:       Z_POS=rear2_sub_z_preset
:C:       X_POS=rear2_sub_x_preset
:C:       CALL(CALC_RAPID_END_BOUNDARY)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_TO_Z_MOVE
:C: IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE_Z) THEN
:C: CALL(RAPID_TO_TOOL_CHANGE_LATHE_Z)
:C: ELSE
:C: CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_TO_X_MOVE
:C: IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_LATHE_X) THEN
:C:   CALL(RAPID_TO_TOOL_CHANGE_LATHE_X)
:C: ELSE
:C:   CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_END_BOUNDARY
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=25 CALL(DEBUG)
:C: ENDIF
*
:C: IF N_TOOL<>TOOL THEN
:C:   IF SECTIONEXIST(RAPID_TO_TOOL_CHANGE_FRONT) THEN
:C:     IF TURRET=FRONT THEN
:C:     CALL(RAPID_TO_TOOL_CHANGE_FRONT)
:C:     ELSE
:C:     CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:     ENDIF
:C:   ELSE
:C:   CALL(RAPID_TO_TOOL_CHANGE_LATHE)
:C:   ENDIF
:C: ELSE CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_PULLOUT_X_MOVE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=26 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(RAPID_PULLOUT_X_MOVE_LATHE) THEN
:C: CALL(RAPID_PULLOUT_X_MOVE_LATHE)
:C: ELSE
:C: CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_RAPID_PULLOUT_Z_MOVE
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=27 CALL(DEBUG)
:C: ENDIF
*
:C: IF SECTIONEXIST(RAPID_PULLOUT_Z_MOVE_LATHE) THEN
:C: CALL(RAPID_PULLOUT_Z_MOVE_LATHE)
:C: ELSE
:C: CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_POSITION_TO_APPROACH_POINT
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=28 CALL(DEBUG)
:C: ENDIF
*
:C: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:    IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_LATHE) THEN
:C:    CALL(RAPID_FROM_TOOL_CHANGE_LATHE)
:C:    P_MOVE_TYPE=RAPID
:C:    RETURN
:C:    ELSE
:C:       IF SECTIONEXIST(RAPID_MOVE_LATHE) THEN
:C:       CALL(RAPID_MOVE_LATHE)
:C:       ENDIF
:C:    RETURN
:C:    ENDIF
:C: ELSE
:C:    IF SECTIONEXIST(RAPID_MOVE_LATHE) THEN
:C:    CALL(RAPID_MOVE_LATHE)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_POSITION_TO_START
:C: IF SECTIONEXIST(DEBUG) THEN
:C:   DEBUG=28 CALL(DEBUG)
:C: ENDIF
*
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:    IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:    CALL(CALC_POSITION_TO_START_APPROACH)
:C:    RETURN
:C:    ENDIF
:C: ENDIF
:C: IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:    IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_LATHE) THEN
:C:    CALL(RAPID_FROM_TOOL_CHANGE_LATHE)
:C:    P_MOVE_TYPE=RAPID
:C:    RETURN
:C:    ELSE
:C:    CALL(RAPID_MOVE_LATHE)
:C:    RETURN
:C:    ENDIF
:C: ELSE
:C: CALL(RAPID_MOVE_LATHE)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_POSITION_TO_START_APPROACH
*
****** OPR_LATHE_APPROACH_STRATEGY=Z_THEN_X
****** OPR_LATHE_APPROACH_STRATEGY=X_THEN_Z
****** OPR_LATHE_APPROACH_STRATEGY=DIRECT
****** OPR_LATHE_APPROACH_STRATEGY=AUTO
****** Z_THEN_X=1
****** X_THEN_Z=2
****** DIRECT=3
****** X_ONLY=4
****** Z_ONLY=5
****** AUTO=0
*
:C: IF OPR_LATHE_APPROACH_STRATEGY=DIRECT THEN
:C:    IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:       IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_LATHE) THEN
:C:       CALL(RAPID_FROM_TOOL_CHANGE_LATHE)
:C:       P_MOVE_TYPE=RAPID
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:    CALL(RAPID_MOVE_LATHE)
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_APPROACH_STRATEGY=Z_THEN_X THEN
:C:    IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:       IF SECTIONEXIST(RAPID_MOVE_LATHE_X_FROM_TC) THEN
:C:       CALL(RAPID_MOVE_LATHE_Z_FROM_TC)
:C:       CALL(RAPID_MOVE_LATHE_X)
:C:       P_MOVE_TYPE=RAPID
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       ENDIF
:C:    ELSE
:C:       IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:       CALL(RAPID_MOVE_LATHE_Z)
:C:       CALL(RAPID_MOVE_LATHE_X)
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_APPROACH_STRATEGY=X_THEN_Z THEN
:C:    IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:       IF SECTIONEXIST(RAPID_MOVE_LATHE_X_FROM_TC) THEN
:C:       CALL(RAPID_MOVE_LATHE_X_FROM_TC)
:C:       CALL(RAPID_MOVE_LATHE_Z)
:C:       P_MOVE_TYPE=RAPID
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:       IF SECTIONEXIST(RAPID_MOVE_LATHE_X) THEN
:C:       CALL(RAPID_MOVE_LATHE_X)
:C:       CALL(RAPID_MOVE_LATHE_Z)
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       ENDIF
:C:    ENDIF
:C: ENDIF
*
:C: IF OPR_LATHE_APPROACH_STRATEGY=AUTO THEN
:C:    IF P_MOVE_TYPE=TOOL_CHANGE THEN
:C:       IF SECTIONEXIST(RAPID_FROM_TOOL_CHANGE_LATHE) THEN
:C:       CALL(RAPID_FROM_TOOL_CHANGE_LATHE)
:C:       P_MOVE_TYPE=RAPID
:C:       RETURN
:C:       ELSE
:C:       CALL(RAPID_MOVE_LATHE)
:C:       RETURN
:C:       ENDIF
:C:    ELSE
:C:    CALL(RAPID_MOVE_LATHE)
:C:    ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_BEFORE_ATTRIBUTES
:C: CALL(BEFORE_ATTRIBUTES)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_DURING_ATTRIBUTES
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_AFTER_ATTRIBUTES
:C: CALL(AFTER_ATTRIBUTES)

*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SETUP_SHEET
:C: IF SETUP_CONFIG<>0 THEN RETURN ENDIF
:C: EOL={}
:C: SPACES(YES)
:C: CALL(SETUP_SHEET_LATHE)
:C: IF CW_TIME=0 THEN
:C:    IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:    CALL(OUTPUT_ESTIMATED_TIME)
:C:    ENDIF
:C: ELSE
:C: TIME_HOURS=CW_TIME_HOURS
:C: TIME_MINUTES=CW_TIME_MINUTES
:C: TIME_SECONDS=CW_TIME_SECONDS
:C:    IF SECTIONEXIST(OUTPUT_ESTIMATED_TIME) THEN
:C:    CALL(OUTPUT_ESTIMATED_TIME)
:C:    ENDIF
:C: ENDIF
:C: GETTOOLS(2,SYSTEM)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
*     G74 High Speed Pecking Cycle Time
*
:SECTION=CALC_DRILL_MACHINE_TIME
:C: IF TURRET=FRONT THEN
:C:   X_INC=INC_U_END
:C:   X_START=ABS_U_START
:C:   X_END=ABS_U_END
:C:   Z_INC=INC_W_END
:C:   Z_START=ABS_W_START
:C:   Z_END=ABS_W_END
:C: ELSE
:C:   X_INC=INC_X_END
:C:   X_START=ABS_X_START
:C:   X_END=ABS_X_END
:C:   Z_INC=INC_Z_END
:C:   Z_START=ABS_Z_START
:C:   Z_END=ABS_Z_END
:C: ENDIF
*
:C: Z_DISTANCE=0
*
*** 1st Pass ***
:C: Z_DISTANCE=OPR_Z_SUB_PECK
:C: TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE)
:C: Z_SAVE=(OPR_Z_PART_CLEARANCE-OPR_Z_SUB_PECK)
:C: Z_DISTANCE=.01
:C: TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C: Z_DISTANCE=0
*
*** 2nd pass & cont. passes ***
:C1: Z_DISTANCE=OPR_Z_SUB_PECK
:C:  IF (Z_SAVE-OPR_Z_SUB_PECK)<OPR_Z_DEPTH THEN
:C:    Z_DISTANCE=(Z_SAVE-OPR_Z_DEPTH)
:C:  ENDIF
:C:  Z_SAVE=(Z_SAVE-OPR_Z_SUB_PECK)
:C:  TOTAL_Z_FEED=(TOTAL_Z_FEED+Z_DISTANCE+.01)
:C:  Z_DISTANCE=.01
:C:  TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C:  IF Z_SAVE<OPR_Z_DEPTH THEN
:C:    GOTO9
:C:  ENDIF
:C:  GOTO1
*
:C9: Z_DISTANCE=((OPR_Z_CLEARANCE-OPR_Z_DEPTH)-.01)
:C:  TOTAL_Z_RAPID=(TOTAL_Z_RAPID+Z_DISTANCE)
:C:  CALL(CALC_ESTIMATE_MACHINE_TIME)
:C:  CALL(CALC_ESTIMATE_RAPID_TIME)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_TOOL_CHANGE_TIME
:C: CALC_TIME=(CALC_TIME+.167)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ESTIMATE_RAPID_TIME
:C: CALC_DISTANCE=DISTANCE
:C: IF OPR_TYPE=LATHE_DRILLING AND CURRENT_POST_CYCLE_TYPE=MACHINE THEN
:C:   CALC_DISTANCE=TOTAL_Z_RAPID
:C: ENDIF
:C: IF CALC_DISTANCE<.0001 THEN
:C:   RETURN
:C: ENDIF
*
:C: XY_TIME=(XY_TIME+(DISTANCE/TRAVERSE_RATE))
:C: CALC_TIME=(CALC_TIME+(DISTANCE/TRAVERSE_RATE))
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ESTIMATE_MACHINE_TIME
:C: IF TURRET=FRONT THEN
:C:   X_INC=INC_U_END
:C:   X_START=ABS_U_START
:C:   X_END=ABS_U_END
:C:   Z_INC=INC_W_END
:C:   Z_START=ABS_W_START
:C:   Z_END=ABS_W_END
:C: ELSE
:C:   X_INC=INC_X_END
:C:   X_START=ABS_X_START
:C:   X_END=ABS_X_END
:C:   Z_INC=INC_Z_END
:C:   Z_START=ABS_Z_START
:C:   Z_END=ABS_Z_END
:C: ENDIF
*
:C: CALC_DISTANCE=DISTANCE
:C: IF OPR_TYPE=LATHE_DRILLING AND CURRENT_POST_CYCLE_TYPE=MACHINE THEN
:C:   CALC_DISTANCE=TOTAL_Z_FEED
:C: ENDIF
:C: IF CALC_DISTANCE<.0001 THEN RETURN ENDIF
:C: IF OPR_FEED_FPR=0 AND OPR_FEED_FPM=0 THEN RETURN ENDIF
:C: IF OPR_FEED_TYPE=1 AND OPR_FEED_FPR=0 THEN RETURN ENDIF
:C: IF OPR_FEED_TYPE=2 AND OPR_FEED_FPM=0 THEN RETURN ENDIF
:C: IF OPR_SPEED_TYPE=1 AND OPR_SPEED_SFPM=0 THEN RETURN ENDIF
:C: IF OPR_SPEED_TYPE=2 AND OPR_SPEED_RPM=0 THEN RETURN ENDIF
*
*** Constant Surface Feed Per Minute ***
:C: IF OPR_FEED_TYPE<>1 THEN GOTO2 ENDIF
:C: IF OPR_SPEED_TYPE=2 THEN CALC_RPM=OPR_SPEED_RPM GOTO1 ENDIF
:C: IF (ABS(X_INC))>0 THEN
:C:   AVERAGE_DISTANCE=((X_INC/2)+X_START)
:C: ENDIF
:C: IF (ABS(X_INC))<.0001 THEN
:C:   AVERAGE_DISTANCE=X_END
:C: ENDIF
:C: IF AVERAGE_DISTANCE=0 THEN AVERAGE_DISTANCE=.001 ENDIF
:C: IF OPR_TYPE=LATHE_DRILLING AND CURRENT_POST_CYCLE_TYPE=MACHINE THEN
:C:   AVERAGE_DISTANCE=.001
:C: ENDIF
:C: CALC_RPM=((OPR_SPEED_SFPM*12)/(ABS((AVERAGE_DISTANCE*2)*PI)))
:C: IF CALC_RPM>maximum_rpm THEN CALC_RPM=maximum_rpm ENDIF
:C: IF CALC_RPM=0 THEN CALC_RPM=3000 ENDIF
*
:C1: CALC_FEEDRATE=(OPR_FEED_FPR*CALC_RPM)
:C:  IF OPR_TYPE=LATHE_THREADING THEN
:C:  CALC_FEEDRATE=(OPR_THREAD_PITCH*CALC_RPM) ENDIF
:C:  GOTO3
*
*** Direct RPM ***
:C2: CALC_FEEDRATE=OPR_FEED_FPM
*
:C3: XY_TIME=(XY_TIME+(CALC_DISTANCE/CALC_FEEDRATE))
:C:  CALC_TIME=(CALC_TIME+(CALC_DISTANCE/CALC_FEEDRATE))
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_CW_ESTIMATED_MACHINE_TIME
:C: IF CAMWORKS_VER>CAM_REV2012_PLUS THEN
:C:   QUERY_ITEM_ID=QUERY_DEC_OPER_TIME
:C:   QUERY_SYSTEM()
:C:   IF QUERY_RESULT=1 THEN
:C:     CW_TIME=(CW_TIME+QUERY_DEC_VAL)
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_TOTAL_TIME
:C: IF CALC_TIME>60 THEN
:C:   TIME_HOURS=(CALC_TIME/60)
:C:   CALC_TIME=(CALC_TIME-(TIME_HOURS*60))
:C: ENDIF
:C: TIME_MINUTES=CALC_TIME
:C: TIME_SECONDS=((CALC_TIME-TIME_MINUTES)*60)
*
:C: IF CW_TIME>0 THEN
:C:   IF CW_TIME>60 THEN
:C:     CW_TIME_HOURS=(CW_TIME/60)
:C:     CW_TIME=(CW_TIME-(CW_TIME_HOURS*60))
:C:   ENDIF
:C:   CW_TIME_MINUTES=CW_TIME
:C:   CW_TIME_SECONDS=((CW_TIME-CW_TIME_MINUTES)*60)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ROUNDING_POINT
:C: IF METRIC_OUT=2 THEN
:C:   GOTO5
:C: ENDIF
:C: ROUNDING_POINT=.5
:C: LOOP=0
*
:C1: LOOP=(LOOP+1)
:C:  ROUNDING_POINT=(ROUNDING_POINT/10)
:C:  IF LOOP<G_RIGHT_PLACES THEN
:C:    GOTO1
:C:  ENDIF
:C:  RETURN
*
:C5: ROUNDING_POINT=.5
:C:  LOOP=0
*
:C6: LOOP=(LOOP+1)
:C:  ROUNDING_POINT=(ROUNDING_POINT/10)
:C:  IF LOOP<(G_RIGHT_PLACES-1) THEN
:C:    GOTO6
:C:  ENDIF
:C:  ROUNDING_POINT=(ROUNDING_POINT/25.4)
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ENGMET
:C: ENGMET=GC(G_ENGLISH)
:C: IF METRIC_OUT=2 THEN
:C:   ENGMET=GC(G_METRIC)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ABS_INC
:C: IF abs_inc=2 THEN
:C:   ABSINC=GC(G_INC)
:C:   G_GROUP(GG(G_INC))=GC(G_INC)
:C:   CURRENT_MODE=2
:C: ENDIF
:C: IF abs_inc=1 THEN
:C:   ABSINC=GC(G_ABS)
:C:   G_GROUP(GG(G_ABS))=GC(G_ABS)
:C:   CURRENT_MODE=1
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_FEED_TYPE
:C: IF OPR_FEED_TYPE=1 THEN
:C:   FEED_TYPE=GC(G_FPR)
:C: ENDIF
:C: IF OPR_FEED_TYPE=2 THEN
:C:   FEED_TYPE=GC(G_FPM)
:C: ENDIF
:C: IF OPR_TYPE=LATHE_THREADING THEN
:C:   FEED_TYPE=GC(G_FPR)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SLOWDOWN_SPEED
:C: IF CAMWORKS_VER>CAM_REV2006EX THEN
:C:   CALL(CALC_SPEED_TYPE)
:C:   IF SAVE_SPEED<>OPR_SPEED THEN
:C:     SETON(<G>)
:C:     SETON(<S>)
:C:   ENDIF
:C:   IF SAVE_SPEED_TYPE<>OPR_SPEED_TYPE THEN
:C:     SETON(<G>)
:C:     SETON(<S>)
:C:   ENDIF
:C:   IF SECTIONEXIST(CHANGE_SPEED) THEN
:C:     CALL(CHANGE_SPEED)
:C:   ENDIF
:C:   SAVE_SPEED=OPR_SPEED
:C:   SAVE_SPEED_TYPE=OPR_SPEED_TYPE
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SPEED_TYPE
:C: IF OPR_SPEED_TYPE=1 THEN
:C:   SPEED_TYPE=GC(G_SFPM)
:C:   IF NEW_SFPM=0 THEN
:C:     IF METRIC_OUT=2 THEN
:C:       OPR_SPEED=((OPR_SPEED_SFPM*25.4)/1000)
:C:     ELSE
:C:       OPR_SPEED=OPR_SPEED_SFPM
:C:     ENDIF
:C:   ELSE
:C:     OPR_SPEED=OPR_SPEED_SFPM
:C:   ENDIF
:C: ENDIF
:C: IF OPR_SPEED_TYPE=2 THEN
:C:   SPEED_TYPE=GC(G_RPM)
:C:   OPR_SPEED=OPR_SPEED_RPM
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_SPINDLE_DIR
:C: IF OPR_SPEED_DIR=1 THEN
:C:   SPINDLE_DIR=MC(M_SPIN_CW)
:C: ELSE
:C:   SPINDLE_DIR=MC(M_SPIN_CCW)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_DWELL(INUM,MACH,DNUM)
:C: INUM=(DNUM*1000)
:C: SETOFF()
:C: IF OPR_TYPE<>LATHE_DRILLING THEN
:C:   RETURN
:C: ENDIF
:C: IF MACH(REG_X)<>0 THEN
:C:   RETURN
:C: ENDIF
:C: IF (MACH(REG_Z)-PREV(REG_Z))<0 THEN
:C:   RETURN
:C: ENDIF
:C: IF DNUM=0 THEN
:C:   RETURN
:C: ENDIF
:C: SETON()
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OUTPUT_DWELL
:C: IF CAMWORKS_VER<CAM_REV2008 THEN
:C:   RETURN
:C: ELSE
:C:   IF SECTIONEXIST(OUTPUT_DWELL) THEN
:C:     CALL(OUTPUT_DWELL)
:C:   ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ADD_REAR_SYNC_CODE
:C: IF SECTIONEXIST(ADD_REAR_SYNC_CODE) THEN
:C:   CALL(ADD_REAR_SYNC_CODE)
:C: ELSE
*  this outputs error message to CAMWorks error message box
*  stating that the compiled SRC file does not support Auto Sync Codes.
:C: QUERY_ITEM_ID= QUERY_EXPORT_ERROR
:C: QUERY_ERROR= HAVE_SYNC_CODE_ERROR
:C: QUERY_SYSTEM()
:C: ENDIF
* SYNC_CODE_COMMENT
* REAR_SYNC_CODE
* P_REAR_SYNC_CODE
* REAR_SYNC_CODE_TYPE
*           SYNC_CODE_UNKNOWN           =0
*           SYNC_CODE_BEFORE_START      =1
*           SYNC_CODE_BEFORE_FIRST_MOVE =2
*           SYNC_CODE_AFTER_END         =3
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_ADD_FRONT_SYNC_CODE
:C: IF SECTIONEXIST(ADD_FRONT_SYNC_CODE) THEN
:C:   CALL(ADD_FRONT_SYNC_CODE)
:C: ELSE
*  this outputs error message to CAMWorks error message box
*  stating that the compiled SRC file does not support Auto Sync Codes.
:C:   QUERY_ITEM_ID= QUERY_EXPORT_ERROR
:C:   QUERY_ERROR= HAVE_SYNC_CODE_ERROR
:C:   QUERY_SYSTEM()
:C: ENDIF
* SYNC_CODE_COMMENT
* FRONT_SYNC_CODE
* P_FRONT_SYNC_CODE
* FRONT_SYNC_CODE_TYPE
*           SYNC_CODE_UNKNOWN           =0
*           SYNC_CODE_BEFORE_START      =1
*           SYNC_CODE_BEFORE_FIRST_MOVE =2
*           SYNC_CODE_AFTER_END         =3
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_OUTPUT_BEFORE_FEED_SYNC_BEFORE_CANNED_CYCLE
:C: IF CAMWORKS_VER<CAM_REV2019 THEN
:C:   RETURN
:C: ENDIF
:C: IF HAVE_FIRST_FEED_SYNC_CODES=TRUE THEN
:C:   OUTPUT_FIRST_FEED_SYNC_CODES()
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
* New Sub Spindle operations
* OPR_TYPE=1030 for Turn spindle operation
*--------------------------------------------------------------
:SECTION=CALC_OUTPUT_SPINDLE_STATE
:C: IF SECTIONEXIST(OUTPUT_SPINDLE_STATE) THEN
:C:   CALL(OUTPUT_SPINDLE_STATE)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_SPINDLE_ORIENTATION
:C: IF SECTIONEXIST(OUTPUT_SPINDLE_ORIENTATION) THEN
:C:   CALL(OUTPUT_SPINDLE_ORIENTATION)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_SPINDLE_COMMENT
:C: IF SECTIONEXIST(OUTPUT_SPINDLE_COMMENT) THEN
:C:   CALL(OUTPUT_SPINDLE_COMMENT)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_SPINDLE_COMMAND
:C: IF SECTIONEXIST(OUTPUT_SPINDLE_COMMAND) THEN
:C:   CALL(OUTPUT_SPINDLE_COMMAND)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_CHUCK_OPEN
:C: IF SECTIONEXIST(OUTPUT_CHUCK_OPEN) THEN
:C:   CALL(OUTPUT_CHUCK_OPEN)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_CHUCK_CLOSE
:C: IF SECTIONEXIST(OUTPUT_CHUCK_CLOSE) THEN
:C:   CALL(OUTPUT_CHUCK_CLOSE)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_ARBOR_OPEN
:C: IF SECTIONEXIST(OUTPUT_ARBOR_OPEN) THEN
:C:   CALL(OUTPUT_ARBOR_OPEN)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_ARBOR_CLOSE
:C: IF SECTIONEXIST(OUTPUT_ARBOR_CLOSE) THEN
:C:   CALL(OUTPUT_ARBOR_CLOSE)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_COLLET_OPEN
:C: IF SECTIONEXIST(OUTPUT_COLLET_OPEN) THEN
:C:   CALL(OUTPUT_COLLET_OPEN)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_COLLET_CLOSE
:C: IF SECTIONEXIST(OUTPUT_COLLET_CLOSE) THEN
:C:   CALL(OUTPUT_COLLET_CLOSE)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_FEEDRATE
:C: IF SECTIONEXIST(OUTPUT_FEEDRATE) THEN
:C:   CALL(CALC_FEED_TYPE)
:C:   CALL(OUTPUT_FEEDRATE)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_SPEED
:C: IF SECTIONEXIST(OUTPUT_SPEED) THEN
:C:   CALL(CALC_SPEED_TYPE)
:C:   CALL(OUTPUT_SPEED)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_REFERENCE_POINT
:C: IF SECTIONEXIST(OUTPUT_REFERENCE_POINT) THEN
:C:   CALL(OUTPUT_REFERENCE_POINT)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_RAPID_SPINDLE_TO_POSITION
:C: IF SECTIONEXIST(OUTPUT_RAPID_SPINDLE_TO_POSITION) THEN
:C:   CALL(OUTPUT_RAPID_SPINDLE_TO_POSITION)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_FEED_SPINDLE_TO_POSITION
:C: IF SECTIONEXIST(OUTPUT_FEED_SPINDLE_TO_POSITION) THEN
:C:   OPR_FEED_TYPE=2
:C:   FEED_TYPE=GC(G_FPM)
:C:   CALL(OUTPUT_FEED_SPINDLE_TO_POSITION)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_SPINDLE_SYNC
:C: IF SECTIONEXIST(OUTPUT_SPINDLE_SYNC) THEN
:C:   CALL(OUTPUT_SPINDLE_SYNC)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_RAPID_SPINDLE_TO_HOME
:C: IF SECTIONEXIST(OUTPUT_RAPID_SPINDLE_TO_HOME) THEN
:C:   CALL(OUTPUT_RAPID_SPINDLE_TO_HOME)
:C: ENDIF
*
*-----------------------------------
:SECTION=CALC_OUTPUT_FEED_SPINDLE_TO_HOME
:C: IF SECTIONEXIST(OUTPUT_FEED_SPINDLE_TO_HOME) THEN
:C:   CALL(OUTPUT_FEED_SPINDLE_TO_HOME)
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
************ QUERY POST DATA *******************
:SECTION=CALC_QUERY_POST
:C: IF CAMWORKS_VER<CAM_REV2019 THEN
:C:   IF QUERY_ITEM_ID = QUERY_INT_NUM_TURRETS_ABOVE THEN QUERY_INT_VAL=1 RETURN ENDIF
:C:   IF QUERY_ITEM_ID = QUERY_INT_NUM_TURRETS_BELOW THEN QUERY_INT_VAL=1 RETURN ENDIF
:C: ELSE
:C:   IF QUERY_ITEM_ID = QUERY_INT_NUM_TURRETS_ABOVE THEN QUERY_INT_VAL=NUM_TURRETS_REAR RETURN ENDIF
:C:   IF QUERY_ITEM_ID = QUERY_INT_NUM_TURRETS_BELOW THEN QUERY_INT_VAL=NUM_TURRETS_FRONT RETURN ENDIF
:C: ENDIF
*
:C: IF QUERY_ITEM_ID = QUERY_GCODE_DEFAULT_WCS THEN
:C:   IF SECTIONEXIST(QUERY_WCS) THEN
:C:     IF CAMWORKS_VER>CAM_REV2013_SP2 AND CAMWORKS_VER<>CAM_REV2014 THEN
:C:       MCS_W_NAME={W}
:C:       IF SECTIONEXIST(CALC_SET_SUB_SPINDLE_AXIS_NAME) THEN
:C:         CALL(CALC_SET_SUB_SPINDLE_AXIS_NAME)
:C:       ENDIF
:C:     ENDIF
:C:     CALL(QUERY_WCS)
:C:     RETURN
:C:   ELSE
:C:     CALL(AUTO_QUERY_WCS)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
:C: IF QUERY_ITEM_ID = QUERY_GCODE_WCS THEN
:C:   IF CAMWORKS_VER>CAM_REV2013_SP2 AND CAMWORKS_VER<>CAM_REV2014 THEN
:C:     MCS_W_NAME={W}
:C:     IF SECTIONEXIST(CALC_SET_SUB_SPINDLE_AXIS_NAME) THEN
:C:       CALL(CALC_SET_SUB_SPINDLE_AXIS_NAME)
:C:     ENDIF
:C:   ENDIF
:C:   IF SECTIONEXIST(QUERY_WCS) THEN
:C:    CALL(QUERY_WCS)
:C:    RETURN
:C:   ELSE
:C:     CALL(AUTO_QUERY_WCS)
:C:     RETURN
:C:   ENDIF
:C: ENDIF
*
*:C: IF QUERY_ITEM_ID = QUERY_INT_LENGTH_REG THEN QUERY_INT_VAL=TOOL RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_INT_PRIMARY_TOUCHOFF_REG THEN QUERY_INT_VAL=TOOL ENDIF
:C: IF QUERY_ITEM_ID = QUERY_INT_SECONDARY_TOUCHOFF_REG THEN QUERY_INT_VAL=TOOL ENDIF
*
:C: IF CAMWORKS_VER=CAM_REV2013_SP1 OR CAMWORKS_VER>CAM_REV2013_SP1 THEN
:C:   IF HAVE_SUB_STATIONS=FALSE THEN
:C:     IF QUERY_ITEM_ID = QUERY_INT_PRIMARY_TOUCHOFF_REG THEN
:C:       IF SECTIONEXIST(QUERY_TOUCHOFF_PRIMARY) THEN
:C:         CALL(QUERY_TOUCHOFF_PRIMARY)
:C:       ELSE
:C:         QUERY_INT_VAL=TOOL
:C:       ENDIF
:C:     ENDIF
:C:     IF QUERY_ITEM_ID = QUERY_INT_SECONDARY_TOUCHOFF_REG THEN
:C:       IF SECTIONEXIST(QUERY_TOUCHOFF_SECONDARY) THEN
:C:         CALL(QUERY_TOUCHOFF_SECONDARY)
:C:       ELSE
:C:         QUERY_INT_VAL=(TOOL+1)
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF QUERY_ITEM_ID = QUERY_INT_PRIMARY_TOUCHOFF_REG THEN
:C:       IF SECTIONEXIST(QUERY_TOUCHOFF_PRIMARY_SUB_STATIONS) THEN
:C:         CALL(QUERY_TOUCHOFF_PRIMARY_SUB_STATIONS)
:C:       ELSE
:C:         QUERY_INT_VAL=((SUB_STATION*10)+1)
:C:       ENDIF
:C:     ENDIF
:C:     IF QUERY_ITEM_ID = QUERY_INT_SECONDARY_TOUCHOFF_REG THEN
:C:       IF SECTIONEXIST(QUERY_TOUCHOFF_SECONDARY_SUB_STATIONS) THEN
:C:         CALL(QUERY_TOUCHOFF_SECONDARY_SUB_STATIONS)
:C:       ELSE
:C:         QUERY_INT_VAL=((SUB_STATION*10)+2)
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
:C: IF OPR_TOOL_TIP_CENTER=1 THEN
:C:   IF HAVE_SUB_STATIONS=FALSE THEN
:C:     IF QUERY_ITEM_ID = QUERY_INT_CENTER_TOUCHOFF_REG THEN
:C:       IF SECTIONEXIST(QUERY_TOUCHOFF_CENTER) THEN
:C:         CALL(QUERY_TOUCHOFF_CENTER)
:C:       ELSE
:C:         QUERY_INT_VAL=(TOOL+1)
:C:       ENDIF
:C:     ENDIF
:C:   ELSE
:C:     IF QUERY_ITEM_ID = QUERY_INT_CENTER_TOUCHOFF_REG THEN
:C:       IF SECTIONEXIST(QUERY_TOUCHOFF_CENTER_SUB_STATIONS) THEN
:C:         CALL(QUERY_TOUCHOFF_CENTER_SUB_STATIONS)
:C:       ELSE
:C:         QUERY_INT_VAL=((SUB_STATION*10)+2)
:C:       ENDIF
:C:     ENDIF
:C:   ENDIF
:C: ENDIF
*
:C: IF QUERY_ITEM_ID = QUERY_INT_OFFSET_REG THEN CALL(CALC_QUERY_DIAM_OFFSET_REG) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T1A THEN CALL(QUERY_AXIS_NAMES_T1A) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T2A THEN CALL(QUERY_AXIS_NAMES_T2A) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T1B THEN CALL(QUERY_AXIS_NAMES_T1B) RETURN ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_AXIS_NAMES_T2B THEN CALL(QUERY_AXIS_NAMES_T2B) RETURN ENDIF
*
:C: IF QUERY_ITEM_ID = QUERY_GCODE_FILE_NAME_T1A THEN
:C:   IF SECTIONEXIST(QUERY_FILE_NAME_T1A) THEN CALL(QUERY_FILE_NAME_T1A) ENDIF
:C: ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_FILE_NAME_T1B THEN
:C:   IF SECTIONEXIST(QUERY_FILE_NAME_T1B) THEN CALL(QUERY_FILE_NAME_T1B) ENDIF
:C: ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_FILE_NAME_T2A THEN
:C:   IF SECTIONEXIST(QUERY_FILE_NAME_T2A) THEN CALL(QUERY_FILE_NAME_T2A) ENDIF
:C: ENDIF
:C: IF QUERY_ITEM_ID = QUERY_GCODE_FILE_NAME_T2B THEN
:C:   IF SECTIONEXIST(QUERY_FILE_NAME_T2B) THEN CALL(QUERY_FILE_NAME_T2B) ENDIF
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_QUERY_DIAM_OFFSET_REG
:C: QUERY_INT_VAL=(TOOL+COMP_OFFSET)
:C: IF TOOL_LENGTH_DIAM_OFFSET_METHOD=METHOD_FROM_TOOL THEN
:C:   QUERY_INT_VAL=TOOL_DIAM_OFFSET
:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=AUTO_QUERY_WCS
:T: IF MCS_TYPE=2 OR COORD_TYPE=0 THEN <G!:work_coord><EOL>ENDIF
:T: IF MCS_TYPE=3 AND work_coord=54 THEN <G!:work_coord><POINT_ONE><EOL>ENDIF
:T: IF MCS_TYPE=3 AND work_coord>54 THEN <G!:work_coord><EOL>ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
* for simulation.
* if sub spindle axis name is not "W" then copy this section to your SRC file and change accordingly.
*--------------------------------------------------------------
*:SECTION=CALC_SET_SUB_SPINDLE_AXIS_NAME
*:C: IF CAMWORKS_VER>CAM_REV2013_SP2 AND CAMWORKS_VER<>CAM_REV2014 THEN
*:C:   MCS_W_NAME={W}
*:C: ENDIF
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=QUERY_AXIS_NAMES_T1A
:T:X,Y,Z<EOL>
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=QUERY_AXIS_NAMES_T2A
:T:X,Y,Z<EOL>
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=QUERY_AXIS_NAMES_T1B
:T:X,Y,Z<EOL>
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=QUERY_AXIS_NAMES_T2B
:T:X,Y,Z<EOL>
*
*
*--------------------------------------------------------------
*--------------------------------------------------------------
*--------------------------------------------------------------
:SECTION=CALC_CLEANUP_AFTER_POSTING
*
* For CW version 2021 or newer version.
*
* CALC_CLEANUP_AFTER_POSTING gets called when posting has completed and the main file (0) is closed and the SET file is closed.
* This CALC section is intended for any file cleanup that is needed like KILLSYSFILE.
* You may need to do this if using OPENTXT command and you are outputting code to other external files.
* If you are using ":NO_SET_FILE=TRUE" then the only place you can delete the main file (0) is in this section.
* It is not recommended to use this section to call other sections that might call template sections for outputting code
* as all files are closed at this time.
*-------------------------------------------------

*
* For CW2007 or newer versions only
********************************************************
* 7-11-06 Added :SECTION=CALC_SLOWDOWN_SPEED for Cutoff cycle
* 7-11-06 Added :SECTION=CALC_ID_END_BOUNDARY for retract strategy canned cycles
* 7-11-06 Added :SECTION=CALC_END_BOUNDARY_RETRACT for retract strategy canned cycles
* 7-11-06 Added :SECTION=CALC_RETRACT_Z_THEN_X for retract strategy canned cycles
* 7-11-06 Added :SECTION=CALC_RETRACT_X_THEN_Z for retract strategy canned cycles
* 7-11-06 Added :SECTION=CALC_RAPID_TO_Z_MOVE for retract strategy canned cycles
* 7-11-06 Added :SECTION=CALC_RAPID_TO_X_MOVE for retract strategy canned cycles
* 7-11-06 Added :SECTION=CALC_POSITION_TO_START_APPROACH for approach strategy canned cycles
* 7-11-06 Added :SECTION=CALC_RAPID_TO_START_APPROACH for approach strategy standard cycles
* 7-11-06 Added :SECTION=CALC_RAPID_RETRACT for retract strategy standard cycles
* 7-11-06 Added :SECTION=CALC_SHIFT_TOOL_LATHE for Finish Groove shift direction (left or right)
* 7-11-06 Added :SECTION=CALC_CUTTER_COMP_LATHE for Finish Groove comp direction (left or right)
* 8-06-07 Added :SECTION=CALC_OUTPUT_DWELL for Automatic Dwell feature)
* 12-16-10 Added :SECTION=CALC_ADD_REAR_SYNC_CODE for Automatic rear turret sync code
* 12-16-10 Added :SECTION=CALC_ADD_FRONT_SYNC_CODE for Automatic front turret sync code
* 2-24-12 Added :SECTION=CALC_OUTPUT_SPINDLE_STATE for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_SPINDLE_ORIENTATION for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_SPINDLE_COMMENT for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_SPINDLE_COMMAND for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_CHUCK_OPEN for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_CHUCK_CLOSE for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_ARBOR_OPEN for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_ARBOR_CLOSE for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_COLLET_OPEN for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_COLLET_CLOSE for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_FEEDRATE for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_SPEED for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_REFERENCE_POINT for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_RAPID_SPINDLE_TO_POSITION for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_FEED_SPINDLE_TO_POSITION for sub spindle operations
* 2-24-12 Added :SECTION=CALC_OUTPUT_SPINDLE_SYNC for sub spindle operations
* 8-21-12 Added :SECTION=CALC_QUERY_POST for the new IMS Simulator.
* 8-21-12 Added :SECTION=CALC_QUERY_DIAM_OFFSET_REG for the new IMS Simulator.
* 8-21-12 Added :SECTION=AUTO_QUERY_WCS for the new IMS Simulator.
* 6-27-13 Added CALC_PRE_POST_INITIALIZE
* 11-26-13 Added CALC_OUTPUT_RAPID_SPINDLE_TO_HOME
* 11-26-13 Added CALC_OUTPUT_FEED_SPINDLE_TO_HOME
* 2-18-14 Added CALL(CALC_POSITION_TO_START) when CURRENT_POST_CYCLE_TYPE=SYSTEM SYS_CANNED in Section CALC_MACHINE_DRILL_LATHE
* 8-20-14 Added :SECTION=CALC_CW_ESTIMATED_MACHINE_TIME for getting the estimated machine time from CW operation.
* 12-12-17 Changed :SECTION=CALC_ARC_MOVE_LATHE for handling arc centers that are smaller then .0001 in both J center and I center for rear turret.
* 12-12-17 Changed :SECTION=CALC_ARC_MOVE_LATHE for handling arc centers that are smaller then .0001 in both L center and K center for front turret
* 5-25-18 Added PREVIOUS_OPER_TYPE and set that variable in CALC_END_OPERATION,CALC_POST_INITIALIZE, CALC_PRE_POST_INITIALIZE
* 5-25-18 Added ":C: IF DSPINDLE=0 THEN DSPINDLE=1 ENDIF" in sections CALC_POST_INITIALIZE, CALC_PRE_POST_INITIALIZE
* 5-25-18 Added :C: MACH(REG_F)=0 in CALC_INIT and CALC_SUB tool change sections.
* 6-14-18 Added X_POS=(-OPR_X_POSITION) because if Front turret then OPR_X_POSITION is set to Rear turret values.
*         this logic is set in CALC_OD_END_BOUNDARY, CALC_ID_END_BOUNDARY, CALC_END_BOUNDARY_RETRACT, CALC_RETRACT_X
*         CALC_RETRACT_Z_THEN_X and CALC_RETRACT_X_THEN_Z
* 7-17-18 Added Section CALC_OUTPUT_BEFORE_FEED_SYNC_BEFORE_CANNED_CYCLE
* 7-17-18 Added Logic in CALC_START_BOUNDARY_LATHE - CALL(CALC_OUTPUT_BEFORE_FEED_SYNC_BEFORE_CANNED_CYCLE)
* 8-08-18 Added these sections for CW2019 MULTI TURRETS support CALC_END_BONDARY_RETRACT_MULTI_TURRET,CALC_RETRACT_Z_THEN_X_MULTI_TURRET
*         CALC_RETRACT_X_THEN_Z_MULTI_TURRET,CALC_RETRACT_X_MULTI_TURRET and CALC_RETRACT_Z_MULTI_TURRET
* 1-04-19 Added Logic to handle new Approach stratagy in CALC_START_BOUNDARY_LATHE, CALC_MACHINE_DRILL_LATHE, CALC_MACHINE_THREAD_LATHE and
*         CALC_CANNED_TAPPING. Added new section called :SECTION=CALC_POSITION_TO_APPROACH_POINT
* 2-28-19 Modified sections "CALC_END_BOUNDARY_RETRACT" and "CALC_END_BONDARY_RETRACT_MULTI_TURRET" to handle "Auto" retract strategy
* 2-28-19 Added calc section "CALC_OPERATION_RETRACT_AUTO" to handle retract strategy for "Auto"
* 2-28-19 Added calc section "CALC_OPERATION_RETRACT_AUTO_MULTI_TURRET" to handle retract strategy for "Auto"
* 9-29-20 Added new system CALC section called CALC_CLEANUP_AFTER_POSTING.
********************************************************
*

